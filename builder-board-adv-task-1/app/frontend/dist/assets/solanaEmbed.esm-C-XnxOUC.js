import{r as ia,a as Pt,c as Dr,g as qt,d as Zt,p as Lr,e as oa,f as sa,B as et,P as Ti}from"./index-BxuFtWKU.js";var ln={},xi;function aa(){if(xi)return ln;xi=1;var r=ia().Buffer,e=r.isEncoding||function(u){switch(u=""+u,u&&u.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(u){if(!u)return"utf8";for(var c;;)switch(u){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return u;default:if(c)return;u=(""+u).toLowerCase(),c=!0}}function n(u){var c=t(u);if(typeof c!="string"&&(r.isEncoding===e||!e(u)))throw new Error("Unknown encoding: "+u);return c||u}ln.StringDecoder=i;function i(u){this.encoding=n(u);var c;switch(this.encoding){case"utf16le":this.text=x,this.end=v,c=4;break;case"utf8":this.fillLast=h,c=4;break;case"base64":this.text=k,this.end=U,c=3;break;default:this.write=I,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(c)}i.prototype.write=function(u){if(u.length===0)return"";var c,E;if(this.lastNeed){if(c=this.fillLast(u),c===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<u.length?c?c+this.text(u,E):this.text(u,E):c||""},i.prototype.end=N,i.prototype.text=w,i.prototype.fillLast=function(u){if(this.lastNeed<=u.length)return u.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);u.copy(this.lastChar,this.lastTotal-this.lastNeed,0,u.length),this.lastNeed-=u.length};function s(u){return u<=127?0:u>>5===6?2:u>>4===14?3:u>>3===30?4:u>>6===2?-1:-2}function o(u,c,E){var H=c.length-1;if(H<E)return 0;var F=s(c[H]);return F>=0?(F>0&&(u.lastNeed=F-1),F):--H<E||F===-2?0:(F=s(c[H]),F>=0?(F>0&&(u.lastNeed=F-2),F):--H<E||F===-2?0:(F=s(c[H]),F>=0?(F>0&&(F===2?F=0:u.lastNeed=F-3),F):0))}function l(u,c,E){if((c[0]&192)!==128)return u.lastNeed=0,"�";if(u.lastNeed>1&&c.length>1){if((c[1]&192)!==128)return u.lastNeed=1,"�";if(u.lastNeed>2&&c.length>2&&(c[2]&192)!==128)return u.lastNeed=2,"�"}}function h(u){var c=this.lastTotal-this.lastNeed,E=l(this,u);if(E!==void 0)return E;if(this.lastNeed<=u.length)return u.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);u.copy(this.lastChar,c,0,u.length),this.lastNeed-=u.length}function w(u,c){var E=o(this,u,c);if(!this.lastNeed)return u.toString("utf8",c);this.lastTotal=E;var H=u.length-(E-this.lastNeed);return u.copy(this.lastChar,0,H),u.toString("utf8",c,H)}function N(u){var c=u&&u.length?this.write(u):"";return this.lastNeed?c+"�":c}function x(u,c){if((u.length-c)%2===0){var E=u.toString("utf16le",c);if(E){var H=E.charCodeAt(E.length-1);if(H>=55296&&H<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=u[u.length-2],this.lastChar[1]=u[u.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=u[u.length-1],u.toString("utf16le",c,u.length-1)}function v(u){var c=u&&u.length?this.write(u):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return c+this.lastChar.toString("utf16le",0,E)}return c}function k(u,c){var E=(u.length-c)%3;return E===0?u.toString("base64",c):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=u[u.length-1]:(this.lastChar[0]=u[u.length-2],this.lastChar[1]=u[u.length-1]),u.toString("base64",c,u.length-E))}function U(u){var c=u&&u.length?this.write(u):"";return this.lastNeed?c+this.lastChar.toString("base64",0,3-this.lastNeed):c}function I(u){return u.toString(this.encoding)}function _(u){return u&&u.length?this.write(u):""}return ln}function tr(r){"@babel/helpers - typeof";return tr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tr(r)}function la(r,e){if(tr(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(tr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function ua(r){var e=la(r,"string");return tr(e)=="symbol"?e:e+""}function ge(r,e,t){return(e=ua(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Oi(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ke(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Oi(Object(t),!0).forEach(function(n){ge(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Oi(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var un={exports:{}},fn={exports:{}},cn,Ni;function Ie(){if(Ni)return cn;Ni=1;class r extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let n="";for(let i=0;i<t.length;i++)n+=`    ${t[i].stack}
`;super(n),this.name="AggregateError",this.errors=t}}return cn={AggregateError:r,ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,n){return e.slice(t,n)},Error,FunctionPrototypeCall(e,t,...n){return e.call(t,...n)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,n){return Object.defineProperty(e,t,n)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,n){return e.then(t,n)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,n){return e.slice(t,n)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,n){return e.set(t,n)},Boolean,Uint8Array},cn}var dn={exports:{}},hn,Ci;function Ko(){return Ci||(Ci=1,hn={format(r,...e){return r.replace(/%([sdifj])/g,function(...[t,n]){const i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(r){switch(typeof r){case"string":if(r.includes("'"))if(r.includes('"')){if(!r.includes("`")&&!r.includes("${"))return`\`${r}\``}else return`"${r}"`;return`'${r}'`;case"number":return isNaN(r)?"NaN":Object.is(r,-0)?String(r):r;case"bigint":return`${String(r)}n`;case"boolean":case"undefined":return String(r);case"object":return"{}"}}}),hn}var gn,Pi;function De(){if(Pi)return gn;Pi=1;const{format:r,inspect:e}=Ko(),{AggregateError:t}=Ie(),n=globalThis.AggregateError||t,i=Symbol("kIsNodeError"),s=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,l="__node_internal_",h={};function w(_,u){if(!_)throw new h.ERR_INTERNAL_ASSERTION(u)}function N(_){let u="",c=_.length;const E=_[0]==="-"?1:0;for(;c>=E+4;c-=3)u=`_${_.slice(c-3,c)}${u}`;return`${_.slice(0,c)}${u}`}function x(_,u,c){if(typeof u=="function")return w(u.length<=c.length,`Code: ${_}; The provided arguments length (${c.length}) does not match the required ones (${u.length}).`),u(...c);const E=(u.match(/%[dfijoOs]/g)||[]).length;return w(E===c.length,`Code: ${_}; The provided arguments length (${c.length}) does not match the required ones (${E}).`),c.length===0?u:r(u,...c)}function v(_,u,c){c||(c=Error);class E extends c{constructor(...F){super(x(_,u,F))}toString(){return`${this.name} [${_}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:c.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${_}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=_,E.prototype[i]=!0,h[_]=E}function k(_){const u=l+_.name;return Object.defineProperty(_,"name",{value:u}),_}function U(_,u){if(_&&u&&_!==u){if(Array.isArray(u.errors))return u.errors.push(_),u;const c=new n([u,_],u.message);return c.code=u.code,c}return _||u}class I extends Error{constructor(u="The operation was aborted",c=void 0){if(c!==void 0&&typeof c!="object")throw new h.ERR_INVALID_ARG_TYPE("options","Object",c);super(u,c),this.code="ABORT_ERR",this.name="AbortError"}}return v("ERR_ASSERTION","%s",Error),v("ERR_INVALID_ARG_TYPE",(_,u,c)=>{w(typeof _=="string","'name' must be a string"),Array.isArray(u)||(u=[u]);let E="The ";_.endsWith(" argument")?E+=`${_} `:E+=`"${_}" ${_.includes(".")?"property":"argument"} `,E+="must be ";const H=[],F=[],Y=[];for(const a of u)w(typeof a=="string","All expected entries have to be of type string"),s.includes(a)?H.push(a.toLowerCase()):o.test(a)?F.push(a):(w(a!=="object",'The value "object" should be written as "Object"'),Y.push(a));if(F.length>0){const a=H.indexOf("object");a!==-1&&(H.splice(H,a,1),F.push("Object"))}if(H.length>0){switch(H.length){case 1:E+=`of type ${H[0]}`;break;case 2:E+=`one of type ${H[0]} or ${H[1]}`;break;default:{const a=H.pop();E+=`one of type ${H.join(", ")}, or ${a}`}}(F.length>0||Y.length>0)&&(E+=" or ")}if(F.length>0){switch(F.length){case 1:E+=`an instance of ${F[0]}`;break;case 2:E+=`an instance of ${F[0]} or ${F[1]}`;break;default:{const a=F.pop();E+=`an instance of ${F.join(", ")}, or ${a}`}}Y.length>0&&(E+=" or ")}switch(Y.length){case 0:break;case 1:Y[0].toLowerCase()!==Y[0]&&(E+="an "),E+=`${Y[0]}`;break;case 2:E+=`one of ${Y[0]} or ${Y[1]}`;break;default:{const a=Y.pop();E+=`one of ${Y.join(", ")}, or ${a}`}}if(c==null)E+=`. Received ${c}`;else if(typeof c=="function"&&c.name)E+=`. Received function ${c.name}`;else if(typeof c=="object"){var X;if((X=c.constructor)!==null&&X!==void 0&&X.name)E+=`. Received an instance of ${c.constructor.name}`;else{const a=e(c,{depth:-1});E+=`. Received ${a}`}}else{let a=e(c,{colors:!1});a.length>25&&(a=`${a.slice(0,25)}...`),E+=`. Received type ${typeof c} (${a})`}return E},TypeError),v("ERR_INVALID_ARG_VALUE",(_,u,c="is invalid")=>{let E=e(u);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${_.includes(".")?"property":"argument"} '${_}' ${c}. Received ${E}`},TypeError),v("ERR_INVALID_RETURN_VALUE",(_,u,c)=>{var E;const H=c!=null&&(E=c.constructor)!==null&&E!==void 0&&E.name?`instance of ${c.constructor.name}`:`type ${typeof c}`;return`Expected ${_} to be returned from the "${u}" function but got ${H}.`},TypeError),v("ERR_MISSING_ARGS",(..._)=>{w(_.length>0,"At least one arg needs to be specified");let u;const c=_.length;switch(_=(Array.isArray(_)?_:[_]).map(E=>`"${E}"`).join(" or "),c){case 1:u+=`The ${_[0]} argument`;break;case 2:u+=`The ${_[0]} and ${_[1]} arguments`;break;default:{const E=_.pop();u+=`The ${_.join(", ")}, and ${E} arguments`}break}return`${u} must be specified`},TypeError),v("ERR_OUT_OF_RANGE",(_,u,c)=>{w(u,'Missing "range" argument');let E;if(Number.isInteger(c)&&Math.abs(c)>2**32)E=N(String(c));else if(typeof c=="bigint"){E=String(c);const H=BigInt(2)**BigInt(32);(c>H||c<-H)&&(E=N(E)),E+="n"}else E=e(c);return`The value of "${_}" is out of range. It must be ${u}. Received ${E}`},RangeError),v("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),v("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),v("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),v("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),v("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),v("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),v("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),v("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),v("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),v("ERR_STREAM_WRITE_AFTER_END","write after end",Error),v("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),gn={AbortError:I,aggregateTwoErrors:k(U),hideStackFrames:k,codes:h},gn}var Kt={exports:{}},Li;function rr(){if(Li)return Kt.exports;Li=1;const{AbortController:r,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Kt.exports=r,Kt.exports.AbortSignal=e,Kt.exports.default=r,Kt.exports}var Mi;function We(){return Mi||(Mi=1,(function(r){const e=Pt(),{format:t,inspect:n}=Ko(),{codes:{ERR_INVALID_ARG_TYPE:i}}=De(),{kResistStopPropagation:s,AggregateError:o,SymbolDispose:l}=Ie(),h=globalThis.AbortSignal||rr().AbortSignal,w=globalThis.AbortController||rr().AbortController,N=Object.getPrototypeOf(async function(){}).constructor,x=globalThis.Blob||e.Blob,v=typeof x<"u"?function(_){return _ instanceof x}:function(_){return!1},k=(I,_)=>{if(I!==void 0&&(I===null||typeof I!="object"||!("aborted"in I)))throw new i(_,"AbortSignal",I)},U=(I,_)=>{if(typeof I!="function")throw new i(_,"Function",I)};r.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(I){let _=!1;return function(...u){_||(_=!0,I.apply(this,u))}},createDeferredPromise:function(){let I,_;return{promise:new Promise((c,E)=>{I=c,_=E}),resolve:I,reject:_}},promisify(I){return new Promise((_,u)=>{I((c,...E)=>c?u(c):_(...E))})},debuglog(){return function(){}},format:t,inspect:n,types:{isAsyncFunction(I){return I instanceof N},isArrayBufferView(I){return ArrayBuffer.isView(I)}},isBlob:v,deprecate(I,_){return I},addAbortListener:Dr().addAbortListener||function(_,u){if(_===void 0)throw new i("signal","AbortSignal",_);k(_,"signal"),U(u,"listener");let c;return _.aborted?queueMicrotask(()=>u()):(_.addEventListener("abort",u,{__proto__:null,once:!0,[s]:!0}),c=()=>{_.removeEventListener("abort",u)}),{__proto__:null,[l](){var E;(E=c)===null||E===void 0||E()}}},AbortSignalAny:h.any||function(_){if(_.length===1)return _[0];const u=new w,c=()=>u.abort();return _.forEach(E=>{k(E,"signals"),E.addEventListener("abort",c,{once:!0})}),u.signal.addEventListener("abort",()=>{_.forEach(E=>E.removeEventListener("abort",c))},{once:!0}),u.signal}},r.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(dn)),dn.exports}var Er={},pn,Bi;function ir(){if(Bi)return pn;Bi=1;const{ArrayIsArray:r,ArrayPrototypeIncludes:e,ArrayPrototypeJoin:t,ArrayPrototypeMap:n,NumberIsInteger:i,NumberIsNaN:s,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:l,NumberParseInt:h,ObjectPrototypeHasOwnProperty:w,RegExpPrototypeExec:N,String:x,StringPrototypeToUpperCase:v,StringPrototypeTrim:k}=Ie(),{hideStackFrames:U,codes:{ERR_SOCKET_BAD_PORT:I,ERR_INVALID_ARG_TYPE:_,ERR_INVALID_ARG_VALUE:u,ERR_OUT_OF_RANGE:c,ERR_UNKNOWN_SIGNAL:E}}=De(),{normalizeEncoding:H}=We(),{isAsyncFunction:F,isArrayBufferView:Y}=We().types,X={};function a(D){return D===(D|0)}function y(D){return D===D>>>0}const f=/^[0-7]+$/,g="must be a 32-bit unsigned integer or an octal string";function b(D,Z,re){if(typeof D>"u"&&(D=re),typeof D=="string"){if(N(f,D)===null)throw new u(Z,D,g);D=h(D,8)}return p(D,Z),D}const d=U((D,Z,re=l,J=o)=>{if(typeof D!="number")throw new _(Z,"number",D);if(!i(D))throw new c(Z,"an integer",D);if(D<re||D>J)throw new c(Z,`>= ${re} && <= ${J}`,D)}),C=U((D,Z,re=-2147483648,J=2147483647)=>{if(typeof D!="number")throw new _(Z,"number",D);if(!i(D))throw new c(Z,"an integer",D);if(D<re||D>J)throw new c(Z,`>= ${re} && <= ${J}`,D)}),p=U((D,Z,re=!1)=>{if(typeof D!="number")throw new _(Z,"number",D);if(!i(D))throw new c(Z,"an integer",D);const J=re?1:0,we=4294967295;if(D<J||D>we)throw new c(Z,`>= ${J} && <= ${we}`,D)});function A(D,Z){if(typeof D!="string")throw new _(Z,"string",D)}function P(D,Z,re=void 0,J){if(typeof D!="number")throw new _(Z,"number",D);if(re!=null&&D<re||J!=null&&D>J||(re!=null||J!=null)&&s(D))throw new c(Z,`${re!=null?`>= ${re}`:""}${re!=null&&J!=null?" && ":""}${J!=null?`<= ${J}`:""}`,D)}const m=U((D,Z,re)=>{if(!e(re,D)){const we="must be one of: "+t(n(re,Pe=>typeof Pe=="string"?`'${Pe}'`:x(Pe)),", ");throw new u(Z,D,we)}});function M(D,Z){if(typeof D!="boolean")throw new _(Z,"boolean",D)}function S(D,Z,re){return D==null||!w(D,Z)?re:D[Z]}const j=U((D,Z,re=null)=>{const J=S(re,"allowArray",!1),we=S(re,"allowFunction",!1);if(!S(re,"nullable",!1)&&D===null||!J&&r(D)||typeof D!="object"&&(!we||typeof D!="function"))throw new _(Z,"Object",D)}),K=U((D,Z)=>{if(D!=null&&typeof D!="object"&&typeof D!="function")throw new _(Z,"a dictionary",D)}),W=U((D,Z,re=0)=>{if(!r(D))throw new _(Z,"Array",D);if(D.length<re){const J=`must be longer than ${re}`;throw new u(Z,D,J)}});function ee(D,Z){W(D,Z);for(let re=0;re<D.length;re++)A(D[re],`${Z}[${re}]`)}function Q(D,Z){W(D,Z);for(let re=0;re<D.length;re++)M(D[re],`${Z}[${re}]`)}function le(D,Z){W(D,Z);for(let re=0;re<D.length;re++){const J=D[re],we=`${Z}[${re}]`;if(J==null)throw new _(we,"AbortSignal",J);ce(J,we)}}function ue(D,Z="signal"){if(A(D,Z),X[D]===void 0)throw X[v(D)]!==void 0?new E(D+" (signals must use all capital letters)"):new E(D)}const G=U((D,Z="buffer")=>{if(!Y(D))throw new _(Z,["Buffer","TypedArray","DataView"],D)});function V(D,Z){const re=H(Z),J=D.length;if(re==="hex"&&J%2!==0)throw new u("encoding",Z,`is invalid for data of length ${J}`)}function oe(D,Z="Port",re=!0){if(typeof D!="number"&&typeof D!="string"||typeof D=="string"&&k(D).length===0||+D!==+D>>>0||D>65535||D===0&&!re)throw new I(Z,D,re);return D|0}const ce=U((D,Z)=>{if(D!==void 0&&(D===null||typeof D!="object"||!("aborted"in D)))throw new _(Z,"AbortSignal",D)}),fe=U((D,Z)=>{if(typeof D!="function")throw new _(Z,"Function",D)}),L=U((D,Z)=>{if(typeof D!="function"||F(D))throw new _(Z,"Function",D)}),B=U((D,Z)=>{if(D!==void 0)throw new _(Z,"undefined",D)});function $(D,Z,re){if(!e(re,D))throw new _(Z,`('${t(re,"|")}')`,D)}const ne=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function se(D,Z){if(typeof D>"u"||!N(ne,D))throw new u(Z,D,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ie(D){if(typeof D=="string")return se(D,"hints"),D;if(r(D)){const Z=D.length;let re="";if(Z===0)return re;for(let J=0;J<Z;J++){const we=D[J];se(we,"hints"),re+=we,J!==Z-1&&(re+=", ")}return re}throw new u("hints",D,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return pn={isInt32:a,isUint32:y,parseFileMode:b,validateArray:W,validateStringArray:ee,validateBooleanArray:Q,validateAbortSignalArray:le,validateBoolean:M,validateBuffer:G,validateDictionary:K,validateEncoding:V,validateFunction:fe,validateInt32:C,validateInteger:d,validateNumber:P,validateObject:j,validateOneOf:m,validatePlainFunction:L,validatePort:oe,validateSignalName:ue,validateString:A,validateUint32:p,validateUndefined:B,validateUnion:$,validateAbortSignal:ce,validateLinkHeaderValue:ie},pn}var Sr={exports:{}},wn={},Di;function Lt(){return Di||(Di=1,(function(r){Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function e(H){return H&&H.__esModule&&Object.prototype.hasOwnProperty.call(H,"default")?H.default:H}var t={exports:{}},n=t.exports={},i,s;function o(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?i=setTimeout:i=o}catch{i=o}try{typeof clearTimeout=="function"?s=clearTimeout:s=l}catch{s=l}})();function h(H){if(i===setTimeout)return setTimeout(H,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(H,0);try{return i(H,0)}catch{try{return i.call(null,H,0)}catch{return i.call(this,H,0)}}}function w(H){if(s===clearTimeout)return clearTimeout(H);if((s===l||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(H);try{return s(H)}catch{try{return s.call(null,H)}catch{return s.call(this,H)}}}var N=[],x=!1,v,k=-1;function U(){!x||!v||(x=!1,v.length?N=v.concat(N):k=-1,N.length&&I())}function I(){if(!x){var H=h(U);x=!0;for(var F=N.length;F;){for(v=N,N=[];++k<F;)v&&v[k].run();k=-1,F=N.length}v=null,x=!1,w(H)}}n.nextTick=function(H){var F=new Array(arguments.length-1);if(arguments.length>1)for(var Y=1;Y<arguments.length;Y++)F[Y-1]=arguments[Y];N.push(new _(H,F)),N.length===1&&!x&&h(I)};function _(H,F){this.fun=H,this.array=F}_.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={};function u(){}n.on=u,n.addListener=u,n.once=u,n.off=u,n.removeListener=u,n.removeAllListeners=u,n.emit=u,n.prependListener=u,n.prependOnceListener=u,n.listeners=function(H){return[]},n.binding=function(H){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(H){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};var c=t.exports;const E=e(c);r.default=E,r.process=E})(wn)),wn}var bn,ki;function ht(){if(ki)return bn;ki=1;const{SymbolAsyncIterator:r,SymbolIterator:e,SymbolFor:t}=Ie(),n=t("nodejs.stream.destroyed"),i=t("nodejs.stream.errored"),s=t("nodejs.stream.readable"),o=t("nodejs.stream.writable"),l=t("nodejs.stream.disturbed"),h=t("nodejs.webstream.isClosedPromise"),w=t("nodejs.webstream.controllerErrorFunction");function N(S,j=!1){var K;return!!(S&&typeof S.pipe=="function"&&typeof S.on=="function"&&(!j||typeof S.pause=="function"&&typeof S.resume=="function")&&(!S._writableState||((K=S._readableState)===null||K===void 0?void 0:K.readable)!==!1)&&(!S._writableState||S._readableState))}function x(S){var j;return!!(S&&typeof S.write=="function"&&typeof S.on=="function"&&(!S._readableState||((j=S._writableState)===null||j===void 0?void 0:j.writable)!==!1))}function v(S){return!!(S&&typeof S.pipe=="function"&&S._readableState&&typeof S.on=="function"&&typeof S.write=="function")}function k(S){return S&&(S._readableState||S._writableState||typeof S.write=="function"&&typeof S.on=="function"||typeof S.pipe=="function"&&typeof S.on=="function")}function U(S){return!!(S&&!k(S)&&typeof S.pipeThrough=="function"&&typeof S.getReader=="function"&&typeof S.cancel=="function")}function I(S){return!!(S&&!k(S)&&typeof S.getWriter=="function"&&typeof S.abort=="function")}function _(S){return!!(S&&!k(S)&&typeof S.readable=="object"&&typeof S.writable=="object")}function u(S){return U(S)||I(S)||_(S)}function c(S,j){return S==null?!1:j===!0?typeof S[r]=="function":j===!1?typeof S[e]=="function":typeof S[r]=="function"||typeof S[e]=="function"}function E(S){if(!k(S))return null;const j=S._writableState,K=S._readableState,W=j||K;return!!(S.destroyed||S[n]||W!=null&&W.destroyed)}function H(S){if(!x(S))return null;if(S.writableEnded===!0)return!0;const j=S._writableState;return j!=null&&j.errored?!1:typeof j?.ended!="boolean"?null:j.ended}function F(S,j){if(!x(S))return null;if(S.writableFinished===!0)return!0;const K=S._writableState;return K!=null&&K.errored?!1:typeof K?.finished!="boolean"?null:!!(K.finished||j===!1&&K.ended===!0&&K.length===0)}function Y(S){if(!N(S))return null;if(S.readableEnded===!0)return!0;const j=S._readableState;return!j||j.errored?!1:typeof j?.ended!="boolean"?null:j.ended}function X(S,j){if(!N(S))return null;const K=S._readableState;return K!=null&&K.errored?!1:typeof K?.endEmitted!="boolean"?null:!!(K.endEmitted||j===!1&&K.ended===!0&&K.length===0)}function a(S){return S&&S[s]!=null?S[s]:typeof S?.readable!="boolean"?null:E(S)?!1:N(S)&&S.readable&&!X(S)}function y(S){return S&&S[o]!=null?S[o]:typeof S?.writable!="boolean"?null:E(S)?!1:x(S)&&S.writable&&!H(S)}function f(S,j){return k(S)?E(S)?!0:!(j?.readable!==!1&&a(S)||j?.writable!==!1&&y(S)):null}function g(S){var j,K;return k(S)?S.writableErrored?S.writableErrored:(j=(K=S._writableState)===null||K===void 0?void 0:K.errored)!==null&&j!==void 0?j:null:null}function b(S){var j,K;return k(S)?S.readableErrored?S.readableErrored:(j=(K=S._readableState)===null||K===void 0?void 0:K.errored)!==null&&j!==void 0?j:null:null}function d(S){if(!k(S))return null;if(typeof S.closed=="boolean")return S.closed;const j=S._writableState,K=S._readableState;return typeof j?.closed=="boolean"||typeof K?.closed=="boolean"?j?.closed||K?.closed:typeof S._closed=="boolean"&&C(S)?S._closed:null}function C(S){return typeof S._closed=="boolean"&&typeof S._defaultKeepAlive=="boolean"&&typeof S._removedConnection=="boolean"&&typeof S._removedContLen=="boolean"}function p(S){return typeof S._sent100=="boolean"&&C(S)}function A(S){var j;return typeof S._consuming=="boolean"&&typeof S._dumped=="boolean"&&((j=S.req)===null||j===void 0?void 0:j.upgradeOrConnect)===void 0}function P(S){if(!k(S))return null;const j=S._writableState,K=S._readableState,W=j||K;return!W&&p(S)||!!(W&&W.autoDestroy&&W.emitClose&&W.closed===!1)}function m(S){var j;return!!(S&&((j=S[l])!==null&&j!==void 0?j:S.readableDidRead||S.readableAborted))}function M(S){var j,K,W,ee,Q,le,ue,G,V,oe;return!!(S&&((j=(K=(W=(ee=(Q=(le=S[i])!==null&&le!==void 0?le:S.readableErrored)!==null&&Q!==void 0?Q:S.writableErrored)!==null&&ee!==void 0?ee:(ue=S._readableState)===null||ue===void 0?void 0:ue.errorEmitted)!==null&&W!==void 0?W:(G=S._writableState)===null||G===void 0?void 0:G.errorEmitted)!==null&&K!==void 0?K:(V=S._readableState)===null||V===void 0?void 0:V.errored)!==null&&j!==void 0?j:!((oe=S._writableState)===null||oe===void 0)&&oe.errored))}return bn={isDestroyed:E,kIsDestroyed:n,isDisturbed:m,kIsDisturbed:l,isErrored:M,kIsErrored:i,isReadable:a,kIsReadable:s,kIsClosedPromise:h,kControllerErrorFunction:w,kIsWritable:o,isClosed:d,isDuplexNodeStream:v,isFinished:f,isIterable:c,isReadableNodeStream:N,isReadableStream:U,isReadableEnded:Y,isReadableFinished:X,isReadableErrored:b,isNodeStream:k,isWebStream:u,isWritable:y,isWritableNodeStream:x,isWritableStream:I,isWritableEnded:H,isWritableFinished:F,isWritableErrored:g,isServerRequest:A,isServerResponse:p,willEmitClose:P,isTransformStream:_},bn}var Ui;function mt(){if(Ui)return Sr.exports;Ui=1;const r=Lt(),{AbortError:e,codes:t}=De(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:i}=t,{kEmptyObject:s,once:o}=We(),{validateAbortSignal:l,validateFunction:h,validateObject:w,validateBoolean:N}=ir(),{Promise:x,PromisePrototypeThen:v,SymbolDispose:k}=Ie(),{isClosed:U,isReadable:I,isReadableNodeStream:_,isReadableStream:u,isReadableFinished:c,isReadableErrored:E,isWritable:H,isWritableNodeStream:F,isWritableStream:Y,isWritableFinished:X,isWritableErrored:a,isNodeStream:y,willEmitClose:f,kIsClosedPromise:g}=ht();let b;function d(m){return m.setHeader&&typeof m.abort=="function"}const C=()=>{};function p(m,M,S){var j,K;if(arguments.length===2?(S=M,M=s):M==null?M=s:w(M,"options"),h(S,"callback"),l(M.signal,"options.signal"),S=o(S),u(m)||Y(m))return A(m,M,S);if(!y(m))throw new n("stream",["ReadableStream","WritableStream","Stream"],m);const W=(j=M.readable)!==null&&j!==void 0?j:_(m),ee=(K=M.writable)!==null&&K!==void 0?K:F(m),Q=m._writableState,le=m._readableState,ue=()=>{m.writable||oe()};let G=f(m)&&_(m)===W&&F(m)===ee,V=X(m,!1);const oe=()=>{V=!0,m.destroyed&&(G=!1),!(G&&(!m.readable||W))&&(!W||ce)&&S.call(m)};let ce=c(m,!1);const fe=()=>{ce=!0,m.destroyed&&(G=!1),!(G&&(!m.writable||ee))&&(!ee||V)&&S.call(m)},L=D=>{S.call(m,D)};let B=U(m);const $=()=>{B=!0;const D=a(m)||E(m);if(D&&typeof D!="boolean")return S.call(m,D);if(W&&!ce&&_(m,!0)&&!c(m,!1))return S.call(m,new i);if(ee&&!V&&!X(m,!1))return S.call(m,new i);S.call(m)},ne=()=>{B=!0;const D=a(m)||E(m);if(D&&typeof D!="boolean")return S.call(m,D);S.call(m)},se=()=>{m.req.on("finish",oe)};d(m)?(m.on("complete",oe),G||m.on("abort",$),m.req?se():m.on("request",se)):ee&&!Q&&(m.on("end",ue),m.on("close",ue)),!G&&typeof m.aborted=="boolean"&&m.on("aborted",$),m.on("end",fe),m.on("finish",oe),M.error!==!1&&m.on("error",L),m.on("close",$),B?r.nextTick($):Q!=null&&Q.errorEmitted||le!=null&&le.errorEmitted?G||r.nextTick(ne):(!W&&(!G||I(m))&&(V||H(m)===!1)||!ee&&(!G||H(m))&&(ce||I(m)===!1)||le&&m.req&&m.aborted)&&r.nextTick(ne);const ie=()=>{S=C,m.removeListener("aborted",$),m.removeListener("complete",oe),m.removeListener("abort",$),m.removeListener("request",se),m.req&&m.req.removeListener("finish",oe),m.removeListener("end",ue),m.removeListener("close",ue),m.removeListener("finish",oe),m.removeListener("end",fe),m.removeListener("error",L),m.removeListener("close",$)};if(M.signal&&!B){const D=()=>{const Z=S;ie(),Z.call(m,new e(void 0,{cause:M.signal.reason}))};if(M.signal.aborted)r.nextTick(D);else{b=b||We().addAbortListener;const Z=b(M.signal,D),re=S;S=o((...J)=>{Z[k](),re.apply(m,J)})}}return ie}function A(m,M,S){let j=!1,K=C;if(M.signal)if(K=()=>{j=!0,S.call(m,new e(void 0,{cause:M.signal.reason}))},M.signal.aborted)r.nextTick(K);else{b=b||We().addAbortListener;const ee=b(M.signal,K),Q=S;S=o((...le)=>{ee[k](),Q.apply(m,le)})}const W=(...ee)=>{j||r.nextTick(()=>S.apply(m,ee))};return v(m[g].promise,W,W),C}function P(m,M){var S;let j=!1;return M===null&&(M=s),(S=M)!==null&&S!==void 0&&S.cleanup&&(N(M.cleanup,"cleanup"),j=M.cleanup),new x((K,W)=>{const ee=p(m,M,Q=>{j&&ee(),Q?W(Q):K()})})}return Sr.exports=p,Sr.exports.finished=P,Sr.exports}var yn,qi;function jt(){if(qi)return yn;qi=1;const r=Lt(),{aggregateTwoErrors:e,codes:{ERR_MULTIPLE_CALLBACK:t},AbortError:n}=De(),{Symbol:i}=Ie(),{kIsDestroyed:s,isDestroyed:o,isFinished:l,isServerRequest:h}=ht(),w=i("kDestroy"),N=i("kConstruct");function x(f,g,b){f&&(f.stack,g&&!g.errored&&(g.errored=f),b&&!b.errored&&(b.errored=f))}function v(f,g){const b=this._readableState,d=this._writableState,C=d||b;return d!=null&&d.destroyed||b!=null&&b.destroyed?(typeof g=="function"&&g(),this):(x(f,d,b),d&&(d.destroyed=!0),b&&(b.destroyed=!0),C.constructed?k(this,f,g):this.once(w,function(p){k(this,e(p,f),g)}),this)}function k(f,g,b){let d=!1;function C(p){if(d)return;d=!0;const A=f._readableState,P=f._writableState;x(p,P,A),P&&(P.closed=!0),A&&(A.closed=!0),typeof b=="function"&&b(p),p?r.nextTick(U,f,p):r.nextTick(I,f)}try{f._destroy(g||null,C)}catch(p){C(p)}}function U(f,g){_(f,g),I(f)}function I(f){const g=f._readableState,b=f._writableState;b&&(b.closeEmitted=!0),g&&(g.closeEmitted=!0),(b!=null&&b.emitClose||g!=null&&g.emitClose)&&f.emit("close")}function _(f,g){const b=f._readableState,d=f._writableState;d!=null&&d.errorEmitted||b!=null&&b.errorEmitted||(d&&(d.errorEmitted=!0),b&&(b.errorEmitted=!0),f.emit("error",g))}function u(){const f=this._readableState,g=this._writableState;f&&(f.constructed=!0,f.closed=!1,f.closeEmitted=!1,f.destroyed=!1,f.errored=null,f.errorEmitted=!1,f.reading=!1,f.ended=f.readable===!1,f.endEmitted=f.readable===!1),g&&(g.constructed=!0,g.destroyed=!1,g.closed=!1,g.closeEmitted=!1,g.errored=null,g.errorEmitted=!1,g.finalCalled=!1,g.prefinished=!1,g.ended=g.writable===!1,g.ending=g.writable===!1,g.finished=g.writable===!1)}function c(f,g,b){const d=f._readableState,C=f._writableState;if(C!=null&&C.destroyed||d!=null&&d.destroyed)return this;d!=null&&d.autoDestroy||C!=null&&C.autoDestroy?f.destroy(g):g&&(g.stack,C&&!C.errored&&(C.errored=g),d&&!d.errored&&(d.errored=g),b?r.nextTick(_,f,g):_(f,g))}function E(f,g){if(typeof f._construct!="function")return;const b=f._readableState,d=f._writableState;b&&(b.constructed=!1),d&&(d.constructed=!1),f.once(N,g),!(f.listenerCount(N)>1)&&r.nextTick(H,f)}function H(f){let g=!1;function b(d){if(g){c(f,d??new t);return}g=!0;const C=f._readableState,p=f._writableState,A=p||C;C&&(C.constructed=!0),p&&(p.constructed=!0),A.destroyed?f.emit(w,d):d?c(f,d,!0):r.nextTick(F,f)}try{f._construct(d=>{r.nextTick(b,d)})}catch(d){r.nextTick(b,d)}}function F(f){f.emit(N)}function Y(f){return f?.setHeader&&typeof f.abort=="function"}function X(f){f.emit("close")}function a(f,g){f.emit("error",g),r.nextTick(X,f)}function y(f,g){!f||o(f)||(!g&&!l(f)&&(g=new n),h(f)?(f.socket=null,f.destroy(g)):Y(f)?f.abort():Y(f.req)?f.req.abort():typeof f.destroy=="function"?f.destroy(g):typeof f.close=="function"?f.close():g?r.nextTick(a,f,g):r.nextTick(X,f),f.destroyed||(f[s]=!0))}return yn={construct:E,destroyer:y,destroy:v,undestroy:u,errorOrDestroy:c},yn}var _n,ji;function ii(){if(ji)return _n;ji=1;const{ArrayIsArray:r,ObjectSetPrototypeOf:e}=Ie(),{EventEmitter:t}=Dr();function n(s){t.call(this,s)}e(n.prototype,t.prototype),e(n,t),n.prototype.pipe=function(s,o){const l=this;function h(I){s.writable&&s.write(I)===!1&&l.pause&&l.pause()}l.on("data",h);function w(){l.readable&&l.resume&&l.resume()}s.on("drain",w),!s._isStdio&&(!o||o.end!==!1)&&(l.on("end",x),l.on("close",v));let N=!1;function x(){N||(N=!0,s.end())}function v(){N||(N=!0,typeof s.destroy=="function"&&s.destroy())}function k(I){U(),t.listenerCount(this,"error")===0&&this.emit("error",I)}i(l,"error",k),i(s,"error",k);function U(){l.removeListener("data",h),s.removeListener("drain",w),l.removeListener("end",x),l.removeListener("close",v),l.removeListener("error",k),s.removeListener("error",k),l.removeListener("end",U),l.removeListener("close",U),s.removeListener("close",U)}return l.on("end",U),l.on("close",U),s.on("close",U),s.emit("pipe",l),s};function i(s,o,l){if(typeof s.prependListener=="function")return s.prependListener(o,l);!s._events||!s._events[o]?s.on(o,l):r(s._events[o])?s._events[o].unshift(l):s._events[o]=[l,s._events[o]]}return _n={Stream:n,prependListener:i},_n}var mn={exports:{}},Wi;function kr(){return Wi||(Wi=1,(function(r){const{SymbolDispose:e}=Ie(),{AbortError:t,codes:n}=De(),{isNodeStream:i,isWebStream:s,kControllerErrorFunction:o}=ht(),l=mt(),{ERR_INVALID_ARG_TYPE:h}=n;let w;const N=(x,v)=>{if(typeof x!="object"||!("aborted"in x))throw new h(v,"AbortSignal",x)};r.exports.addAbortSignal=function(v,k){if(N(v,"signal"),!i(k)&&!s(k))throw new h("stream",["ReadableStream","WritableStream","Stream"],k);return r.exports.addAbortSignalNoValidate(v,k)},r.exports.addAbortSignalNoValidate=function(x,v){if(typeof x!="object"||!("aborted"in x))return v;const k=i(v)?()=>{v.destroy(new t(void 0,{cause:x.reason}))}:()=>{v[o](new t(void 0,{cause:x.reason}))};if(x.aborted)k();else{w=w||We().addAbortListener;const U=w(x,k);l(v,U[e])}return v}})(mn)),mn.exports}var En,Fi;function fa(){if(Fi)return En;Fi=1;const{StringPrototypeSlice:r,SymbolIterator:e,TypedArrayPrototypeSet:t,Uint8Array:n}=Ie(),{Buffer:i}=Pt(),{inspect:s}=We();return En=class{constructor(){this.head=null,this.tail=null,this.length=0}push(l){const h={data:l,next:null};this.length>0?this.tail.next=h:this.head=h,this.tail=h,++this.length}unshift(l){const h={data:l,next:this.head};this.length===0&&(this.tail=h),this.head=h,++this.length}shift(){if(this.length===0)return;const l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}clear(){this.head=this.tail=null,this.length=0}join(l){if(this.length===0)return"";let h=this.head,w=""+h.data;for(;(h=h.next)!==null;)w+=l+h.data;return w}concat(l){if(this.length===0)return i.alloc(0);const h=i.allocUnsafe(l>>>0);let w=this.head,N=0;for(;w;)t(h,w.data,N),N+=w.data.length,w=w.next;return h}consume(l,h){const w=this.head.data;if(l<w.length){const N=w.slice(0,l);return this.head.data=w.slice(l),N}return l===w.length?this.shift():h?this._getString(l):this._getBuffer(l)}first(){return this.head.data}*[e](){for(let l=this.head;l;l=l.next)yield l.data}_getString(l){let h="",w=this.head,N=0;do{const x=w.data;if(l>x.length)h+=x,l-=x.length;else{l===x.length?(h+=x,++N,w.next?this.head=w.next:this.head=this.tail=null):(h+=r(x,0,l),this.head=w,w.data=r(x,l));break}++N}while((w=w.next)!==null);return this.length-=N,h}_getBuffer(l){const h=i.allocUnsafe(l),w=l;let N=this.head,x=0;do{const v=N.data;if(l>v.length)t(h,v,w-l),l-=v.length;else{l===v.length?(t(h,v,w-l),++x,N.next?this.head=N.next:this.head=this.tail=null):(t(h,new n(v.buffer,v.byteOffset,l),w-l),this.head=N,N.data=v.slice(l));break}++x}while((N=N.next)!==null);return this.length-=x,h}[Symbol.for("nodejs.util.inspect.custom")](l,h){return s(this,{...h,depth:0,customInspect:!1})}},En}var Sn,$i;function Ur(){if($i)return Sn;$i=1;const{MathFloor:r,NumberIsInteger:e}=Ie(),{validateInteger:t}=ir(),{ERR_INVALID_ARG_VALUE:n}=De().codes;let i=16*1024,s=16;function o(N,x,v){return N.highWaterMark!=null?N.highWaterMark:x?N[v]:null}function l(N){return N?s:i}function h(N,x){t(x,"value",0),N?s=x:i=x}function w(N,x,v,k){const U=o(x,k,v);if(U!=null){if(!e(U)||U<0){const I=k?`options.${v}`:"options.highWaterMark";throw new n(I,U)}return r(U)}return l(N.objectMode)}return Sn={getHighWaterMark:w,getDefaultHighWaterMark:l,setDefaultHighWaterMark:h},Sn}var vn,Hi;function Yo(){if(Hi)return vn;Hi=1;const r=Lt(),{PromisePrototypeThen:e,SymbolAsyncIterator:t,SymbolIterator:n}=Ie(),{Buffer:i}=Pt(),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_NULL_VALUES:o}=De().codes;function l(h,w,N){let x;if(typeof w=="string"||w instanceof i)return new h({objectMode:!0,...N,read(){this.push(w),this.push(null)}});let v;if(w&&w[t])v=!0,x=w[t]();else if(w&&w[n])v=!1,x=w[n]();else throw new s("iterable",["Iterable"],w);const k=new h({objectMode:!0,highWaterMark:1,...N});let U=!1;k._read=function(){U||(U=!0,_())},k._destroy=function(u,c){e(I(u),()=>r.nextTick(c,u),E=>r.nextTick(c,E||u))};async function I(u){const c=u!=null,E=typeof x.throw=="function";if(c&&E){const{value:H,done:F}=await x.throw(u);if(await H,F)return}if(typeof x.return=="function"){const{value:H}=await x.return();await H}}async function _(){for(;;){try{const{value:u,done:c}=v?await x.next():x.next();if(c)k.push(null);else{const E=u&&typeof u.then=="function"?await u:u;if(E===null)throw U=!1,new o;if(k.push(E))continue;U=!1}}catch(u){k.destroy(u)}break}}return k}return vn=l,vn}var An,zi;function qr(){if(zi)return An;zi=1;const r=Lt(),{ArrayPrototypeIndexOf:e,NumberIsInteger:t,NumberIsNaN:n,NumberParseInt:i,ObjectDefineProperties:s,ObjectKeys:o,ObjectSetPrototypeOf:l,Promise:h,SafeSet:w,SymbolAsyncDispose:N,SymbolAsyncIterator:x,Symbol:v}=Ie();An=J,J.ReadableState=re;const{EventEmitter:k}=Dr(),{Stream:U,prependListener:I}=ii(),{Buffer:_}=Pt(),{addAbortSignal:u}=kr(),c=mt();let E=We().debuglog("stream",R=>{E=R});const H=fa(),F=jt(),{getHighWaterMark:Y,getDefaultHighWaterMark:X}=Ur(),{aggregateTwoErrors:a,codes:{ERR_INVALID_ARG_TYPE:y,ERR_METHOD_NOT_IMPLEMENTED:f,ERR_OUT_OF_RANGE:g,ERR_STREAM_PUSH_AFTER_EOF:b,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:d},AbortError:C}=De(),{validateObject:p}=ir(),A=v("kPaused"),{StringDecoder:P}=aa(),m=Yo();l(J.prototype,U.prototype),l(J,U);const M=()=>{},{errorOrDestroy:S}=F,j=1,K=2,W=4,ee=8,Q=16,le=32,ue=64,G=128,V=256,oe=512,ce=1024,fe=2048,L=4096,B=8192,$=16384,ne=32768,se=65536,ie=1<<17,D=1<<18;function Z(R){return{enumerable:!1,get(){return(this.state&R)!==0},set(O){O?this.state|=R:this.state&=~R}}}s(re.prototype,{objectMode:Z(j),ended:Z(K),endEmitted:Z(W),reading:Z(ee),constructed:Z(Q),sync:Z(le),needReadable:Z(ue),emittedReadable:Z(G),readableListening:Z(V),resumeScheduled:Z(oe),errorEmitted:Z(ce),emitClose:Z(fe),autoDestroy:Z(L),destroyed:Z(B),closed:Z($),closeEmitted:Z(ne),multiAwaitDrain:Z(se),readingMore:Z(ie),dataEmitted:Z(D)});function re(R,O,te){typeof te!="boolean"&&(te=O instanceof dt()),this.state=fe|L|Q|le,R&&R.objectMode&&(this.state|=j),te&&R&&R.readableObjectMode&&(this.state|=j),this.highWaterMark=R?Y(this,R,"readableHighWaterMark",te):X(!1),this.buffer=new H,this.length=0,this.pipes=[],this.flowing=null,this[A]=null,R&&R.emitClose===!1&&(this.state&=~fe),R&&R.autoDestroy===!1&&(this.state&=~L),this.errored=null,this.defaultEncoding=R&&R.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,R&&R.encoding&&(this.decoder=new P(R.encoding),this.encoding=R.encoding)}function J(R){if(!(this instanceof J))return new J(R);const O=this instanceof dt();this._readableState=new re(R,this,O),R&&(typeof R.read=="function"&&(this._read=R.read),typeof R.destroy=="function"&&(this._destroy=R.destroy),typeof R.construct=="function"&&(this._construct=R.construct),R.signal&&!O&&u(R.signal,this)),U.call(this,R),F.construct(this,()=>{this._readableState.needReadable&&Me(this,this._readableState)})}J.prototype.destroy=F.destroy,J.prototype._undestroy=F.undestroy,J.prototype._destroy=function(R,O){O(R)},J.prototype[k.captureRejectionSymbol]=function(R){this.destroy(R)},J.prototype[N]=function(){let R;return this.destroyed||(R=this.readableEnded?null:new C,this.destroy(R)),new h((O,te)=>c(this,ae=>ae&&ae!==R?te(ae):O(null)))},J.prototype.push=function(R,O){return we(this,R,O,!1)},J.prototype.unshift=function(R,O){return we(this,R,O,!0)};function we(R,O,te,ae){E("readableAddChunk",O);const de=R._readableState;let Oe;if((de.state&j)===0&&(typeof O=="string"?(te=te||de.defaultEncoding,de.encoding!==te&&(ae&&de.encoding?O=_.from(O,te).toString(de.encoding):(O=_.from(O,te),te=""))):O instanceof _?te="":U._isUint8Array(O)?(O=U._uint8ArrayToBuffer(O),te=""):O!=null&&(Oe=new y("chunk",["string","Buffer","Uint8Array"],O))),Oe)S(R,Oe);else if(O===null)de.state&=~ee,Le(R,de);else if((de.state&j)!==0||O&&O.length>0)if(ae)if((de.state&W)!==0)S(R,new d);else{if(de.destroyed||de.errored)return!1;Pe(R,de,O,!0)}else if(de.ended)S(R,new b);else{if(de.destroyed||de.errored)return!1;de.state&=~ee,de.decoder&&!te?(O=de.decoder.write(O),de.objectMode||O.length!==0?Pe(R,de,O,!1):Me(R,de)):Pe(R,de,O,!1)}else ae||(de.state&=~ee,Me(R,de));return!de.ended&&(de.length<de.highWaterMark||de.length===0)}function Pe(R,O,te,ae){O.flowing&&O.length===0&&!O.sync&&R.listenerCount("data")>0?((O.state&se)!==0?O.awaitDrainWriters.clear():O.awaitDrainWriters=null,O.dataEmitted=!0,R.emit("data",te)):(O.length+=O.objectMode?1:te.length,ae?O.buffer.unshift(te):O.buffer.push(te),(O.state&ue)!==0&&Ye(R)),Me(R,O)}J.prototype.isPaused=function(){const R=this._readableState;return R[A]===!0||R.flowing===!1},J.prototype.setEncoding=function(R){const O=new P(R);this._readableState.decoder=O,this._readableState.encoding=this._readableState.decoder.encoding;const te=this._readableState.buffer;let ae="";for(const de of te)ae+=O.write(de);return te.clear(),ae!==""&&te.push(ae),this._readableState.length=ae.length,this};const ye=1073741824;function Be(R){if(R>ye)throw new g("size","<= 1GiB",R);return R--,R|=R>>>1,R|=R>>>2,R|=R>>>4,R|=R>>>8,R|=R>>>16,R++,R}function xe(R,O){return R<=0||O.length===0&&O.ended?0:(O.state&j)!==0?1:n(R)?O.flowing&&O.length?O.buffer.first().length:O.length:R<=O.length?R:O.ended?O.length:0}J.prototype.read=function(R){E("read",R),R===void 0?R=NaN:t(R)||(R=i(R,10));const O=this._readableState,te=R;if(R>O.highWaterMark&&(O.highWaterMark=Be(R)),R!==0&&(O.state&=~G),R===0&&O.needReadable&&((O.highWaterMark!==0?O.length>=O.highWaterMark:O.length>0)||O.ended))return E("read: emitReadable",O.length,O.ended),O.length===0&&O.ended?Ft(this):Ye(this),null;if(R=xe(R,O),R===0&&O.ended)return O.length===0&&Ft(this),null;let ae=(O.state&ue)!==0;if(E("need readable",ae),(O.length===0||O.length-R<O.highWaterMark)&&(ae=!0,E("length less than watermark",ae)),O.ended||O.reading||O.destroyed||O.errored||!O.constructed)ae=!1,E("reading, ended or constructing",ae);else if(ae){E("do read"),O.state|=ee|le,O.length===0&&(O.state|=ue);try{this._read(O.highWaterMark)}catch(Oe){S(this,Oe)}O.state&=~le,O.reading||(R=xe(te,O))}let de;return R>0?de=gt(R,O):de=null,de===null?(O.needReadable=O.length<=O.highWaterMark,R=0):(O.length-=R,O.multiAwaitDrain?O.awaitDrainWriters.clear():O.awaitDrainWriters=null),O.length===0&&(O.ended||(O.needReadable=!0),te!==R&&O.ended&&Ft(this)),de!==null&&!O.errorEmitted&&!O.closeEmitted&&(O.dataEmitted=!0,this.emit("data",de)),de};function Le(R,O){if(E("onEofChunk"),!O.ended){if(O.decoder){const te=O.decoder.end();te&&te.length&&(O.buffer.push(te),O.length+=O.objectMode?1:te.length)}O.ended=!0,O.sync?Ye(R):(O.needReadable=!1,O.emittedReadable=!0,Et(R))}}function Ye(R){const O=R._readableState;E("emitReadable",O.needReadable,O.emittedReadable),O.needReadable=!1,O.emittedReadable||(E("emitReadable",O.flowing),O.emittedReadable=!0,r.nextTick(Et,R))}function Et(R){const O=R._readableState;E("emitReadable_",O.destroyed,O.length,O.ended),!O.destroyed&&!O.errored&&(O.length||O.ended)&&(R.emit("readable"),O.emittedReadable=!1),O.needReadable=!O.flowing&&!O.ended&&O.length<=O.highWaterMark,Wt(R)}function Me(R,O){!O.readingMore&&O.constructed&&(O.readingMore=!0,r.nextTick(lr,R,O))}function lr(R,O){for(;!O.reading&&!O.ended&&(O.length<O.highWaterMark||O.flowing&&O.length===0);){const te=O.length;if(E("maybeReadMore read 0"),R.read(0),te===O.length)break}O.readingMore=!1}J.prototype._read=function(R){throw new f("_read()")},J.prototype.pipe=function(R,O){const te=this,ae=this._readableState;ae.pipes.length===1&&(ae.multiAwaitDrain||(ae.multiAwaitDrain=!0,ae.awaitDrainWriters=new w(ae.awaitDrainWriters?[ae.awaitDrainWriters]:[]))),ae.pipes.push(R),E("pipe count=%d opts=%j",ae.pipes.length,O);const Oe=(!O||O.end!==!1)&&R!==r.stdout&&R!==r.stderr?hr:St;ae.endEmitted?r.nextTick(Oe):te.once("end",Oe),R.on("unpipe",ke);function ke(st,Je){E("onunpipe"),st===te&&Je&&Je.hasUnpiped===!1&&(Je.hasUnpiped=!0,Jr())}function hr(){E("onend"),R.end()}let Ue,gr=!1;function Jr(){E("cleanup"),R.removeListener("close",tt),R.removeListener("finish",zt),Ue&&R.removeListener("drain",Ue),R.removeListener("error",Ht),R.removeListener("unpipe",ke),te.removeListener("end",hr),te.removeListener("end",St),te.removeListener("data",wr),gr=!0,Ue&&ae.awaitDrainWriters&&(!R._writableState||R._writableState.needDrain)&&Ue()}function pr(){gr||(ae.pipes.length===1&&ae.pipes[0]===R?(E("false write response, pause",0),ae.awaitDrainWriters=R,ae.multiAwaitDrain=!1):ae.pipes.length>1&&ae.pipes.includes(R)&&(E("false write response, pause",ae.awaitDrainWriters.size),ae.awaitDrainWriters.add(R)),te.pause()),Ue||(Ue=Vr(te,R),R.on("drain",Ue))}te.on("data",wr);function wr(st){E("ondata");const Je=R.write(st);E("dest.write",Je),Je===!1&&pr()}function Ht(st){if(E("onerror",st),St(),R.removeListener("error",Ht),R.listenerCount("error")===0){const Je=R._writableState||R._readableState;Je&&!Je.errorEmitted?S(R,st):R.emit("error",st)}}I(R,"error",Ht);function tt(){R.removeListener("finish",zt),St()}R.once("close",tt);function zt(){E("onfinish"),R.removeListener("close",tt),St()}R.once("finish",zt);function St(){E("unpipe"),te.unpipe(R)}return R.emit("pipe",te),R.writableNeedDrain===!0?pr():ae.flowing||(E("pipe resume"),te.resume()),R};function Vr(R,O){return function(){const ae=R._readableState;ae.awaitDrainWriters===O?(E("pipeOnDrain",1),ae.awaitDrainWriters=null):ae.multiAwaitDrain&&(E("pipeOnDrain",ae.awaitDrainWriters.size),ae.awaitDrainWriters.delete(O)),(!ae.awaitDrainWriters||ae.awaitDrainWriters.size===0)&&R.listenerCount("data")&&R.resume()}}J.prototype.unpipe=function(R){const O=this._readableState,te={hasUnpiped:!1};if(O.pipes.length===0)return this;if(!R){const de=O.pipes;O.pipes=[],this.pause();for(let Oe=0;Oe<de.length;Oe++)de[Oe].emit("unpipe",this,{hasUnpiped:!1});return this}const ae=e(O.pipes,R);return ae===-1?this:(O.pipes.splice(ae,1),O.pipes.length===0&&this.pause(),R.emit("unpipe",this,te),this)},J.prototype.on=function(R,O){const te=U.prototype.on.call(this,R,O),ae=this._readableState;return R==="data"?(ae.readableListening=this.listenerCount("readable")>0,ae.flowing!==!1&&this.resume()):R==="readable"&&!ae.endEmitted&&!ae.readableListening&&(ae.readableListening=ae.needReadable=!0,ae.flowing=!1,ae.emittedReadable=!1,E("on readable",ae.length,ae.reading),ae.length?Ye(this):ae.reading||r.nextTick(it,this)),te},J.prototype.addListener=J.prototype.on,J.prototype.removeListener=function(R,O){const te=U.prototype.removeListener.call(this,R,O);return R==="readable"&&r.nextTick(ur,this),te},J.prototype.off=J.prototype.removeListener,J.prototype.removeAllListeners=function(R){const O=U.prototype.removeAllListeners.apply(this,arguments);return(R==="readable"||R===void 0)&&r.nextTick(ur,this),O};function ur(R){const O=R._readableState;O.readableListening=R.listenerCount("readable")>0,O.resumeScheduled&&O[A]===!1?O.flowing=!0:R.listenerCount("data")>0?R.resume():O.readableListening||(O.flowing=null)}function it(R){E("readable nexttick read 0"),R.read(0)}J.prototype.resume=function(){const R=this._readableState;return R.flowing||(E("resume"),R.flowing=!R.readableListening,Mt(this,R)),R[A]=!1,this};function Mt(R,O){O.resumeScheduled||(O.resumeScheduled=!0,r.nextTick(Kr,R,O))}function Kr(R,O){E("resume",O.reading),O.reading||R.read(0),O.resumeScheduled=!1,R.emit("resume"),Wt(R),O.flowing&&!O.reading&&R.read(0)}J.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[A]=!0,this};function Wt(R){const O=R._readableState;for(E("flow",O.flowing);O.flowing&&R.read()!==null;);}J.prototype.wrap=function(R){let O=!1;R.on("data",ae=>{!this.push(ae)&&R.pause&&(O=!0,R.pause())}),R.on("end",()=>{this.push(null)}),R.on("error",ae=>{S(this,ae)}),R.on("close",()=>{this.destroy()}),R.on("destroy",()=>{this.destroy()}),this._read=()=>{O&&R.resume&&(O=!1,R.resume())};const te=o(R);for(let ae=1;ae<te.length;ae++){const de=te[ae];this[de]===void 0&&typeof R[de]=="function"&&(this[de]=R[de].bind(R))}return this},J.prototype[x]=function(){return fr(this)},J.prototype.iterator=function(R){return R!==void 0&&p(R,"options"),fr(this,R)};function fr(R,O){typeof R.read!="function"&&(R=J.wrap(R,{objectMode:!0}));const te=cr(R,O);return te.stream=R,te}async function*cr(R,O){let te=M;function ae(ke){this===R?(te(),te=M):te=ke}R.on("readable",ae);let de;const Oe=c(R,{writable:!1},ke=>{de=ke?a(de,ke):null,te(),te=M});try{for(;;){const ke=R.destroyed?null:R.read();if(ke!==null)yield ke;else{if(de)throw de;if(de===null)return;await new h(ae)}}}catch(ke){throw de=a(de,ke),de}finally{(de||O?.destroyOnReturn!==!1)&&(de===void 0||R._readableState.autoDestroy)?F.destroyer(R,null):(R.off("readable",ae),Oe())}}s(J.prototype,{readable:{__proto__:null,get(){const R=this._readableState;return!!R&&R.readable!==!1&&!R.destroyed&&!R.errorEmitted&&!R.endEmitted},set(R){this._readableState&&(this._readableState.readable=!!R)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(R){this._readableState&&(this._readableState.flowing=R)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(R){this._readableState&&(this._readableState.destroyed=R)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(re.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[A]!==!1},set(R){this[A]=!!R}}}),J._fromList=gt;function gt(R,O){if(O.length===0)return null;let te;return O.objectMode?te=O.buffer.shift():!R||R>=O.length?(O.decoder?te=O.buffer.join(""):O.buffer.length===1?te=O.buffer.first():te=O.buffer.concat(O.length),O.buffer.clear()):te=O.buffer.consume(R,O.decoder),te}function Ft(R){const O=R._readableState;E("endReadable",O.endEmitted),O.endEmitted||(O.ended=!0,r.nextTick(ot,O,R))}function ot(R,O){if(E("endReadableNT",R.endEmitted,R.length),!R.errored&&!R.closeEmitted&&!R.endEmitted&&R.length===0){if(R.endEmitted=!0,O.emit("end"),O.writable&&O.allowHalfOpen===!1)r.nextTick(Yr,O);else if(R.autoDestroy){const te=O._writableState;(!te||te.autoDestroy&&(te.finished||te.writable===!1))&&O.destroy()}}}function Yr(R){R.writable&&!R.writableEnded&&!R.destroyed&&R.end()}J.from=function(R,O){return m(J,R,O)};let $t;function dr(){return $t===void 0&&($t={}),$t}return J.fromWeb=function(R,O){return dr().newStreamReadableFromReadableStream(R,O)},J.toWeb=function(R,O){return dr().newReadableStreamFromStreamReadable(R,O)},J.wrap=function(R,O){var te,ae;return new J({objectMode:(te=(ae=R.readableObjectMode)!==null&&ae!==void 0?ae:R.objectMode)!==null&&te!==void 0?te:!0,...O,destroy(de,Oe){F.destroyer(R,de),Oe(de)}}).wrap(R)},An}var Rn,Gi;function oi(){if(Gi)return Rn;Gi=1;const r=Lt(),{ArrayPrototypeSlice:e,Error:t,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:i,ObjectDefineProperties:s,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:l,Symbol:h,SymbolHasInstance:w}=Ie();Rn=p,p.WritableState=d;const{EventEmitter:N}=Dr(),x=ii().Stream,{Buffer:v}=Pt(),k=jt(),{addAbortSignal:U}=kr(),{getHighWaterMark:I,getDefaultHighWaterMark:_}=Ur(),{ERR_INVALID_ARG_TYPE:u,ERR_METHOD_NOT_IMPLEMENTED:c,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:H,ERR_STREAM_DESTROYED:F,ERR_STREAM_ALREADY_FINISHED:Y,ERR_STREAM_NULL_VALUES:X,ERR_STREAM_WRITE_AFTER_END:a,ERR_UNKNOWN_ENCODING:y}=De().codes,{errorOrDestroy:f}=k;o(p.prototype,x.prototype),o(p,x);function g(){}const b=h("kOnFinished");function d(L,B,$){typeof $!="boolean"&&($=B instanceof dt()),this.objectMode=!!(L&&L.objectMode),$&&(this.objectMode=this.objectMode||!!(L&&L.writableObjectMode)),this.highWaterMark=L?I(this,L,"writableHighWaterMark",$):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const ne=!!(L&&L.decodeStrings===!1);this.decodeStrings=!ne,this.defaultEncoding=L&&L.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=S.bind(void 0,B),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,C(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!L||L.emitClose!==!1,this.autoDestroy=!L||L.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[b]=[]}function C(L){L.buffered=[],L.bufferedIndex=0,L.allBuffers=!0,L.allNoop=!0}d.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},i(d.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function p(L){const B=this instanceof dt();if(!B&&!n(p,this))return new p(L);this._writableState=new d(L,this,B),L&&(typeof L.write=="function"&&(this._write=L.write),typeof L.writev=="function"&&(this._writev=L.writev),typeof L.destroy=="function"&&(this._destroy=L.destroy),typeof L.final=="function"&&(this._final=L.final),typeof L.construct=="function"&&(this._construct=L.construct),L.signal&&U(L.signal,this)),x.call(this,L),k.construct(this,()=>{const $=this._writableState;$.writing||ee(this,$),G(this,$)})}i(p,w,{__proto__:null,value:function(L){return n(this,L)?!0:this!==p?!1:L&&L._writableState instanceof d}}),p.prototype.pipe=function(){f(this,new H)};function A(L,B,$,ne){const se=L._writableState;if(typeof $=="function")ne=$,$=se.defaultEncoding;else{if(!$)$=se.defaultEncoding;else if($!=="buffer"&&!v.isEncoding($))throw new y($);typeof ne!="function"&&(ne=g)}if(B===null)throw new X;if(!se.objectMode)if(typeof B=="string")se.decodeStrings!==!1&&(B=v.from(B,$),$="buffer");else if(B instanceof v)$="buffer";else if(x._isUint8Array(B))B=x._uint8ArrayToBuffer(B),$="buffer";else throw new u("chunk",["string","Buffer","Uint8Array"],B);let ie;return se.ending?ie=new a:se.destroyed&&(ie=new F("write")),ie?(r.nextTick(ne,ie),f(L,ie,!0),ie):(se.pendingcb++,P(L,se,B,$,ne))}p.prototype.write=function(L,B,$){return A(this,L,B,$)===!0},p.prototype.cork=function(){this._writableState.corked++},p.prototype.uncork=function(){const L=this._writableState;L.corked&&(L.corked--,L.writing||ee(this,L))},p.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=l(B)),!v.isEncoding(B))throw new y(B);return this._writableState.defaultEncoding=B,this};function P(L,B,$,ne,se){const ie=B.objectMode?1:$.length;B.length+=ie;const D=B.length<B.highWaterMark;return D||(B.needDrain=!0),B.writing||B.corked||B.errored||!B.constructed?(B.buffered.push({chunk:$,encoding:ne,callback:se}),B.allBuffers&&ne!=="buffer"&&(B.allBuffers=!1),B.allNoop&&se!==g&&(B.allNoop=!1)):(B.writelen=ie,B.writecb=se,B.writing=!0,B.sync=!0,L._write($,ne,B.onwrite),B.sync=!1),D&&!B.errored&&!B.destroyed}function m(L,B,$,ne,se,ie,D){B.writelen=ne,B.writecb=D,B.writing=!0,B.sync=!0,B.destroyed?B.onwrite(new F("write")):$?L._writev(se,B.onwrite):L._write(se,ie,B.onwrite),B.sync=!1}function M(L,B,$,ne){--B.pendingcb,ne($),W(B),f(L,$)}function S(L,B){const $=L._writableState,ne=$.sync,se=$.writecb;if(typeof se!="function"){f(L,new E);return}$.writing=!1,$.writecb=null,$.length-=$.writelen,$.writelen=0,B?(B.stack,$.errored||($.errored=B),L._readableState&&!L._readableState.errored&&(L._readableState.errored=B),ne?r.nextTick(M,L,$,B,se):M(L,$,B,se)):($.buffered.length>$.bufferedIndex&&ee(L,$),ne?$.afterWriteTickInfo!==null&&$.afterWriteTickInfo.cb===se?$.afterWriteTickInfo.count++:($.afterWriteTickInfo={count:1,cb:se,stream:L,state:$},r.nextTick(j,$.afterWriteTickInfo)):K(L,$,1,se))}function j({stream:L,state:B,count:$,cb:ne}){return B.afterWriteTickInfo=null,K(L,B,$,ne)}function K(L,B,$,ne){for(!B.ending&&!L.destroyed&&B.length===0&&B.needDrain&&(B.needDrain=!1,L.emit("drain"));$-- >0;)B.pendingcb--,ne();B.destroyed&&W(B),G(L,B)}function W(L){if(L.writing)return;for(let se=L.bufferedIndex;se<L.buffered.length;++se){var B;const{chunk:ie,callback:D}=L.buffered[se],Z=L.objectMode?1:ie.length;L.length-=Z,D((B=L.errored)!==null&&B!==void 0?B:new F("write"))}const $=L[b].splice(0);for(let se=0;se<$.length;se++){var ne;$[se]((ne=L.errored)!==null&&ne!==void 0?ne:new F("end"))}C(L)}function ee(L,B){if(B.corked||B.bufferProcessing||B.destroyed||!B.constructed)return;const{buffered:$,bufferedIndex:ne,objectMode:se}=B,ie=$.length-ne;if(!ie)return;let D=ne;if(B.bufferProcessing=!0,ie>1&&L._writev){B.pendingcb-=ie-1;const Z=B.allNoop?g:J=>{for(let we=D;we<$.length;++we)$[we].callback(J)},re=B.allNoop&&D===0?$:e($,D);re.allBuffers=B.allBuffers,m(L,B,!0,B.length,re,"",Z),C(B)}else{do{const{chunk:Z,encoding:re,callback:J}=$[D];$[D++]=null;const we=se?1:Z.length;m(L,B,!1,we,Z,re,J)}while(D<$.length&&!B.writing);D===$.length?C(B):D>256?($.splice(0,D),B.bufferedIndex=0):B.bufferedIndex=D}B.bufferProcessing=!1}p.prototype._write=function(L,B,$){if(this._writev)this._writev([{chunk:L,encoding:B}],$);else throw new c("_write()")},p.prototype._writev=null,p.prototype.end=function(L,B,$){const ne=this._writableState;typeof L=="function"?($=L,L=null,B=null):typeof B=="function"&&($=B,B=null);let se;if(L!=null){const ie=A(this,L,B);ie instanceof t&&(se=ie)}return ne.corked&&(ne.corked=1,this.uncork()),se||(!ne.errored&&!ne.ending?(ne.ending=!0,G(this,ne,!0),ne.ended=!0):ne.finished?se=new Y("end"):ne.destroyed&&(se=new F("end"))),typeof $=="function"&&(se||ne.finished?r.nextTick($,se):ne[b].push($)),this};function Q(L){return L.ending&&!L.destroyed&&L.constructed&&L.length===0&&!L.errored&&L.buffered.length===0&&!L.finished&&!L.writing&&!L.errorEmitted&&!L.closeEmitted}function le(L,B){let $=!1;function ne(se){if($){f(L,se??E());return}if($=!0,B.pendingcb--,se){const ie=B[b].splice(0);for(let D=0;D<ie.length;D++)ie[D](se);f(L,se,B.sync)}else Q(B)&&(B.prefinished=!0,L.emit("prefinish"),B.pendingcb++,r.nextTick(V,L,B))}B.sync=!0,B.pendingcb++;try{L._final(ne)}catch(se){ne(se)}B.sync=!1}function ue(L,B){!B.prefinished&&!B.finalCalled&&(typeof L._final=="function"&&!B.destroyed?(B.finalCalled=!0,le(L,B)):(B.prefinished=!0,L.emit("prefinish")))}function G(L,B,$){Q(B)&&(ue(L,B),B.pendingcb===0&&($?(B.pendingcb++,r.nextTick((ne,se)=>{Q(se)?V(ne,se):se.pendingcb--},L,B)):Q(B)&&(B.pendingcb++,V(L,B))))}function V(L,B){B.pendingcb--,B.finished=!0;const $=B[b].splice(0);for(let ne=0;ne<$.length;ne++)$[ne]();if(L.emit("finish"),B.autoDestroy){const ne=L._readableState;(!ne||ne.autoDestroy&&(ne.endEmitted||ne.readable===!1))&&L.destroy()}}s(p.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(L){this._writableState&&(this._writableState.destroyed=L)}},writable:{__proto__:null,get(){const L=this._writableState;return!!L&&L.writable!==!1&&!L.destroyed&&!L.errored&&!L.ending&&!L.ended},set(L){this._writableState&&(this._writableState.writable=!!L)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const L=this._writableState;return L?!L.destroyed&&!L.ending&&L.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const oe=k.destroy;p.prototype.destroy=function(L,B){const $=this._writableState;return!$.destroyed&&($.bufferedIndex<$.buffered.length||$[b].length)&&r.nextTick(W,$),oe.call(this,L,B),this},p.prototype._undestroy=k.undestroy,p.prototype._destroy=function(L,B){B(L)},p.prototype[N.captureRejectionSymbol]=function(L){this.destroy(L)};let ce;function fe(){return ce===void 0&&(ce={}),ce}return p.fromWeb=function(L,B){return fe().newStreamWritableFromWritableStream(L,B)},p.toWeb=function(L){return fe().newWritableStreamFromStreamWritable(L)},Rn}var In,Vi;function ca(){if(Vi)return In;Vi=1;const r=Lt(),e=Pt(),{isReadable:t,isWritable:n,isIterable:i,isNodeStream:s,isReadableNodeStream:o,isWritableNodeStream:l,isDuplexNodeStream:h,isReadableStream:w,isWritableStream:N}=ht(),x=mt(),{AbortError:v,codes:{ERR_INVALID_ARG_TYPE:k,ERR_INVALID_RETURN_VALUE:U}}=De(),{destroyer:I}=jt(),_=dt(),u=qr(),c=oi(),{createDeferredPromise:E}=We(),H=Yo(),F=globalThis.Blob||e.Blob,Y=typeof F<"u"?function(d){return d instanceof F}:function(d){return!1},X=globalThis.AbortController||rr().AbortController,{FunctionPrototypeCall:a}=Ie();class y extends _{constructor(d){super(d),d?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}In=function b(d,C){if(h(d))return d;if(o(d))return g({readable:d});if(l(d))return g({writable:d});if(s(d))return g({writable:!1,readable:!1});if(w(d))return g({readable:u.fromWeb(d)});if(N(d))return g({writable:c.fromWeb(d)});if(typeof d=="function"){const{value:A,write:P,final:m,destroy:M}=f(d);if(i(A))return H(y,A,{objectMode:!0,write:P,final:m,destroy:M});const S=A?.then;if(typeof S=="function"){let j;const K=a(S,A,W=>{if(W!=null)throw new U("nully","body",W)},W=>{I(j,W)});return j=new y({objectMode:!0,readable:!1,write:P,final(W){m(async()=>{try{await K,r.nextTick(W,null)}catch(ee){r.nextTick(W,ee)}})},destroy:M})}throw new U("Iterable, AsyncIterable or AsyncFunction",C,A)}if(Y(d))return b(d.arrayBuffer());if(i(d))return H(y,d,{objectMode:!0,writable:!1});if(w(d?.readable)&&N(d?.writable))return y.fromWeb(d);if(typeof d?.writable=="object"||typeof d?.readable=="object"){const A=d!=null&&d.readable?o(d?.readable)?d?.readable:b(d.readable):void 0,P=d!=null&&d.writable?l(d?.writable)?d?.writable:b(d.writable):void 0;return g({readable:A,writable:P})}const p=d?.then;if(typeof p=="function"){let A;return a(p,d,P=>{P!=null&&A.push(P),A.push(null)},P=>{I(A,P)}),A=new y({objectMode:!0,writable:!1,read(){}})}throw new k(C,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],d)};function f(b){let{promise:d,resolve:C}=E();const p=new X,A=p.signal;return{value:b((async function*(){for(;;){const m=d;d=null;const{chunk:M,done:S,cb:j}=await m;if(r.nextTick(j),S)return;if(A.aborted)throw new v(void 0,{cause:A.reason});({promise:d,resolve:C}=E()),yield M}})(),{signal:A}),write(m,M,S){const j=C;C=null,j({chunk:m,done:!1,cb:S})},final(m){const M=C;C=null,M({done:!0,cb:m})},destroy(m,M){p.abort(),M(m)}}}function g(b){const d=b.readable&&typeof b.readable.read!="function"?u.wrap(b.readable):b.readable,C=b.writable;let p=!!t(d),A=!!n(C),P,m,M,S,j;function K(W){const ee=S;S=null,ee?ee(W):W&&j.destroy(W)}return j=new y({readableObjectMode:!!(d!=null&&d.readableObjectMode),writableObjectMode:!!(C!=null&&C.writableObjectMode),readable:p,writable:A}),A&&(x(C,W=>{A=!1,W&&I(d,W),K(W)}),j._write=function(W,ee,Q){C.write(W,ee)?Q():P=Q},j._final=function(W){C.end(),m=W},C.on("drain",function(){if(P){const W=P;P=null,W()}}),C.on("finish",function(){if(m){const W=m;m=null,W()}})),p&&(x(d,W=>{p=!1,W&&I(d,W),K(W)}),d.on("readable",function(){if(M){const W=M;M=null,W()}}),d.on("end",function(){j.push(null)}),j._read=function(){for(;;){const W=d.read();if(W===null){M=j._read;return}if(!j.push(W))return}}),j._destroy=function(W,ee){!W&&S!==null&&(W=new v),M=null,P=null,m=null,S===null?ee(W):(S=ee,I(C,W),I(d,W))},j}return In}var Tn,Ki;function dt(){if(Ki)return Tn;Ki=1;const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:t,ObjectSetPrototypeOf:n}=Ie();Tn=o;const i=qr(),s=oi();n(o.prototype,i.prototype),n(o,i);{const N=t(s.prototype);for(let x=0;x<N.length;x++){const v=N[x];o.prototype[v]||(o.prototype[v]=s.prototype[v])}}function o(N){if(!(this instanceof o))return new o(N);i.call(this,N),s.call(this,N),N?(this.allowHalfOpen=N.allowHalfOpen!==!1,N.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),N.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r(o.prototype,{writable:{__proto__:null,...e(s.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(s.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(s.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(s.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(s.prototype,"writableLength")},writableFinished:{__proto__:null,...e(s.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(s.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(s.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(s.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(N){this._readableState&&this._writableState&&(this._readableState.destroyed=N,this._writableState.destroyed=N)}}});let l;function h(){return l===void 0&&(l={}),l}o.fromWeb=function(N,x){return h().newStreamDuplexFromReadableWritablePair(N,x)},o.toWeb=function(N){return h().newReadableWritablePairFromDuplex(N)};let w;return o.from=function(N){return w||(w=ca()),w(N,"body")},Tn}var xn,Yi;function Jo(){if(Yi)return xn;Yi=1;const{ObjectSetPrototypeOf:r,Symbol:e}=Ie();xn=o;const{ERR_METHOD_NOT_IMPLEMENTED:t}=De().codes,n=dt(),{getHighWaterMark:i}=Ur();r(o.prototype,n.prototype),r(o,n);const s=e("kCallback");function o(w){if(!(this instanceof o))return new o(w);const N=w?i(this,w,"readableHighWaterMark",!0):null;N===0&&(w={...w,highWaterMark:null,readableHighWaterMark:N,writableHighWaterMark:w.writableHighWaterMark||0}),n.call(this,w),this._readableState.sync=!1,this[s]=null,w&&(typeof w.transform=="function"&&(this._transform=w.transform),typeof w.flush=="function"&&(this._flush=w.flush)),this.on("prefinish",h)}function l(w){typeof this._flush=="function"&&!this.destroyed?this._flush((N,x)=>{if(N){w?w(N):this.destroy(N);return}x!=null&&this.push(x),this.push(null),w&&w()}):(this.push(null),w&&w())}function h(){this._final!==l&&l.call(this)}return o.prototype._final=l,o.prototype._transform=function(w,N,x){throw new t("_transform()")},o.prototype._write=function(w,N,x){const v=this._readableState,k=this._writableState,U=v.length;this._transform(w,N,(I,_)=>{if(I){x(I);return}_!=null&&this.push(_),k.ended||U===v.length||v.length<v.highWaterMark?x():this[s]=x})},o.prototype._read=function(){if(this[s]){const w=this[s];this[s]=null,w()}},xn}var On,Ji;function Zo(){if(Ji)return On;Ji=1;const{ObjectSetPrototypeOf:r}=Ie();On=t;const e=Jo();r(t.prototype,e.prototype),r(t,e);function t(n){if(!(this instanceof t))return new t(n);e.call(this,n)}return t.prototype._transform=function(n,i,s){s(null,n)},On}var Nn,Zi;function si(){if(Zi)return Nn;Zi=1;const r=Lt(),{ArrayIsArray:e,Promise:t,SymbolAsyncIterator:n,SymbolDispose:i}=Ie(),s=mt(),{once:o}=We(),l=jt(),h=dt(),{aggregateTwoErrors:w,codes:{ERR_INVALID_ARG_TYPE:N,ERR_INVALID_RETURN_VALUE:x,ERR_MISSING_ARGS:v,ERR_STREAM_DESTROYED:k,ERR_STREAM_PREMATURE_CLOSE:U},AbortError:I}=De(),{validateFunction:_,validateAbortSignal:u}=ir(),{isIterable:c,isReadable:E,isReadableNodeStream:H,isNodeStream:F,isTransformStream:Y,isWebStream:X,isReadableStream:a,isReadableFinished:y}=ht(),f=globalThis.AbortController||rr().AbortController;let g,b,d;function C(W,ee,Q){let le=!1;W.on("close",()=>{le=!0});const ue=s(W,{readable:ee,writable:Q},G=>{le=!G});return{destroy:G=>{le||(le=!0,l.destroyer(W,G||new k("pipe")))},cleanup:ue}}function p(W){return _(W[W.length-1],"streams[stream.length - 1]"),W.pop()}function A(W){if(c(W))return W;if(H(W))return P(W);throw new N("val",["Readable","Iterable","AsyncIterable"],W)}async function*P(W){b||(b=qr()),yield*b.prototype[n].call(W)}async function m(W,ee,Q,{end:le}){let ue,G=null;const V=fe=>{if(fe&&(ue=fe),G){const L=G;G=null,L()}},oe=()=>new t((fe,L)=>{ue?L(ue):G=()=>{ue?L(ue):fe()}});ee.on("drain",V);const ce=s(ee,{readable:!1},V);try{ee.writableNeedDrain&&await oe();for await(const fe of W)ee.write(fe)||await oe();le&&(ee.end(),await oe()),Q()}catch(fe){Q(ue!==fe?w(ue,fe):fe)}finally{ce(),ee.off("drain",V)}}async function M(W,ee,Q,{end:le}){Y(ee)&&(ee=ee.writable);const ue=ee.getWriter();try{for await(const G of W)await ue.ready,ue.write(G).catch(()=>{});await ue.ready,le&&await ue.close(),Q()}catch(G){try{await ue.abort(G),Q(G)}catch(V){Q(V)}}}function S(...W){return j(W,o(p(W)))}function j(W,ee,Q){if(W.length===1&&e(W[0])&&(W=W[0]),W.length<2)throw new v("streams");const le=new f,ue=le.signal,G=Q?.signal,V=[];u(G,"options.signal");function oe(){se(new I)}d=d||We().addAbortListener;let ce;G&&(ce=d(G,oe));let fe,L;const B=[];let $=0;function ne(re){se(re,--$===0)}function se(re,J){var we;if(re&&(!fe||fe.code==="ERR_STREAM_PREMATURE_CLOSE")&&(fe=re),!(!fe&&!J)){for(;B.length;)B.shift()(fe);(we=ce)===null||we===void 0||we[i](),le.abort(),J&&(fe||V.forEach(Pe=>Pe()),r.nextTick(ee,fe,L))}}let ie;for(let re=0;re<W.length;re++){const J=W[re],we=re<W.length-1,Pe=re>0,ye=we||Q?.end!==!1,Be=re===W.length-1;if(F(J)){let xe=function(Le){Le&&Le.name!=="AbortError"&&Le.code!=="ERR_STREAM_PREMATURE_CLOSE"&&ne(Le)};if(ye){const{destroy:Le,cleanup:Ye}=C(J,we,Pe);B.push(Le),E(J)&&Be&&V.push(Ye)}J.on("error",xe),E(J)&&Be&&V.push(()=>{J.removeListener("error",xe)})}if(re===0)if(typeof J=="function"){if(ie=J({signal:ue}),!c(ie))throw new x("Iterable, AsyncIterable or Stream","source",ie)}else c(J)||H(J)||Y(J)?ie=J:ie=h.from(J);else if(typeof J=="function"){if(Y(ie)){var D;ie=A((D=ie)===null||D===void 0?void 0:D.readable)}else ie=A(ie);if(ie=J(ie,{signal:ue}),we){if(!c(ie,!0))throw new x("AsyncIterable",`transform[${re-1}]`,ie)}else{var Z;g||(g=Zo());const xe=new g({objectMode:!0}),Le=(Z=ie)===null||Z===void 0?void 0:Z.then;if(typeof Le=="function")$++,Le.call(ie,Me=>{L=Me,Me!=null&&xe.write(Me),ye&&xe.end(),r.nextTick(ne)},Me=>{xe.destroy(Me),r.nextTick(ne,Me)});else if(c(ie,!0))$++,m(ie,xe,ne,{end:ye});else if(a(ie)||Y(ie)){const Me=ie.readable||ie;$++,m(Me,xe,ne,{end:ye})}else throw new x("AsyncIterable or Promise","destination",ie);ie=xe;const{destroy:Ye,cleanup:Et}=C(ie,!1,!0);B.push(Ye),Be&&V.push(Et)}}else if(F(J)){if(H(ie)){$+=2;const xe=K(ie,J,ne,{end:ye});E(J)&&Be&&V.push(xe)}else if(Y(ie)||a(ie)){const xe=ie.readable||ie;$++,m(xe,J,ne,{end:ye})}else if(c(ie))$++,m(ie,J,ne,{end:ye});else throw new N("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ie);ie=J}else if(X(J)){if(H(ie))$++,M(A(ie),J,ne,{end:ye});else if(a(ie)||c(ie))$++,M(ie,J,ne,{end:ye});else if(Y(ie))$++,M(ie.readable,J,ne,{end:ye});else throw new N("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ie);ie=J}else ie=h.from(J)}return(ue!=null&&ue.aborted||G!=null&&G.aborted)&&r.nextTick(oe),ie}function K(W,ee,Q,{end:le}){let ue=!1;if(ee.on("close",()=>{ue||Q(new U)}),W.pipe(ee,{end:!1}),le){let G=function(){ue=!0,ee.end()};y(W)?r.nextTick(G):W.once("end",G)}else Q();return s(W,{readable:!0,writable:!1},G=>{const V=W._readableState;G&&G.code==="ERR_STREAM_PREMATURE_CLOSE"&&V&&V.ended&&!V.errored&&!V.errorEmitted?W.once("end",Q).once("error",Q):Q(G)}),s(ee,{readable:!1,writable:!0},Q)}return Nn={pipelineImpl:j,pipeline:S},Nn}var Cn,Xi;function Xo(){if(Xi)return Cn;Xi=1;const{pipeline:r}=si(),e=dt(),{destroyer:t}=jt(),{isNodeStream:n,isReadable:i,isWritable:s,isWebStream:o,isTransformStream:l,isWritableStream:h,isReadableStream:w}=ht(),{AbortError:N,codes:{ERR_INVALID_ARG_VALUE:x,ERR_MISSING_ARGS:v}}=De(),k=mt();return Cn=function(...I){if(I.length===0)throw new v("streams");if(I.length===1)return e.from(I[0]);const _=[...I];if(typeof I[0]=="function"&&(I[0]=e.from(I[0])),typeof I[I.length-1]=="function"){const g=I.length-1;I[g]=e.from(I[g])}for(let g=0;g<I.length;++g)if(!(!n(I[g])&&!o(I[g]))){if(g<I.length-1&&!(i(I[g])||w(I[g])||l(I[g])))throw new x(`streams[${g}]`,_[g],"must be readable");if(g>0&&!(s(I[g])||h(I[g])||l(I[g])))throw new x(`streams[${g}]`,_[g],"must be writable")}let u,c,E,H,F;function Y(g){const b=H;H=null,b?b(g):g?F.destroy(g):!f&&!y&&F.destroy()}const X=I[0],a=r(I,Y),y=!!(s(X)||h(X)||l(X)),f=!!(i(a)||w(a)||l(a));if(F=new e({writableObjectMode:!!(X!=null&&X.writableObjectMode),readableObjectMode:!!(a!=null&&a.readableObjectMode),writable:y,readable:f}),y){if(n(X))F._write=function(b,d,C){X.write(b,d)?C():u=C},F._final=function(b){X.end(),c=b},X.on("drain",function(){if(u){const b=u;u=null,b()}});else if(o(X)){const d=(l(X)?X.writable:X).getWriter();F._write=async function(C,p,A){try{await d.ready,d.write(C).catch(()=>{}),A()}catch(P){A(P)}},F._final=async function(C){try{await d.ready,d.close().catch(()=>{}),c=C}catch(p){C(p)}}}const g=l(a)?a.readable:a;k(g,()=>{if(c){const b=c;c=null,b()}})}if(f){if(n(a))a.on("readable",function(){if(E){const g=E;E=null,g()}}),a.on("end",function(){F.push(null)}),F._read=function(){for(;;){const g=a.read();if(g===null){E=F._read;return}if(!F.push(g))return}};else if(o(a)){const b=(l(a)?a.readable:a).getReader();F._read=async function(){for(;;)try{const{value:d,done:C}=await b.read();if(!F.push(d))return;if(C){F.push(null);return}}catch{return}}}}return F._destroy=function(g,b){!g&&H!==null&&(g=new N),E=null,u=null,c=null,H===null?b(g):(H=b,n(a)&&t(a,g))},F},Cn}var Qi;function da(){if(Qi)return Er;Qi=1;const r=globalThis.AbortController||rr().AbortController,{codes:{ERR_INVALID_ARG_VALUE:e,ERR_INVALID_ARG_TYPE:t,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:i},AbortError:s}=De(),{validateAbortSignal:o,validateInteger:l,validateObject:h}=ir(),w=Ie().Symbol("kWeak"),N=Ie().Symbol("kResistStopPropagation"),{finished:x}=mt(),v=Xo(),{addAbortSignalNoValidate:k}=kr(),{isWritable:U,isNodeStream:I}=ht(),{deprecate:_}=We(),{ArrayPrototypePush:u,Boolean:c,MathFloor:E,Number:H,NumberIsNaN:F,Promise:Y,PromiseReject:X,PromiseResolve:a,PromisePrototypeThen:y,Symbol:f}=Ie(),g=f("kEmpty"),b=f("kEof");function d(G,V){if(V!=null&&h(V,"options"),V?.signal!=null&&o(V.signal,"options.signal"),I(G)&&!U(G))throw new e("stream",G,"must be writable");const oe=v(this,G);return V!=null&&V.signal&&k(V.signal,oe),oe}function C(G,V){if(typeof G!="function")throw new t("fn",["Function","AsyncFunction"],G);V!=null&&h(V,"options"),V?.signal!=null&&o(V.signal,"options.signal");let oe=1;V?.concurrency!=null&&(oe=E(V.concurrency));let ce=oe-1;return V?.highWaterMark!=null&&(ce=E(V.highWaterMark)),l(oe,"options.concurrency",1),l(ce,"options.highWaterMark",0),ce+=oe,(async function*(){const L=We().AbortSignalAny([V?.signal].filter(c)),B=this,$=[],ne={signal:L};let se,ie,D=!1,Z=0;function re(){D=!0,J()}function J(){Z-=1,we()}function we(){ie&&!D&&Z<oe&&$.length<ce&&(ie(),ie=null)}async function Pe(){try{for await(let ye of B){if(D)return;if(L.aborted)throw new s;try{if(ye=G(ye,ne),ye===g)continue;ye=a(ye)}catch(Be){ye=X(Be)}Z+=1,y(ye,J,re),$.push(ye),se&&(se(),se=null),!D&&($.length>=ce||Z>=oe)&&await new Y(Be=>{ie=Be})}$.push(b)}catch(ye){const Be=X(ye);y(Be,J,re),$.push(Be)}finally{D=!0,se&&(se(),se=null)}}Pe();try{for(;;){for(;$.length>0;){const ye=await $[0];if(ye===b)return;if(L.aborted)throw new s;ye!==g&&(yield ye),$.shift(),we()}await new Y(ye=>{se=ye})}}finally{D=!0,ie&&(ie(),ie=null)}}).call(this)}function p(G=void 0){return G!=null&&h(G,"options"),G?.signal!=null&&o(G.signal,"options.signal"),(async function*(){let oe=0;for await(const fe of this){var ce;if(G!=null&&(ce=G.signal)!==null&&ce!==void 0&&ce.aborted)throw new s({cause:G.signal.reason});yield[oe++,fe]}}).call(this)}async function A(G,V=void 0){for await(const oe of S.call(this,G,V))return!0;return!1}async function P(G,V=void 0){if(typeof G!="function")throw new t("fn",["Function","AsyncFunction"],G);return!await A.call(this,async(...oe)=>!await G(...oe),V)}async function m(G,V){for await(const oe of S.call(this,G,V))return oe}async function M(G,V){if(typeof G!="function")throw new t("fn",["Function","AsyncFunction"],G);async function oe(ce,fe){return await G(ce,fe),g}for await(const ce of C.call(this,oe,V));}function S(G,V){if(typeof G!="function")throw new t("fn",["Function","AsyncFunction"],G);async function oe(ce,fe){return await G(ce,fe)?ce:g}return C.call(this,oe,V)}class j extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function K(G,V,oe){var ce;if(typeof G!="function")throw new t("reducer",["Function","AsyncFunction"],G);oe!=null&&h(oe,"options"),oe?.signal!=null&&o(oe.signal,"options.signal");let fe=arguments.length>1;if(oe!=null&&(ce=oe.signal)!==null&&ce!==void 0&&ce.aborted){const se=new s(void 0,{cause:oe.signal.reason});throw this.once("error",()=>{}),await x(this.destroy(se)),se}const L=new r,B=L.signal;if(oe!=null&&oe.signal){const se={once:!0,[w]:this,[N]:!0};oe.signal.addEventListener("abort",()=>L.abort(),se)}let $=!1;try{for await(const se of this){var ne;if($=!0,oe!=null&&(ne=oe.signal)!==null&&ne!==void 0&&ne.aborted)throw new s;fe?V=await G(V,se,{signal:B}):(V=se,fe=!0)}if(!$&&!fe)throw new j}finally{L.abort()}return V}async function W(G){G!=null&&h(G,"options"),G?.signal!=null&&o(G.signal,"options.signal");const V=[];for await(const ce of this){var oe;if(G!=null&&(oe=G.signal)!==null&&oe!==void 0&&oe.aborted)throw new s(void 0,{cause:G.signal.reason});u(V,ce)}return V}function ee(G,V){const oe=C.call(this,G,V);return(async function*(){for await(const fe of oe)yield*fe}).call(this)}function Q(G){if(G=H(G),F(G))return 0;if(G<0)throw new i("number",">= 0",G);return G}function le(G,V=void 0){return V!=null&&h(V,"options"),V?.signal!=null&&o(V.signal,"options.signal"),G=Q(G),(async function*(){var ce;if(V!=null&&(ce=V.signal)!==null&&ce!==void 0&&ce.aborted)throw new s;for await(const L of this){var fe;if(V!=null&&(fe=V.signal)!==null&&fe!==void 0&&fe.aborted)throw new s;G--<=0&&(yield L)}}).call(this)}function ue(G,V=void 0){return V!=null&&h(V,"options"),V?.signal!=null&&o(V.signal,"options.signal"),G=Q(G),(async function*(){var ce;if(V!=null&&(ce=V.signal)!==null&&ce!==void 0&&ce.aborted)throw new s;for await(const L of this){var fe;if(V!=null&&(fe=V.signal)!==null&&fe!==void 0&&fe.aborted)throw new s;if(G-- >0&&(yield L),G<=0)return}}).call(this)}return Er.streamReturningOperators={asIndexedPairs:_(p,"readable.asIndexedPairs will be removed in a future version."),drop:le,filter:S,flatMap:ee,map:C,take:ue,compose:d},Er.promiseReturningOperators={every:P,forEach:M,reduce:K,toArray:W,some:A,find:m},Er}var Pn,eo;function Qo(){if(eo)return Pn;eo=1;const{ArrayPrototypePop:r,Promise:e}=Ie(),{isIterable:t,isNodeStream:n,isWebStream:i}=ht(),{pipelineImpl:s}=si(),{finished:o}=mt();es();function l(...h){return new e((w,N)=>{let x,v;const k=h[h.length-1];if(k&&typeof k=="object"&&!n(k)&&!t(k)&&!i(k)){const U=r(h);x=U.signal,v=U.end}s(h,(U,I)=>{U?N(U):w(I)},{signal:x,end:v})})}return Pn={finished:o,pipeline:l},Pn}var to;function es(){if(to)return fn.exports;to=1;const{Buffer:r}=Pt(),{ObjectDefineProperty:e,ObjectKeys:t,ReflectApply:n}=Ie(),{promisify:{custom:i}}=We(),{streamReturningOperators:s,promiseReturningOperators:o}=da(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:l}}=De(),h=Xo(),{setDefaultHighWaterMark:w,getDefaultHighWaterMark:N}=Ur(),{pipeline:x}=si(),{destroyer:v}=jt(),k=mt(),U=Qo(),I=ht(),_=fn.exports=ii().Stream;_.isDestroyed=I.isDestroyed,_.isDisturbed=I.isDisturbed,_.isErrored=I.isErrored,_.isReadable=I.isReadable,_.isWritable=I.isWritable,_.Readable=qr();for(const c of t(s)){let H=function(...F){if(new.target)throw l();return _.Readable.from(n(E,this,F))};const E=s[c];e(H,"name",{__proto__:null,value:E.name}),e(H,"length",{__proto__:null,value:E.length}),e(_.Readable.prototype,c,{__proto__:null,value:H,enumerable:!1,configurable:!0,writable:!0})}for(const c of t(o)){let H=function(...F){if(new.target)throw l();return n(E,this,F)};const E=o[c];e(H,"name",{__proto__:null,value:E.name}),e(H,"length",{__proto__:null,value:E.length}),e(_.Readable.prototype,c,{__proto__:null,value:H,enumerable:!1,configurable:!0,writable:!0})}_.Writable=oi(),_.Duplex=dt(),_.Transform=Jo(),_.PassThrough=Zo(),_.pipeline=x;const{addAbortSignal:u}=kr();return _.addAbortSignal=u,_.finished=k,_.destroy=v,_.compose=h,_.setDefaultHighWaterMark=w,_.getDefaultHighWaterMark=N,e(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return U}}),e(x,i,{__proto__:null,enumerable:!0,get(){return U.pipeline}}),e(k,i,{__proto__:null,enumerable:!0,get(){return U.finished}}),_.Stream=_,_._isUint8Array=function(E){return E instanceof Uint8Array},_._uint8ArrayToBuffer=function(E){return r.from(E.buffer,E.byteOffset,E.byteLength)},fn.exports}var ro;function ha(){return ro||(ro=1,(function(r){const e=es(),t=Qo(),n=e.Readable.destroy;r.exports=e.Readable,r.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,r.exports._isUint8Array=e._isUint8Array,r.exports.isDisturbed=e.isDisturbed,r.exports.isErrored=e.isErrored,r.exports.isReadable=e.isReadable,r.exports.Readable=e.Readable,r.exports.Writable=e.Writable,r.exports.Duplex=e.Duplex,r.exports.Transform=e.Transform,r.exports.PassThrough=e.PassThrough,r.exports.addAbortSignal=e.addAbortSignal,r.exports.finished=e.finished,r.exports.destroy=e.destroy,r.exports.destroy=n,r.exports.pipeline=e.pipeline,r.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return t}}),r.exports.Stream=e.Stream,r.exports.default=r.exports})(un)),un.exports}var jr=ha(),Ln,no;function ts(){if(no)return Ln;no=1,Ln=s,s.default=s,s.stable=w,s.stableStringify=w;var r="[...]",e="[Circular]",t=[],n=[];function i(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function s(v,k,U,I){typeof I>"u"&&(I=i()),l(v,"",0,[],void 0,0,I);var _;try{n.length===0?_=JSON.stringify(v,k,U):_=JSON.stringify(v,x(k),U)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;t.length!==0;){var u=t.pop();u.length===4?Object.defineProperty(u[0],u[1],u[3]):u[0][u[1]]=u[2]}}return _}function o(v,k,U,I){var _=Object.getOwnPropertyDescriptor(I,U);_.get!==void 0?_.configurable?(Object.defineProperty(I,U,{value:v}),t.push([I,U,k,_])):n.push([k,U,v]):(I[U]=v,t.push([I,U,k]))}function l(v,k,U,I,_,u,c){u+=1;var E;if(typeof v=="object"&&v!==null){for(E=0;E<I.length;E++)if(I[E]===v){o(e,v,k,_);return}if(typeof c.depthLimit<"u"&&u>c.depthLimit){o(r,v,k,_);return}if(typeof c.edgesLimit<"u"&&U+1>c.edgesLimit){o(r,v,k,_);return}if(I.push(v),Array.isArray(v))for(E=0;E<v.length;E++)l(v[E],E,E,I,v,u,c);else{var H=Object.keys(v);for(E=0;E<H.length;E++){var F=H[E];l(v[F],F,E,I,v,u,c)}}I.pop()}}function h(v,k){return v<k?-1:v>k?1:0}function w(v,k,U,I){typeof I>"u"&&(I=i());var _=N(v,"",0,[],void 0,0,I)||v,u;try{n.length===0?u=JSON.stringify(_,k,U):u=JSON.stringify(_,x(k),U)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;t.length!==0;){var c=t.pop();c.length===4?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}}return u}function N(v,k,U,I,_,u,c){u+=1;var E;if(typeof v=="object"&&v!==null){for(E=0;E<I.length;E++)if(I[E]===v){o(e,v,k,_);return}try{if(typeof v.toJSON=="function")return}catch{return}if(typeof c.depthLimit<"u"&&u>c.depthLimit){o(r,v,k,_);return}if(typeof c.edgesLimit<"u"&&U+1>c.edgesLimit){o(r,v,k,_);return}if(I.push(v),Array.isArray(v))for(E=0;E<v.length;E++)N(v[E],E,E,I,v,u,c);else{var H={},F=Object.keys(v).sort(h);for(E=0;E<F.length;E++){var Y=F[E];N(v[Y],Y,E,I,v,u,c),H[Y]=v[Y]}if(typeof _<"u")t.push([_,k,v]),_[k]=H;else return H}I.pop()}}function x(v){return v=typeof v<"u"?v:function(k,U){return U},function(k,U){if(n.length>0)for(var I=0;I<n.length;I++){var _=n[I];if(_[1]===k&&_[0]===U){U=_[2],n.splice(I,1);break}}return v.call(this,k,U)}}return Ln}var ga=ts();const pa=qt(ga);var vr={exports:{}},Mn,io;function wa(){if(io)return Mn;io=1,Mn=r;function r(e,t){if(e&&t)return r(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(i){n[i]=e[i]}),n;function n(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];var o=e.apply(this,i),l=i[i.length-1];return typeof o=="function"&&o!==l&&Object.keys(l).forEach(function(h){o[h]=l[h]}),o}}return Mn}var oo;function ai(){if(oo)return vr.exports;oo=1;var r=wa();vr.exports=r(e),vr.exports.strict=r(t),e.proto=e(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return e(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return t(this)},configurable:!0})});function e(n){var i=function(){return i.called?i.value:(i.called=!0,i.value=n.apply(this,arguments))};return i.called=!1,i}function t(n){var i=function(){if(i.called)throw new Error(i.onceError);return i.called=!0,i.value=n.apply(this,arguments)},s=n.name||"Function wrapped with `once`";return i.onceError=s+" shouldn't be called more than once",i.called=!1,i}return vr.exports}var Bn,so;function rs(){if(so)return Bn;so=1;var r=ai(),e=function(){},t=Zt.Bare?queueMicrotask:Lr.nextTick.bind(Lr),n=function(o){return o.setHeader&&typeof o.abort=="function"},i=function(o){return o.stdio&&Array.isArray(o.stdio)&&o.stdio.length===3},s=function(o,l,h){if(typeof l=="function")return s(o,null,l);l||(l={}),h=r(h||e);var w=o._writableState,N=o._readableState,x=l.readable||l.readable!==!1&&o.readable,v=l.writable||l.writable!==!1&&o.writable,k=!1,U=function(){o.writable||I()},I=function(){v=!1,x||h.call(o)},_=function(){x=!1,v||h.call(o)},u=function(Y){h.call(o,Y?new Error("exited with error code: "+Y):null)},c=function(Y){h.call(o,Y)},E=function(){t(H)},H=function(){if(!k){if(x&&!(N&&N.ended&&!N.destroyed))return h.call(o,new Error("premature close"));if(v&&!(w&&w.ended&&!w.destroyed))return h.call(o,new Error("premature close"))}},F=function(){o.req.on("finish",I)};return n(o)?(o.on("complete",I),o.on("abort",E),o.req?F():o.on("request",F)):v&&!w&&(o.on("end",U),o.on("close",U)),i(o)&&o.on("exit",u),o.on("end",_),o.on("finish",I),l.error!==!1&&o.on("error",c),o.on("close",E),function(){k=!0,o.removeListener("complete",I),o.removeListener("abort",E),o.removeListener("request",F),o.req&&o.req.removeListener("finish",I),o.removeListener("end",U),o.removeListener("close",U),o.removeListener("finish",I),o.removeListener("exit",u),o.removeListener("end",_),o.removeListener("error",c),o.removeListener("close",E)}};return Bn=s,Bn}var ba=rs();const ao=qt(ba);var ya=ai();const _a=qt(ya);var ma=null;const Ea=Object.freeze(Object.defineProperty({__proto__:null,default:ma},Symbol.toStringTag,{value:"Module"})),Sa=oa(Ea);var Dn,lo;function va(){if(lo)return Dn;lo=1;var r=ai(),e=rs(),t;try{t=Sa}catch{}var n=function(){},i=typeof Lr>"u"?!1:/^v?\.0/.test(Lr.version),s=function(v){return typeof v=="function"},o=function(v){return!i||!t?!1:(v instanceof(t.ReadStream||n)||v instanceof(t.WriteStream||n))&&s(v.close)},l=function(v){return v.setHeader&&s(v.abort)},h=function(v,k,U,I){I=r(I);var _=!1;v.on("close",function(){_=!0}),e(v,{readable:k,writable:U},function(c){if(c)return I(c);_=!0,I()});var u=!1;return function(c){if(!_&&!u){if(u=!0,o(v))return v.close(n);if(l(v))return v.abort();if(s(v.destroy))return v.destroy();I(c||new Error("stream was destroyed"))}}},w=function(v){v()},N=function(v,k){return v.pipe(k)},x=function(){var v=Array.prototype.slice.call(arguments),k=s(v[v.length-1]||n)&&v.pop()||n;if(Array.isArray(v[0])&&(v=v[0]),v.length<2)throw new Error("pump requires two streams per minimum");var U,I=v.map(function(_,u){var c=u<v.length-1,E=u>0;return h(_,c,E,function(H){U||(U=H),H&&I.forEach(w),!c&&(I.forEach(w),k(U))})});return v.reduce(N)};return Dn=x,Dn}var Aa=va();const uo=qt(Aa);function Ar(){}const fo="SYN",kn="ACK",co="BRK";class ho extends jr.Duplex{constructor(e){let{name:t,target:n,targetWindow:i=window,targetOrigin:s="*"}=e;if(super({objectMode:!0}),ge(this,"_init",void 0),ge(this,"_haveSyn",void 0),ge(this,"_name",void 0),ge(this,"_target",void 0),ge(this,"_targetWindow",void 0),ge(this,"_targetOrigin",void 0),ge(this,"_onMessage",void 0),ge(this,"_synIntervalId",void 0),!t||!n)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=t,this._target=n,this._targetWindow=i,this._targetOrigin=s,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write(co,null,Ar),this._haveSyn=!1,this._init=!1}_handShake(){this._write(fo,null,Ar),this.cork()}_onData(e){if(!this._init)e===fo?(this._haveSyn=!0,this._write(kn,null,Ar)):e===kn&&(this._init=!0,this._haveSyn||this._write(kn,null,Ar),this.uncork());else if(e===co)this._break();else try{this.push(e)}catch(t){this.emit("error",t)}}_postMessage(e){const t=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:e},t)}onMessage(e){const t=e.data;this._targetOrigin!=="*"&&e.origin!==this._targetOrigin||e.source!==this._targetWindow||typeof t!="object"||t.target!==this._name||!t.data||this._onData(t.data)}_read(){}_write(e,t,n){this._postMessage(e),n()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}const Ra={rpc:{internal:-32603}},go={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},po=Ra.rpc.internal,Ia="Unspecified error message. This is a bug, please report it.";function ns(r){return Number.isInteger(r)}function wo(r){return typeof r=="string"&&r.length>0}function bo(r){return!!r&&typeof r=="object"&&!Array.isArray(r)}function is(r){const e=r;return!(!e||!ns(e.code)||!wo(e.message)||e.stack&&!wo(e.stack))}function Ta(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ia;if(ns(r)){const t=r.toString();if(Object.hasOwn(go,t))return go[t].message}return e}const xa={code:po,message:Ta(po)};function Jn(r){try{JSON.parse(JSON.stringify(r,(e,t)=>{if(e==="__proto__"||e==="constructor")throw new Error("Not valid json");if(typeof t=="function"||typeof t=="symbol")throw new Error("Not valid json");return t}),(e,t)=>{if(!(e==="__proto__"||e==="constructor"))return t})}catch{return!1}return!0}function yo(r){return Object.getOwnPropertyNames(r).reduce((e,t)=>{const n=r[t];return Jn(n)&&(e[t]=n),e},{})}function Oa(r){return Array.isArray(r)?r.map(e=>Jn(e)?e:bo(e)?yo(e):null):bo(r)?yo(r):Jn(r)?r:null}function Na(r,e){if(r&&typeof r=="object"&&"serialize"in r&&typeof r.serialize=="function")return r.serialize();if(is(r))return r;const t=Oa(r);return Ke(Ke({},e),{},{data:{cause:t}})}function _o(r){let{fallbackError:e=xa,shouldIncludeStack:t=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!is(e))throw new Error("Must provide fallback error with integer number code and string message.");const n=Na(r,e);return t||delete n.stack,n}function mo(r,e,t){try{Reflect.apply(r,e,t)}catch(n){setTimeout(()=>{throw n})}}function Ca(r){const e=r.length,t=new Array(e);for(let n=0;n<e;n+=1)t[n]=r[n];return t}class Wr extends sa.EventEmitter{emit(e){let t=e==="error";const n=this._events;if(n!==void 0)t=t&&n.error===void 0;else if(!t)return!1;for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];if(t){let h;if(s.length>0&&([h]=s),h instanceof Error)throw h;const w=new Error(`Unhandled error.${h?` (${h.message})`:""}`);throw w.context=h,w}const l=n[e];if(l===void 0)return!1;if(typeof l=="function")mo(l,this,s);else{const h=l.length,w=Ca(l);for(let N=0;N<h;N+=1)mo(w[N],this,s)}return!0}}class Yt extends Error{constructor(e){let{code:t,message:n,data:i}=e;if(!Number.isInteger(t))throw new Error("code must be an integer");if(!n||typeof n!="string")throw new Error("message must be string");super(n),ge(this,"code",void 0),ge(this,"data",void 0),this.code=t,i!==void 0&&(this.data=i)}toString(){return pa({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const Zn=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(n,i)=>{n||i.error?e(n||i.error):!t||Array.isArray(i)?r(i):r(i.result)}};function Pa(){const r={};function e(){return!1}const t=new Wr;function n(h){const w=r[h.id];if(!w)throw new Error(`StreamMiddleware - Unknown response id "${h.id}"`);delete r[h.id],Object.assign(w.res,h),setTimeout(w.end)}function i(h){t.emit("notification",h)}function s(h,w,N){let x;try{!h.id?i(h):n(h)}catch(v){x=v}N(x)}const o=new jr.Duplex({objectMode:!0,read:e,write:s});return{events:t,middleware:(h,w,N,x)=>{o.push(h),r[h.id]={req:h,res:w,next:N,end:x}},stream:o}}function La(){return(r,e,t,n)=>{const i=r.id,s=Math.random().toString(36).slice(2);r.id=s,e.id=s,t(o=>{r.id=i,e.id=i,o()})}}class ut extends Wr{constructor(){super(),ge(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(e,t,n){const i=[];let s=null,o=!1;for(const l of n)if([s,o]=await ut._runMiddleware(e,t,l,i),o)break;return[s,o,i.reverse()]}static _runMiddleware(e,t,n,i){return new Promise(s=>{const o=h=>{const w=h||t.error;w&&(typeof w=="object"&&Object.keys(w).includes("stack")===!1&&(w.stack="Stack trace is not available."),t.error=_o(w,{shouldIncludeStack:!0,fallbackError:{message:w?.message||w?.toString(),code:w?.code||-32603,stack:w?.stack||"Stack trace is not available.",data:w?.data||w?.message||w?.toString()}})),s([w,!0])},l=h=>{t.error?o(t.error):(h&&(typeof h!="function"&&o(new Yt({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),i.push(h)),s([null,!1]))};try{n(e,t,l,o)}catch(h){o(h)}})}static async _runReturnHandlers(e){for(const t of e)await new Promise((n,i)=>{t(s=>s?i(s):n())})}static _checkForCompletion(e,t,n){if(!("result"in t)&&!("error"in t))throw new Yt({code:-32603,message:"Response has no error or result for request"});if(!n)throw new Yt({code:-32603,message:"Nothing ended request"})}push(e){this._middleware.push(e)}handle(e,t){if(t&&typeof t!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,n,i)=>{try{const[s,o,l]=await ut._runAllMiddleware(e,t,this._middleware);return o?(await ut._runReturnHandlers(l),i(s)):n(async h=>{try{await ut._runReturnHandlers(l)}catch(w){return h(w)}return h()})}catch(s){return i(s)}}}async _handleBatch(e,t){try{const n=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,n):n}catch(n){if(t)return t(n);throw n}}_promiseHandle(e){return new Promise((t,n)=>{this._handle(e,(i,s)=>{i&&s===void 0?n(i):t(s)}).catch(n)})}async _handle(e,t){if(!e||Array.isArray(e)||typeof e!="object"){const k=new Yt({code:-32603,message:"request must be plain object"});return t(k,{id:void 0,jsonrpc:"2.0",error:k})}if(typeof e.method!="string"){const k=new Yt({code:-32603,message:"method must be string"});return t(k,{id:e.id,jsonrpc:"2.0",error:k})}const n=Ke({},e),i={id:n.id,jsonrpc:n.jsonrpc};let s=null;try{await this._processRequest(n,i)}catch(k){s=k}if(s&&(delete i.result,!i.error)){var o,l,h,w,N,x,v;typeof s=="object"&&Object.keys(s).includes("stack")===!1&&(s.stack="Stack trace is not available."),i.error=_o(s,{shouldIncludeStack:!0,fallbackError:{message:((o=s)===null||o===void 0?void 0:o.message)||((l=s)===null||l===void 0?void 0:l.toString()),code:((h=s)===null||h===void 0?void 0:h.code)||-32603,stack:((w=s)===null||w===void 0?void 0:w.stack)||"Stack trace is not available.",data:((N=s)===null||N===void 0?void 0:N.data)||((x=s)===null||x===void 0?void 0:x.message)||((v=s)===null||v===void 0?void 0:v.toString())}})}return t(s,i)}async _processRequest(e,t){const[n,i,s]=await ut._runAllMiddleware(e,t,this._middleware);if(ut._checkForCompletion(e,t,i),await ut._runReturnHandlers(s),n)throw n}}class Ma extends jr.Duplex{constructor(e){let{parent:t,name:n}=e;super({objectMode:!0}),ge(this,"_parent",void 0),ge(this,"_name",void 0),this._parent=t,this._name=n}_read(){}_write(e,t,n){this._parent.push({name:this._name,data:e}),n()}}const Eo=Symbol("IGNORE_SUBSTREAM");class Ba extends jr.Duplex{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(Ke(Ke({},e),{},{objectMode:!0})),ge(this,"_substreams",void 0),ge(this,"getStream",void 0),this._substreams={}}createStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);const t=new Ma({parent:this,name:e});return this._substreams[e]=t,Da(this,n=>t.destroy(n||void 0)),t}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=Eo}_read(){}_write(e,t,n){const{name:i,data:s}=e;if(!i)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),n();const o=this._substreams[i];return o?(o!==Eo&&o.push(s),n()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${i}"`),n())}}function Da(r,e){const t=_a(e);ao(r,{readable:!1},t),ao(r,{writable:!1},t)}var Xt={exports:{}};Xt.exports;var So;function ka(){return So||(So=1,(function(r,e){var t=200,n="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,l="[object Arguments]",h="[object Array]",w="[object AsyncFunction]",N="[object Boolean]",x="[object Date]",v="[object Error]",k="[object Function]",U="[object GeneratorFunction]",I="[object Map]",_="[object Number]",u="[object Null]",c="[object Object]",E="[object Proxy]",H="[object RegExp]",F="[object Set]",Y="[object String]",X="[object Undefined]",a="[object WeakMap]",y="[object ArrayBuffer]",f="[object DataView]",g="[object Float32Array]",b="[object Float64Array]",d="[object Int8Array]",C="[object Int16Array]",p="[object Int32Array]",A="[object Uint8Array]",P="[object Uint8ClampedArray]",m="[object Uint16Array]",M="[object Uint32Array]",S=/[\\^$.*+?()[\]{}|]/g,j=/^\[object .+?Constructor\]$/,K=/^(?:0|[1-9]\d*)$/,W={};W[g]=W[b]=W[d]=W[C]=W[p]=W[A]=W[P]=W[m]=W[M]=!0,W[l]=W[h]=W[y]=W[N]=W[f]=W[x]=W[v]=W[k]=W[I]=W[_]=W[c]=W[H]=W[F]=W[Y]=W[a]=!1;var ee=typeof Zt=="object"&&Zt&&Zt.Object===Object&&Zt,Q=typeof self=="object"&&self&&self.Object===Object&&self,le=ee||Q||Function("return this")(),ue=e&&!e.nodeType&&e,G=ue&&!0&&r&&!r.nodeType&&r,V=G&&G.exports===ue,oe=V&&ee.process,ce=(function(){try{var T=G&&G.require&&G.require("util").types;return T||oe&&oe.binding&&oe.binding("util")}catch{}})(),fe=ce&&ce.isTypedArray;function L(T,q,z){switch(z.length){case 0:return T.call(q);case 1:return T.call(q,z[0]);case 2:return T.call(q,z[0],z[1]);case 3:return T.call(q,z[0],z[1],z[2])}return T.apply(q,z)}function B(T,q){for(var z=-1,he=Array(T);++z<T;)he[z]=q(z);return he}function $(T){return function(q){return T(q)}}function ne(T,q){return T?.[q]}function se(T,q){return function(z){return T(q(z))}}var ie=Array.prototype,D=Function.prototype,Z=Object.prototype,re=le["__core-js_shared__"],J=D.toString,we=Z.hasOwnProperty,Pe=(function(){var T=/[^.]+$/.exec(re&&re.keys&&re.keys.IE_PROTO||"");return T?"Symbol(src)_1."+T:""})(),ye=Z.toString,Be=J.call(Object),xe=RegExp("^"+J.call(we).replace(S,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Le=V?le.Buffer:void 0,Ye=le.Symbol,Et=le.Uint8Array;Le&&Le.allocUnsafe;var Me=se(Object.getPrototypeOf,Object),lr=Object.create,Vr=Z.propertyIsEnumerable,ur=ie.splice,it=Ye?Ye.toStringTag:void 0,Mt=(function(){try{var T=Qr(Object,"defineProperty");return T({},"",{}),T}catch{}})(),Kr=Le?Le.isBuffer:void 0,Wt=Math.max,fr=Date.now,cr=Qr(le,"Map"),gt=Qr(Object,"create"),Ft=(function(){function T(){}return function(q){if(!vt(q))return{};if(lr)return lr(q);T.prototype=q;var z=new T;return T.prototype=void 0,z}})();function ot(T){var q=-1,z=T==null?0:T.length;for(this.clear();++q<z;){var he=T[q];this.set(he[0],he[1])}}function Yr(){this.__data__=gt?gt(null):{},this.size=0}function $t(T){var q=this.has(T)&&delete this.__data__[T];return this.size-=q?1:0,q}function dr(T){var q=this.__data__;if(gt){var z=q[T];return z===n?void 0:z}return we.call(q,T)?q[T]:void 0}function R(T){var q=this.__data__;return gt?q[T]!==void 0:we.call(q,T)}function O(T,q){var z=this.__data__;return this.size+=this.has(T)?0:1,z[T]=gt&&q===void 0?n:q,this}ot.prototype.clear=Yr,ot.prototype.delete=$t,ot.prototype.get=dr,ot.prototype.has=R,ot.prototype.set=O;function te(T){var q=-1,z=T==null?0:T.length;for(this.clear();++q<z;){var he=T[q];this.set(he[0],he[1])}}function ae(){this.__data__=[],this.size=0}function de(T){var q=this.__data__,z=br(q,T);if(z<0)return!1;var he=q.length-1;return z==he?q.pop():ur.call(q,z,1),--this.size,!0}function Oe(T){var q=this.__data__,z=br(q,T);return z<0?void 0:q[z][1]}function ke(T){return br(this.__data__,T)>-1}function hr(T,q){var z=this.__data__,he=br(z,T);return he<0?(++this.size,z.push([T,q])):z[he][1]=q,this}te.prototype.clear=ae,te.prototype.delete=de,te.prototype.get=Oe,te.prototype.has=ke,te.prototype.set=hr;function Ue(T){var q=-1,z=T==null?0:T.length;for(this.clear();++q<z;){var he=T[q];this.set(he[0],he[1])}}function gr(){this.size=0,this.__data__={hash:new ot,map:new(cr||te),string:new ot}}function Jr(T){var q=_r(this,T).delete(T);return this.size-=q?1:0,q}function pr(T){return _r(this,T).get(T)}function wr(T){return _r(this,T).has(T)}function Ht(T,q){var z=_r(this,T),he=z.size;return z.set(T,q),this.size+=z.size==he?0:1,this}Ue.prototype.clear=gr,Ue.prototype.delete=Jr,Ue.prototype.get=pr,Ue.prototype.has=wr,Ue.prototype.set=Ht;function tt(T){var q=this.__data__=new te(T);this.size=q.size}function zt(){this.__data__=new te,this.size=0}function St(T){var q=this.__data__,z=q.delete(T);return this.size=q.size,z}function st(T){return this.__data__.get(T)}function Je(T){return this.__data__.has(T)}function As(T,q){var z=this.__data__;if(z instanceof te){var he=z.__data__;if(!cr||he.length<t-1)return he.push([T,q]),this.size=++z.size,this;z=this.__data__=new Ue(he)}return z.set(T,q),this.size=z.size,this}tt.prototype.clear=zt,tt.prototype.delete=St,tt.prototype.get=st,tt.prototype.has=Je,tt.prototype.set=As;function Rs(T,q){var z=rn(T),he=!z&&tn(T),be=!z&&!he&&Ei(T),me=!z&&!he&&!be&&vi(T),ve=z||he||be||me,_e=ve?B(T.length,String):[],Ae=_e.length;for(var Ze in T)ve&&(Ze=="length"||be&&(Ze=="offset"||Ze=="parent")||me&&(Ze=="buffer"||Ze=="byteLength"||Ze=="byteOffset")||_i(Ze,Ae))||_e.push(Ze);return _e}function Zr(T,q,z){(z!==void 0&&!mr(T[q],z)||z===void 0&&!(q in T))&&Xr(T,q,z)}function Is(T,q,z){var he=T[q];(!(we.call(T,q)&&mr(he,z))||z===void 0&&!(q in T))&&Xr(T,q,z)}function br(T,q){for(var z=T.length;z--;)if(mr(T[z][0],q))return z;return-1}function Xr(T,q,z){q=="__proto__"&&Mt?Mt(T,q,{configurable:!0,enumerable:!0,value:z,writable:!0}):T[q]=z}var Ts=js();function yr(T){return T==null?T===void 0?X:u:it&&it in Object(T)?Ws(T):Vs(T)}function bi(T){return Gt(T)&&yr(T)==l}function xs(T){if(!vt(T)||zs(T))return!1;var q=on(T)?xe:j;return q.test(Zs(T))}function Os(T){return Gt(T)&&Si(T.length)&&!!W[yr(T)]}function Ns(T){if(!vt(T))return Gs(T);var q=mi(T),z=[];for(var he in T)he=="constructor"&&(q||!we.call(T,he))||z.push(he);return z}function yi(T,q,z,he,be){T!==q&&Ts(q,function(me,ve){if(be||(be=new tt),vt(me))Cs(T,q,ve,z,yi,he,be);else{var _e=he?he(en(T,ve),me,ve+"",T,q,be):void 0;_e===void 0&&(_e=me),Zr(T,ve,_e)}},Ai)}function Cs(T,q,z,he,be,me,ve){var _e=en(T,z),Ae=en(q,z),Ze=ve.get(Ae);if(Ze){Zr(T,z,Ze);return}var Fe=me?me(_e,Ae,z+"",T,q,ve):void 0,Vt=Fe===void 0;if(Vt){var sn=rn(Ae),an=!sn&&Ei(Ae),Ii=!sn&&!an&&vi(Ae);Fe=Ae,sn||an||Ii?rn(_e)?Fe=_e:Xs(_e)?Fe=ks(_e):an?(Vt=!1,Fe=Ms(Ae)):Ii?(Vt=!1,Fe=Ds(Ae)):Fe=[]:Qs(Ae)||tn(Ae)?(Fe=_e,tn(_e)?Fe=ea(_e):(!vt(_e)||on(_e))&&(Fe=Fs(Ae))):Vt=!1}Vt&&(ve.set(Ae,Fe),be(Fe,Ae,he,me,ve),ve.delete(Ae)),Zr(T,z,Fe)}function Ps(T,q){return Ys(Ks(T,q,Ri),T+"")}var Ls=Mt?function(T,q){return Mt(T,"toString",{configurable:!0,enumerable:!1,value:ra(q),writable:!0})}:Ri;function Ms(T,q){return T.slice()}function Bs(T){var q=new T.constructor(T.byteLength);return new Et(q).set(new Et(T)),q}function Ds(T,q){var z=Bs(T.buffer);return new T.constructor(z,T.byteOffset,T.length)}function ks(T,q){var z=-1,he=T.length;for(q||(q=Array(he));++z<he;)q[z]=T[z];return q}function Us(T,q,z,he){var be=!z;z||(z={});for(var me=-1,ve=q.length;++me<ve;){var _e=q[me],Ae=void 0;Ae===void 0&&(Ae=T[_e]),be?Xr(z,_e,Ae):Is(z,_e,Ae)}return z}function qs(T){return Ps(function(q,z){var he=-1,be=z.length,me=be>1?z[be-1]:void 0,ve=be>2?z[2]:void 0;for(me=T.length>3&&typeof me=="function"?(be--,me):void 0,ve&&$s(z[0],z[1],ve)&&(me=be<3?void 0:me,be=1),q=Object(q);++he<be;){var _e=z[he];_e&&T(q,_e,he,me)}return q})}function js(T){return function(q,z,he){for(var be=-1,me=Object(q),ve=he(q),_e=ve.length;_e--;){var Ae=ve[++be];if(z(me[Ae],Ae,me)===!1)break}return q}}function _r(T,q){var z=T.__data__;return Hs(q)?z[typeof q=="string"?"string":"hash"]:z.map}function Qr(T,q){var z=ne(T,q);return xs(z)?z:void 0}function Ws(T){var q=we.call(T,it),z=T[it];try{T[it]=void 0;var he=!0}catch{}var be=ye.call(T);return he&&(q?T[it]=z:delete T[it]),be}function Fs(T){return typeof T.constructor=="function"&&!mi(T)?Ft(Me(T)):{}}function _i(T,q){var z=typeof T;return q=q??o,!!q&&(z=="number"||z!="symbol"&&K.test(T))&&T>-1&&T%1==0&&T<q}function $s(T,q,z){if(!vt(z))return!1;var he=typeof q;return(he=="number"?nn(z)&&_i(q,z.length):he=="string"&&q in z)?mr(z[q],T):!1}function Hs(T){var q=typeof T;return q=="string"||q=="number"||q=="symbol"||q=="boolean"?T!=="__proto__":T===null}function zs(T){return!!Pe&&Pe in T}function mi(T){var q=T&&T.constructor,z=typeof q=="function"&&q.prototype||Z;return T===z}function Gs(T){var q=[];if(T!=null)for(var z in Object(T))q.push(z);return q}function Vs(T){return ye.call(T)}function Ks(T,q,z){return q=Wt(q===void 0?T.length-1:q,0),function(){for(var he=arguments,be=-1,me=Wt(he.length-q,0),ve=Array(me);++be<me;)ve[be]=he[q+be];be=-1;for(var _e=Array(q+1);++be<q;)_e[be]=he[be];return _e[q]=z(ve),L(T,this,_e)}}function en(T,q){if(!(q==="constructor"&&typeof T[q]=="function")&&q!="__proto__")return T[q]}var Ys=Js(Ls);function Js(T){var q=0,z=0;return function(){var he=fr(),be=s-(he-z);if(z=he,be>0){if(++q>=i)return arguments[0]}else q=0;return T.apply(void 0,arguments)}}function Zs(T){if(T!=null){try{return J.call(T)}catch{}try{return T+""}catch{}}return""}function mr(T,q){return T===q||T!==T&&q!==q}var tn=bi((function(){return arguments})())?bi:function(T){return Gt(T)&&we.call(T,"callee")&&!Vr.call(T,"callee")},rn=Array.isArray;function nn(T){return T!=null&&Si(T.length)&&!on(T)}function Xs(T){return Gt(T)&&nn(T)}var Ei=Kr||na;function on(T){if(!vt(T))return!1;var q=yr(T);return q==k||q==U||q==w||q==E}function Si(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=o}function vt(T){var q=typeof T;return T!=null&&(q=="object"||q=="function")}function Gt(T){return T!=null&&typeof T=="object"}function Qs(T){if(!Gt(T)||yr(T)!=c)return!1;var q=Me(T);if(q===null)return!0;var z=we.call(q,"constructor")&&q.constructor;return typeof z=="function"&&z instanceof z&&J.call(z)==Be}var vi=fe?$(fe):Os;function ea(T){return Us(T,Ai(T))}function Ai(T){return nn(T)?Rs(T):Ns(T)}var ta=qs(function(T,q,z){yi(T,q,z)});function ra(T){return function(){return T}}function Ri(T){return T}function na(){return!1}r.exports=ta})(Xt,Xt.exports)),Xt.exports}ka();var Pr={exports:{}},Ua=Pr.exports,vo;function qa(){return vo||(vo=1,(function(r){(function(e,t){r.exports?r.exports=t():e.log=t()})(Ua,function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},o=null;function l(I,_){var u=I[_];if(typeof u.bind=="function")return u.bind(I);try{return Function.prototype.bind.call(u,I)}catch{return function(){return Function.prototype.apply.apply(u,[I,arguments])}}}function h(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function w(I){return I==="debug"&&(I="log"),typeof console===t?!1:I==="trace"&&n?h:console[I]!==void 0?l(console,I):console.log!==void 0?l(console,"log"):e}function N(){for(var I=this.getLevel(),_=0;_<i.length;_++){var u=i[_];this[u]=_<I?e:this.methodFactory(u,I,this.name)}if(this.log=this.debug,typeof console===t&&I<this.levels.SILENT)return"No console available for logging"}function x(I){return function(){typeof console!==t&&(N.call(this),this[I].apply(this,arguments))}}function v(I,_,u){return w(I)||x.apply(this,arguments)}function k(I,_){var u=this,c,E,H,F="loglevel";typeof I=="string"?F+=":"+I:typeof I=="symbol"&&(F=void 0);function Y(g){var b=(i[g]||"silent").toUpperCase();if(!(typeof window===t||!F)){try{window.localStorage[F]=b;return}catch{}try{window.document.cookie=encodeURIComponent(F)+"="+b+";"}catch{}}}function X(){var g;if(!(typeof window===t||!F)){try{g=window.localStorage[F]}catch{}if(typeof g===t)try{var b=window.document.cookie,d=encodeURIComponent(F),C=b.indexOf(d+"=");C!==-1&&(g=/^([^;]+)/.exec(b.slice(C+d.length+1))[1])}catch{}return u.levels[g]===void 0&&(g=void 0),g}}function a(){if(!(typeof window===t||!F)){try{window.localStorage.removeItem(F)}catch{}try{window.document.cookie=encodeURIComponent(F)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function y(g){var b=g;if(typeof b=="string"&&u.levels[b.toUpperCase()]!==void 0&&(b=u.levels[b.toUpperCase()]),typeof b=="number"&&b>=0&&b<=u.levels.SILENT)return b;throw new TypeError("log.setLevel() called with invalid level: "+g)}u.name=I,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=_||v,u.getLevel=function(){return H??E??c},u.setLevel=function(g,b){return H=y(g),b!==!1&&Y(H),N.call(u)},u.setDefaultLevel=function(g){E=y(g),X()||u.setLevel(g,!1)},u.resetLevel=function(){H=null,a(),N.call(u)},u.enableAll=function(g){u.setLevel(u.levels.TRACE,g)},u.disableAll=function(g){u.setLevel(u.levels.SILENT,g)},u.rebuild=function(){if(o!==u&&(c=y(o.getLevel())),N.call(u),o===u)for(var g in s)s[g].rebuild()},c=y(o?o.getLevel():"WARN");var f=X();f!=null&&(H=y(f)),N.call(u)}o=new k,o.getLogger=function(_){if(typeof _!="symbol"&&typeof _!="string"||_==="")throw new TypeError("You must supply a name when creating a logger.");var u=s[_];return u||(u=s[_]=new k(_,o.methodFactory)),u};var U=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=U),o},o.getLoggers=function(){return s},o.default=o,o})})(Pr)),Pr.exports}var os=qa();const Mr=qt(os),ja=Mr.getLogger("http-helpers");ja.setLevel(os.levels.INFO);function Ao(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`positive integer expected, not ${r}`)}function Wa(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function Fr(r,...e){if(!Wa(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${r.length}`)}function Fa(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ao(r.outputLen),Ao(r.blockLen)}function Br(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function $a(r,e){Fr(r);const t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Un=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qn=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),rt=(r,e)=>r<<32-e|r>>>e;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Ha(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function li(r){return typeof r=="string"&&(r=Ha(r)),Fr(r),r}function za(...r){let e=0;for(let n=0;n<r.length;n++){const i=r[n];Fr(i),e+=i.length}const t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){const s=r[n];t.set(s,i),i+=s.length}return t}class ss{clone(){return this._cloneInto()}}function Ga(r){const e=n=>r().update(li(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function Va(r=32){if(Un&&typeof Un.getRandomValues=="function")return Un.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}function Ka(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),l=Number(t&s),h=n?4:0,w=n?0:4;r.setUint32(e+h,o,n),r.setUint32(e+w,l,n)}const Ya=(r,e,t)=>r&e^~r&t,Ja=(r,e,t)=>r&e^r&t^e&t;class Za extends ss{constructor(e,t,n,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=qn(this.buffer)}update(e){Br(this);const{view:t,buffer:n,blockLen:i}=this;e=li(e);const s=e.length;for(let o=0;o<s;){const l=Math.min(i-this.pos,s-o);if(l===i){const h=qn(e);for(;i<=s-o;o+=i)this.process(h,o);continue}n.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Br(this),$a(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let x=o;x<i;x++)t[x]=0;Ka(n,i-8,BigInt(this.length*8),s),this.process(n,0);const l=qn(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const w=h/4,N=this.get();if(w>N.length)throw new Error("_sha2: outputLen bigger than state");for(let x=0;x<w;x++)l.setUint32(4*x,N[x],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:l}=this;return e.length=i,e.pos=l,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(n),e}}const Xa=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),pt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),wt=new Uint32Array(64);class Qa extends Za{constructor(){super(64,32,8,!1),this.A=pt[0]|0,this.B=pt[1]|0,this.C=pt[2]|0,this.D=pt[3]|0,this.E=pt[4]|0,this.F=pt[5]|0,this.G=pt[6]|0,this.H=pt[7]|0}get(){const{A:e,B:t,C:n,D:i,E:s,F:o,G:l,H:h}=this;return[e,t,n,i,s,o,l,h]}set(e,t,n,i,s,o,l,h){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=l|0,this.H=h|0}process(e,t){for(let x=0;x<16;x++,t+=4)wt[x]=e.getUint32(t,!1);for(let x=16;x<64;x++){const v=wt[x-15],k=wt[x-2],U=rt(v,7)^rt(v,18)^v>>>3,I=rt(k,17)^rt(k,19)^k>>>10;wt[x]=I+wt[x-7]+U+wt[x-16]|0}let{A:n,B:i,C:s,D:o,E:l,F:h,G:w,H:N}=this;for(let x=0;x<64;x++){const v=rt(l,6)^rt(l,11)^rt(l,25),k=N+v+Ya(l,h,w)+Xa[x]+wt[x]|0,I=(rt(n,2)^rt(n,13)^rt(n,22))+Ja(n,i,s)|0;N=w,w=h,h=l,l=o+k|0,o=s,s=i,i=n,n=k+I|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,l=l+this.E|0,h=h+this.F|0,w=w+this.G|0,N=N+this.H|0,this.set(n,i,s,o,l,h,w,N)}roundClean(){wt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const el=Ga(()=>new Qa);class as extends ss{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Fa(e);const n=li(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Br(this),this.iHash.update(e),this}digestInto(e){Br(this),Fr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:l}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=l,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ls=(r,e,t)=>new as(r,e).update(t).digest();ls.create=(r,e)=>new as(r,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const us=BigInt(0),$r=BigInt(1),tl=BigInt(2);function Nt(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function or(r){if(!Nt(r))throw new Error("Uint8Array expected")}const rl=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Dt(r){or(r);let e="";for(let t=0;t<r.length;t++)e+=rl[r[t]];return e}function fs(r){const e=r.toString(16);return e.length&1?`0${e}`:e}function ui(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}const at={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Ro(r){if(r>=at._0&&r<=at._9)return r-at._0;if(r>=at._A&&r<=at._F)return r-(at._A-10);if(r>=at._a&&r<=at._f)return r-(at._a-10)}function kt(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length,t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=Ro(r.charCodeAt(s)),l=Ro(r.charCodeAt(s+1));if(o===void 0||l===void 0){const h=r[s]+r[s+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+s)}n[i]=o*16+l}return n}function Ot(r){return ui(Dt(r))}function fi(r){return or(r),ui(Dt(Uint8Array.from(r).reverse()))}function Ut(r,e){return kt(r.toString(16).padStart(e*2,"0"))}function ci(r,e){return Ut(r,e).reverse()}function nl(r){return kt(fs(r))}function Qe(r,e,t){let n;if(typeof e=="string")try{n=kt(e)}catch(s){throw new Error(`${r} must be valid hex string, got "${e}". Cause: ${s}`)}else if(Nt(e))n=Uint8Array.from(e);else throw new Error(`${r} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${r} expected ${t} bytes, got ${i}`);return n}function nr(...r){let e=0;for(let n=0;n<r.length;n++){const i=r[n];or(i),e+=i.length}const t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){const s=r[n];t.set(s,i),i+=s.length}return t}function il(r,e){if(r.length!==e.length)return!1;let t=0;for(let n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}function ol(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function sl(r){let e;for(e=0;r>us;r>>=$r,e+=1);return e}function al(r,e){return r>>BigInt(e)&$r}function ll(r,e,t){return r|(t?$r:us)<<BigInt(e)}const di=r=>(tl<<BigInt(r-1))-$r,jn=r=>new Uint8Array(r),Io=r=>Uint8Array.from(r);function cs(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=jn(r),i=jn(r),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},l=(...x)=>t(i,n,...x),h=(x=jn())=>{i=l(Io([0]),x),n=l(),x.length!==0&&(i=l(Io([1]),x),n=l())},w=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let x=0;const v=[];for(;x<e;){n=l();const k=n.slice();v.push(k),x+=n.length}return nr(...v)};return(x,v)=>{o(),h(x);let k;for(;!(k=v(w()));)h();return o(),k}}const ul={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||Nt(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function sr(r,e,t={}){const n=(i,s,o)=>{const l=ul[s];if(typeof l!="function")throw new Error(`Invalid validator "${s}", expected function`);const h=r[i];if(!(o&&h===void 0)&&!l(h,r))throw new Error(`Invalid param ${String(i)}=${h} (${typeof h}), expected ${s}`)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return r}const fl=Object.freeze(Object.defineProperty({__proto__:null,abytes:or,bitGet:al,bitLen:sl,bitMask:di,bitSet:ll,bytesToHex:Dt,bytesToNumberBE:Ot,bytesToNumberLE:fi,concatBytes:nr,createHmacDrbg:cs,ensureBytes:Qe,equalBytes:il,hexToBytes:kt,hexToNumber:ui,isBytes:Nt,numberToBytesBE:Ut,numberToBytesLE:ci,numberToHexUnpadded:fs,numberToVarBytesBE:nl,utf8ToBytes:ol,validateObject:sr},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ce=BigInt(0),Te=BigInt(1),Tt=BigInt(2),cl=BigInt(3),Xn=BigInt(4),To=BigInt(5),xo=BigInt(8);BigInt(9);BigInt(16);function je(r,e){const t=r%e;return t>=Ce?t:e+t}function dl(r,e,t){if(t<=Ce||e<Ce)throw new Error("Expected power/modulo > 0");if(t===Te)return Ce;let n=Te;for(;e>Ce;)e&Te&&(n=n*r%t),r=r*r%t,e>>=Te;return n}function $e(r,e,t){let n=r;for(;e-- >Ce;)n*=n,n%=t;return n}function Qn(r,e){if(r===Ce||e<=Ce)throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);let t=je(r,e),n=e,i=Ce,s=Te;for(;t!==Ce;){const l=n/t,h=n%t,w=i-s*l;n=t,t=h,i=s,s=w}if(n!==Te)throw new Error("invert: does not exist");return je(i,e)}function hl(r){const e=(r-Te)/Tt;let t,n,i;for(t=r-Te,n=0;t%Tt===Ce;t/=Tt,n++);for(i=Tt;i<r&&dl(i,e,r)!==r-Te;i++);if(n===1){const o=(r+Te)/Xn;return function(h,w){const N=h.pow(w,o);if(!h.eql(h.sqr(N),w))throw new Error("Cannot find square root");return N}}const s=(t+Te)/Tt;return function(l,h){if(l.pow(h,e)===l.neg(l.ONE))throw new Error("Cannot find square root");let w=n,N=l.pow(l.mul(l.ONE,i),t),x=l.pow(h,s),v=l.pow(h,t);for(;!l.eql(v,l.ONE);){if(l.eql(v,l.ZERO))return l.ZERO;let k=1;for(let I=l.sqr(v);k<w&&!l.eql(I,l.ONE);k++)I=l.sqr(I);const U=l.pow(N,Te<<BigInt(w-k-1));N=l.sqr(U),x=l.mul(x,U),v=l.mul(v,N),w=k}return x}}function gl(r){if(r%Xn===cl){const e=(r+Te)/Xn;return function(n,i){const s=n.pow(i,e);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(r%xo===To){const e=(r-To)/xo;return function(n,i){const s=n.mul(i,Tt),o=n.pow(s,e),l=n.mul(i,o),h=n.mul(n.mul(l,Tt),o),w=n.mul(l,n.sub(h,n.ONE));if(!n.eql(n.sqr(w),i))throw new Error("Cannot find square root");return w}}return hl(r)}const pl=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function wl(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=pl.reduce((n,i)=>(n[i]="function",n),e);return sr(r,t)}function bl(r,e,t){if(t<Ce)throw new Error("Expected power > 0");if(t===Ce)return r.ONE;if(t===Te)return e;let n=r.ONE,i=e;for(;t>Ce;)t&Te&&(n=r.mul(n,i)),i=r.sqr(i),t>>=Te;return n}function yl(r,e){const t=new Array(e.length),n=e.reduce((s,o,l)=>r.is0(o)?s:(t[l]=s,r.mul(s,o)),r.ONE),i=r.inv(n);return e.reduceRight((s,o,l)=>r.is0(o)?s:(t[l]=r.mul(s,t[l]),r.mul(s,o)),i),t}function ds(r,e){const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function _l(r,e,t=!1,n={}){if(r<=Ce)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:i,nByteLength:s}=ds(r,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=gl(r),l=Object.freeze({ORDER:r,BITS:i,BYTES:s,MASK:di(i),ZERO:Ce,ONE:Te,create:h=>je(h,r),isValid:h=>{if(typeof h!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof h}`);return Ce<=h&&h<r},is0:h=>h===Ce,isOdd:h=>(h&Te)===Te,neg:h=>je(-h,r),eql:(h,w)=>h===w,sqr:h=>je(h*h,r),add:(h,w)=>je(h+w,r),sub:(h,w)=>je(h-w,r),mul:(h,w)=>je(h*w,r),pow:(h,w)=>bl(l,h,w),div:(h,w)=>je(h*Qn(w,r),r),sqrN:h=>h*h,addN:(h,w)=>h+w,subN:(h,w)=>h-w,mulN:(h,w)=>h*w,inv:h=>Qn(h,r),sqrt:n.sqrt||(h=>o(l,h)),invertBatch:h=>yl(l,h),cmov:(h,w,N)=>N?w:h,toBytes:h=>t?ci(h,s):Ut(h,s),fromBytes:h=>{if(h.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${h.length}`);return t?fi(h):Ot(h)}});return Object.freeze(l)}function hs(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function gs(r){const e=hs(r);return e+Math.ceil(e/2)}function ml(r,e,t=!1){const n=r.length,i=hs(e),s=gs(e);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);const o=t?Ot(r):fi(r),l=je(o,e-Te)+Te;return t?ci(l,i):Ut(l,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const El=BigInt(0),Wn=BigInt(1);function Sl(r,e){const t=(i,s)=>{const o=s.negate();return i?o:s},n=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=r.ZERO,l=i;for(;s>El;)s&Wn&&(o=o.add(l)),l=l.double(),s>>=Wn;return o},precomputeWindow(i,s){const{windows:o,windowSize:l}=n(s),h=[];let w=i,N=w;for(let x=0;x<o;x++){N=w,h.push(N);for(let v=1;v<l;v++)N=N.add(w),h.push(N);w=N.double()}return h},wNAF(i,s,o){const{windows:l,windowSize:h}=n(i);let w=r.ZERO,N=r.BASE;const x=BigInt(2**i-1),v=2**i,k=BigInt(i);for(let U=0;U<l;U++){const I=U*h;let _=Number(o&x);o>>=k,_>h&&(_-=v,o+=Wn);const u=I,c=I+Math.abs(_)-1,E=U%2!==0,H=_<0;_===0?N=N.add(t(E,s[u])):w=w.add(t(H,s[c]))}return{p:w,f:N}},wNAFCached(i,s,o,l){const h=i._WINDOW_SIZE||1;let w=s.get(i);return w||(w=this.precomputeWindow(i,h),h!==1&&s.set(i,l(w))),this.wNAF(h,w,o)}}}function ps(r){return wl(r.Fp),sr(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ds(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function vl(r){const e=ps(r);sr(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=e;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:Al,hexToBytes:Rl}=fl,xt={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(r){const{Err:e}=xt;if(r.length<2||r[0]!==2)throw new e("Invalid signature integer tag");const t=r[1],n=r.subarray(2,t+2);if(!t||n.length!==t)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Al(n),l:r.subarray(t+2)}},toSig(r){const{Err:e}=xt,t=typeof r=="string"?Rl(r):r;or(t);let n=t.length;if(n<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=xt._parseInt(t.subarray(2)),{d:o,l}=xt._parseInt(s);if(l.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(r){const e=w=>Number.parseInt(w[0],16)&8?"00"+w:w,t=w=>{const N=w.toString(16);return N.length&1?`0${N}`:N},n=e(t(r.s)),i=e(t(r.r)),s=n.length/2,o=i.length/2,l=t(s),h=t(o);return`30${t(o+s+4)}02${h}${i}02${l}${n}`}},ft=BigInt(0),Ve=BigInt(1);BigInt(2);const Oo=BigInt(3);BigInt(4);function Il(r){const e=vl(r),{Fp:t}=e,n=e.toBytes||((U,I,_)=>{const u=I.toAffine();return nr(Uint8Array.from([4]),t.toBytes(u.x),t.toBytes(u.y))}),i=e.fromBytes||(U=>{const I=U.subarray(1),_=t.fromBytes(I.subarray(0,t.BYTES)),u=t.fromBytes(I.subarray(t.BYTES,2*t.BYTES));return{x:_,y:u}});function s(U){const{a:I,b:_}=e,u=t.sqr(U),c=t.mul(u,U);return t.add(t.add(c,t.mul(U,I)),_)}if(!t.eql(t.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(U){return typeof U=="bigint"&&ft<U&&U<e.n}function l(U){if(!o(U))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function h(U){const{allowedPrivateKeyLengths:I,nByteLength:_,wrapPrivateKey:u,n:c}=e;if(I&&typeof U!="bigint"){if(Nt(U)&&(U=Dt(U)),typeof U!="string"||!I.includes(U.length))throw new Error("Invalid key");U=U.padStart(_*2,"0")}let E;try{E=typeof U=="bigint"?U:Ot(Qe("private key",U,_))}catch{throw new Error(`private key must be ${_} bytes, hex or bigint, not ${typeof U}`)}return u&&(E=je(E,c)),l(E),E}const w=new Map;function N(U){if(!(U instanceof x))throw new Error("ProjectivePoint expected")}class x{constructor(I,_,u){if(this.px=I,this.py=_,this.pz=u,I==null||!t.isValid(I))throw new Error("x required");if(_==null||!t.isValid(_))throw new Error("y required");if(u==null||!t.isValid(u))throw new Error("z required")}static fromAffine(I){const{x:_,y:u}=I||{};if(!I||!t.isValid(_)||!t.isValid(u))throw new Error("invalid affine point");if(I instanceof x)throw new Error("projective point not allowed");const c=E=>t.eql(E,t.ZERO);return c(_)&&c(u)?x.ZERO:new x(_,u,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){const _=t.invertBatch(I.map(u=>u.pz));return I.map((u,c)=>u.toAffine(_[c])).map(x.fromAffine)}static fromHex(I){const _=x.fromAffine(i(Qe("pointHex",I)));return _.assertValidity(),_}static fromPrivateKey(I){return x.BASE.multiply(h(I))}_setWindowSize(I){this._WINDOW_SIZE=I,w.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:I,y:_}=this.toAffine();if(!t.isValid(I)||!t.isValid(_))throw new Error("bad point: x or y not FE");const u=t.sqr(_),c=s(I);if(!t.eql(u,c))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:I}=this.toAffine();if(t.isOdd)return!t.isOdd(I);throw new Error("Field doesn't support isOdd")}equals(I){N(I);const{px:_,py:u,pz:c}=this,{px:E,py:H,pz:F}=I,Y=t.eql(t.mul(_,F),t.mul(E,c)),X=t.eql(t.mul(u,F),t.mul(H,c));return Y&&X}negate(){return new x(this.px,t.neg(this.py),this.pz)}double(){const{a:I,b:_}=e,u=t.mul(_,Oo),{px:c,py:E,pz:H}=this;let F=t.ZERO,Y=t.ZERO,X=t.ZERO,a=t.mul(c,c),y=t.mul(E,E),f=t.mul(H,H),g=t.mul(c,E);return g=t.add(g,g),X=t.mul(c,H),X=t.add(X,X),F=t.mul(I,X),Y=t.mul(u,f),Y=t.add(F,Y),F=t.sub(y,Y),Y=t.add(y,Y),Y=t.mul(F,Y),F=t.mul(g,F),X=t.mul(u,X),f=t.mul(I,f),g=t.sub(a,f),g=t.mul(I,g),g=t.add(g,X),X=t.add(a,a),a=t.add(X,a),a=t.add(a,f),a=t.mul(a,g),Y=t.add(Y,a),f=t.mul(E,H),f=t.add(f,f),a=t.mul(f,g),F=t.sub(F,a),X=t.mul(f,y),X=t.add(X,X),X=t.add(X,X),new x(F,Y,X)}add(I){N(I);const{px:_,py:u,pz:c}=this,{px:E,py:H,pz:F}=I;let Y=t.ZERO,X=t.ZERO,a=t.ZERO;const y=e.a,f=t.mul(e.b,Oo);let g=t.mul(_,E),b=t.mul(u,H),d=t.mul(c,F),C=t.add(_,u),p=t.add(E,H);C=t.mul(C,p),p=t.add(g,b),C=t.sub(C,p),p=t.add(_,c);let A=t.add(E,F);return p=t.mul(p,A),A=t.add(g,d),p=t.sub(p,A),A=t.add(u,c),Y=t.add(H,F),A=t.mul(A,Y),Y=t.add(b,d),A=t.sub(A,Y),a=t.mul(y,p),Y=t.mul(f,d),a=t.add(Y,a),Y=t.sub(b,a),a=t.add(b,a),X=t.mul(Y,a),b=t.add(g,g),b=t.add(b,g),d=t.mul(y,d),p=t.mul(f,p),b=t.add(b,d),d=t.sub(g,d),d=t.mul(y,d),p=t.add(p,d),g=t.mul(b,p),X=t.add(X,g),g=t.mul(A,p),Y=t.mul(C,Y),Y=t.sub(Y,g),g=t.mul(C,b),a=t.mul(A,a),a=t.add(a,g),new x(Y,X,a)}subtract(I){return this.add(I.negate())}is0(){return this.equals(x.ZERO)}wNAF(I){return k.wNAFCached(this,w,I,_=>{const u=t.invertBatch(_.map(c=>c.pz));return _.map((c,E)=>c.toAffine(u[E])).map(x.fromAffine)})}multiplyUnsafe(I){const _=x.ZERO;if(I===ft)return _;if(l(I),I===Ve)return this;const{endo:u}=e;if(!u)return k.unsafeLadder(this,I);let{k1neg:c,k1:E,k2neg:H,k2:F}=u.splitScalar(I),Y=_,X=_,a=this;for(;E>ft||F>ft;)E&Ve&&(Y=Y.add(a)),F&Ve&&(X=X.add(a)),a=a.double(),E>>=Ve,F>>=Ve;return c&&(Y=Y.negate()),H&&(X=X.negate()),X=new x(t.mul(X.px,u.beta),X.py,X.pz),Y.add(X)}multiply(I){l(I);let _=I,u,c;const{endo:E}=e;if(E){const{k1neg:H,k1:F,k2neg:Y,k2:X}=E.splitScalar(_);let{p:a,f:y}=this.wNAF(F),{p:f,f:g}=this.wNAF(X);a=k.constTimeNegate(H,a),f=k.constTimeNegate(Y,f),f=new x(t.mul(f.px,E.beta),f.py,f.pz),u=a.add(f),c=y.add(g)}else{const{p:H,f:F}=this.wNAF(_);u=H,c=F}return x.normalizeZ([u,c])[0]}multiplyAndAddUnsafe(I,_,u){const c=x.BASE,E=(F,Y)=>Y===ft||Y===Ve||!F.equals(c)?F.multiplyUnsafe(Y):F.multiply(Y),H=E(this,_).add(E(I,u));return H.is0()?void 0:H}toAffine(I){const{px:_,py:u,pz:c}=this,E=this.is0();I==null&&(I=E?t.ONE:t.inv(c));const H=t.mul(_,I),F=t.mul(u,I),Y=t.mul(c,I);if(E)return{x:t.ZERO,y:t.ZERO};if(!t.eql(Y,t.ONE))throw new Error("invZ was invalid");return{x:H,y:F}}isTorsionFree(){const{h:I,isTorsionFree:_}=e;if(I===Ve)return!0;if(_)return _(x,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:I,clearCofactor:_}=e;return I===Ve?this:_?_(x,this):this.multiplyUnsafe(e.h)}toRawBytes(I=!0){return this.assertValidity(),n(x,this,I)}toHex(I=!0){return Dt(this.toRawBytes(I))}}x.BASE=new x(e.Gx,e.Gy,t.ONE),x.ZERO=new x(t.ZERO,t.ONE,t.ZERO);const v=e.nBitLength,k=Sl(x,e.endo?Math.ceil(v/2):v);return{CURVE:e,ProjectivePoint:x,normPrivateKeyToScalar:h,weierstrassEquation:s,isWithinCurveOrder:o}}function Tl(r){const e=ps(r);return sr(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function xl(r){const e=Tl(r),{Fp:t,n}=e,i=t.BYTES+1,s=2*t.BYTES+1;function o(p){return ft<p&&p<t.ORDER}function l(p){return je(p,n)}function h(p){return Qn(p,n)}const{ProjectivePoint:w,normPrivateKeyToScalar:N,weierstrassEquation:x,isWithinCurveOrder:v}=Il({...e,toBytes(p,A,P){const m=A.toAffine(),M=t.toBytes(m.x),S=nr;return P?S(Uint8Array.from([A.hasEvenY()?2:3]),M):S(Uint8Array.from([4]),M,t.toBytes(m.y))},fromBytes(p){const A=p.length,P=p[0],m=p.subarray(1);if(A===i&&(P===2||P===3)){const M=Ot(m);if(!o(M))throw new Error("Point is not on curve");const S=x(M);let j;try{j=t.sqrt(S)}catch(ee){const Q=ee instanceof Error?": "+ee.message:"";throw new Error("Point is not on curve"+Q)}const K=(j&Ve)===Ve;return(P&1)===1!==K&&(j=t.neg(j)),{x:M,y:j}}else if(A===s&&P===4){const M=t.fromBytes(m.subarray(0,t.BYTES)),S=t.fromBytes(m.subarray(t.BYTES,2*t.BYTES));return{x:M,y:S}}else throw new Error(`Point of length ${A} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),k=p=>Dt(Ut(p,e.nByteLength));function U(p){const A=n>>Ve;return p>A}function I(p){return U(p)?l(-p):p}const _=(p,A,P)=>Ot(p.slice(A,P));class u{constructor(A,P,m){this.r=A,this.s=P,this.recovery=m,this.assertValidity()}static fromCompact(A){const P=e.nByteLength;return A=Qe("compactSignature",A,P*2),new u(_(A,0,P),_(A,P,2*P))}static fromDER(A){const{r:P,s:m}=xt.toSig(Qe("DER",A));return new u(P,m)}assertValidity(){if(!v(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!v(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(A){return new u(this.r,this.s,A)}recoverPublicKey(A){const{r:P,s:m,recovery:M}=this,S=X(Qe("msgHash",A));if(M==null||![0,1,2,3].includes(M))throw new Error("recovery id invalid");const j=M===2||M===3?P+e.n:P;if(j>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const K=(M&1)===0?"02":"03",W=w.fromHex(K+k(j)),ee=h(j),Q=l(-S*ee),le=l(m*ee),ue=w.BASE.multiplyAndAddUnsafe(W,Q,le);if(!ue)throw new Error("point at infinify");return ue.assertValidity(),ue}hasHighS(){return U(this.s)}normalizeS(){return this.hasHighS()?new u(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return kt(this.toDERHex())}toDERHex(){return xt.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return kt(this.toCompactHex())}toCompactHex(){return k(this.r)+k(this.s)}}const c={isValidPrivateKey(p){try{return N(p),!0}catch{return!1}},normPrivateKeyToScalar:N,randomPrivateKey:()=>{const p=gs(e.n);return ml(e.randomBytes(p),e.n)},precompute(p=8,A=w.BASE){return A._setWindowSize(p),A.multiply(BigInt(3)),A}};function E(p,A=!0){return w.fromPrivateKey(p).toRawBytes(A)}function H(p){const A=Nt(p),P=typeof p=="string",m=(A||P)&&p.length;return A?m===i||m===s:P?m===2*i||m===2*s:p instanceof w}function F(p,A,P=!0){if(H(p))throw new Error("first arg must be private key");if(!H(A))throw new Error("second arg must be public key");return w.fromHex(A).multiply(N(p)).toRawBytes(P)}const Y=e.bits2int||function(p){const A=Ot(p),P=p.length*8-e.nBitLength;return P>0?A>>BigInt(P):A},X=e.bits2int_modN||function(p){return l(Y(p))},a=di(e.nBitLength);function y(p){if(typeof p!="bigint")throw new Error("bigint expected");if(!(ft<=p&&p<a))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Ut(p,e.nByteLength)}function f(p,A,P=g){if(["recovered","canonical"].some(V=>V in P))throw new Error("sign() legacy options not supported");const{hash:m,randomBytes:M}=e;let{lowS:S,prehash:j,extraEntropy:K}=P;S==null&&(S=!0),p=Qe("msgHash",p),j&&(p=Qe("prehashed msgHash",m(p)));const W=X(p),ee=N(A),Q=[y(ee),y(W)];if(K!=null&&K!==!1){const V=K===!0?M(t.BYTES):K;Q.push(Qe("extraEntropy",V))}const le=nr(...Q),ue=W;function G(V){const oe=Y(V);if(!v(oe))return;const ce=h(oe),fe=w.BASE.multiply(oe).toAffine(),L=l(fe.x);if(L===ft)return;const B=l(ce*l(ue+L*ee));if(B===ft)return;let $=(fe.x===L?0:2)|Number(fe.y&Ve),ne=B;return S&&U(B)&&(ne=I(B),$^=1),new u(L,ne,$)}return{seed:le,k2sig:G}}const g={lowS:e.lowS,prehash:!1},b={lowS:e.lowS,prehash:!1};function d(p,A,P=g){const{seed:m,k2sig:M}=f(p,A,P),S=e;return cs(S.hash.outputLen,S.nByteLength,S.hmac)(m,M)}w.BASE._setWindowSize(8);function C(p,A,P,m=b){const M=p;if(A=Qe("msgHash",A),P=Qe("publicKey",P),"strict"in m)throw new Error("options.strict was renamed to lowS");const{lowS:S,prehash:j}=m;let K,W;try{if(typeof M=="string"||Nt(M))try{K=u.fromDER(M)}catch(fe){if(!(fe instanceof xt.Err))throw fe;K=u.fromCompact(M)}else if(typeof M=="object"&&typeof M.r=="bigint"&&typeof M.s=="bigint"){const{r:fe,s:L}=M;K=new u(fe,L)}else throw new Error("PARSE");W=w.fromHex(P)}catch(fe){if(fe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(S&&K.hasHighS())return!1;j&&(A=e.hash(A));const{r:ee,s:Q}=K,le=X(A),ue=h(Q),G=l(le*ue),V=l(ee*ue),oe=w.BASE.multiplyAndAddUnsafe(W,G,V)?.toAffine();return oe?l(oe.x)===ee:!1}return{CURVE:e,getPublicKey:E,getSharedSecret:F,sign:d,verify:C,ProjectivePoint:w,Signature:u,utils:c}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ol(r){return{hash:r,hmac:(e,...t)=>ls(r,e,za(...t)),randomBytes:Va}}function Nl(r,e){const t=n=>xl({...r,...Ol(n)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ws=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),No=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Cl=BigInt(1),ei=BigInt(2),Co=(r,e)=>(r+e/ei)/e;function Pl(r){const e=ws,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),l=BigInt(44),h=BigInt(88),w=r*r*r%e,N=w*w*r%e,x=$e(N,t,e)*N%e,v=$e(x,t,e)*N%e,k=$e(v,ei,e)*w%e,U=$e(k,i,e)*k%e,I=$e(U,s,e)*U%e,_=$e(I,l,e)*I%e,u=$e(_,h,e)*_%e,c=$e(u,l,e)*I%e,E=$e(c,t,e)*N%e,H=$e(E,o,e)*U%e,F=$e(H,n,e)*w%e,Y=$e(F,ei,e);if(!ti.eql(ti.sqr(Y),r))throw new Error("Cannot find square root");return Y}const ti=_l(ws,void 0,void 0,{sqrt:Pl}),hi=Nl({a:BigInt(0),b:BigInt(7),Fp:ti,n:No,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=No,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Cl*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),l=Co(s*r,e),h=Co(-n*r,e);let w=je(r-l*t-h*i,e),N=je(-l*n-h*s,e);const x=w>o,v=N>o;if(x&&(w=e-w),v&&(N=e-N),w>o||N>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:x,k1:w,k2neg:v,k2:N}}}},el);BigInt(0);hi.ProjectivePoint;function Ll(r){let e=r;if(typeof e!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof e}`);return e.length%2&&(e=`0${e}`),e}BigInt(0);const ri={},ni={};for(let r=0;r<16;r++){const e=r,t=r*16,n=r.toString(16).toLowerCase();ni[n]=e,ni[n.toUpperCase()]=e,ri[n]=t,ri[n.toUpperCase()]=t}function Ml(r){const e=r.length,t=new Uint8Array(e/2);for(let n=0;n<e;n+=2)t[n/2]=ri[r[n]]+ni[r[n+1]];return t}Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));for(let r=0;r<=256*256-1;r++)BigInt(r);const Hr=r=>{if(typeof r!="string")throw new Error(`hex argument type ${typeof r} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(r))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${r}`);const e=r.slice(2);return Ml(e.length%2===0?e:Ll(e))},Bl=r=>{if(!Number.isSafeInteger(r)||r<0)throw new Error(`Received an invalid integer type: ${r}`);return`0x${r.toString(16)}`},ar=r=>{const e=Bl(r);return Hr(e)};BigInt("0xffffffffffffffff");BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935");hi.CURVE.n;hi.CURVE.n/BigInt(2);BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");const Dl="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";Hr(Dl);const kl="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";Hr(kl);const Ul="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";Hr(Ul);Uint8Array.from([128]);BigInt(-1);BigInt(0);BigInt(1);BigInt(2);BigInt(3);BigInt(7);BigInt(8);BigInt(27);BigInt(28);BigInt(31);BigInt(32);BigInt(64);BigInt(128);BigInt(255);BigInt(256);BigInt(96);BigInt(100);BigInt(160);BigInt(224);BigInt(7922816251426434e13);BigInt(1461501637330903e33);BigInt(2695994666715064e52);BigInt(1e9);Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));var Po;(function(r){r.String="string",r.Bytes="view",r.Number="number"})(Po||(Po={}));var Lo;(function(r){r.String="string",r.Bytes="view",r.JSON="json"})(Lo||(Lo={}));var Mo;(function(r){r[r.Number=0]="Number",r[r.BigInt=1]="BigInt",r[r.Uint8Array=2]="Uint8Array",r[r.PrefixedHexString=3]="PrefixedHexString"})(Mo||(Mo={}));var Bo;(function(r){r[r.Deposit=0]="Deposit",r[r.Withdrawal=1]="Withdrawal",r[r.Consolidation=2]="Consolidation"})(Bo||(Bo={}));var Ct;(function(r){r[r.Version=0]="Version",r[r.Balance=1]="Balance",r[r.Nonce=2]="Nonce",r[r.CodeHash=3]="CodeHash",r[r.CodeSize=4]="CodeSize"})(Ct||(Ct={}));ar(Ct.Version);ar(Ct.Balance);ar(Ct.Nonce);ar(Ct.CodeHash);ar(Ct.CodeSize);BigInt(256)**BigInt(31);var Fn={exports:{}},Rr={},Ir={},Do;function ql(){if(Do)return Ir;Do=1,Object.defineProperty(Ir,"__esModule",{value:!0});function r(e){var t=4,n=e.length,i=n%t;if(!i)return e;var s=n,o=t-i,l=n+o,h=et.alloc(l);for(h.write(e);o--;)h.write("=",s++);return h.toString()}return Ir.default=r,Ir}var ko;function jl(){if(ko)return Rr;ko=1,Object.defineProperty(Rr,"__esModule",{value:!0});var r=ql();function e(l,h){return h===void 0&&(h="utf8"),et.isBuffer(l)?i(l.toString("base64")):i(et.from(l,h).toString("base64"))}function t(l,h){return h===void 0&&(h="utf8"),et.from(n(l),"base64").toString(h)}function n(l){return l=l.toString(),r.default(l).replace(/\-/g,"+").replace(/_/g,"/")}function i(l){return l.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function s(l){return et.from(n(l),"base64")}var o=e;return o.encode=e,o.decode=t,o.toBase64=n,o.fromBase64=i,o.toBuffer=s,Rr.default=o,Rr}var Uo;function Wl(){return Uo||(Uo=1,(function(r){r.exports=jl().default,r.exports.default=r.exports})(Fn)),Fn.exports}Wl();const Se={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},yt={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};Se.MAINNET+"",Se.TESTNET+"",Se.CYAN+"",Se.AQUA+"",Se.CELESTE+"";Se.AQUA+"",yt.SAPPHIRE_MAINNET,Se.CELESTE+"",yt.SAPPHIRE_MAINNET,Se.CYAN+"",yt.SAPPHIRE_MAINNET,Se.MAINNET+"",yt.SAPPHIRE_MAINNET,Se.TESTNET+"",yt.SAPPHIRE_DEVNET;Se.MAINNET+"",Se.TESTNET+"",Se.CYAN+"",Se.AQUA+"",Se.CELESTE+"";yt.SAPPHIRE_MAINNET+"",yt.SAPPHIRE_DEVNET+"",Se.MAINNET+"",Se.TESTNET+"",Se.CYAN+"",Se.AQUA+"",Se.CELESTE+"";Se.MAINNET+"",Se.TESTNET+"",Se.CYAN+"",Se.AQUA+"",Se.CELESTE+"";function qo(r){let e=!1,t=0,n;try{n=window[r],e=!0,t=n.length;const i="__storage_test__";return n.setItem(i,i),n.removeItem(i),!0}catch(i){const s=i;return s&&(s.code===22||s.code===1014||s.name==="QuotaExceededError"||s.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&t!==0}}class Fl{constructor(){ge(this,"store",new Map)}getItem(e){return this.store.get(e)||null}setItem(e,t){this.store.set(e,t)}removeItem(e){this.store.delete(e)}}class $l{constructor(e,t){ge(this,"storage",void 0),ge(this,"_storeKey",void 0),this.storage=t,this._storeKey=e;try{t.getItem(e)||this.resetStore()}catch{}}static getInstance(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"local";if(!this.instanceMap.has(e)){let n;t==="local"&&qo("localStorage")?n=window.localStorage:t==="session"&&qo("sessionStorage")?n=window.sessionStorage:n=new Fl,this.instanceMap.set(e,new this(e,n))}return this.instanceMap.get(e)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const e=this.getStore();return this.storage.removeItem(this._storeKey),e}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(e){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[e]}set(e,t){const n=JSON.parse(this.storage.getItem(this._storeKey)||"{}");n[e]=t,this.storage.setItem(this._storeKey,JSON.stringify(n))}}ge($l,"instanceMap",new Map);Ke(Ke({},yt),Se);var Hl=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,$n=Math.ceil,ze=Math.floor,qe="[BigNumber Error] ",jo=qe+"Number primitive has more than 15 significant digits: ",Xe=1e14,pe=14,Hn=9007199254740991,zn=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],bt=1e7,Ne=1e9;function bs(r){var e,t,n,i=c.prototype={constructor:c,toString:null,valueOf:null},s=new c(1),o=20,l=4,h=-7,w=21,N=-1e7,x=1e7,v=!1,k=1,U=0,I={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},_="0123456789abcdefghijklmnopqrstuvwxyz",u=!0;function c(a,y){var f,g,b,d,C,p,A,P,m=this;if(!(m instanceof c))return new c(a,y);if(y==null){if(a&&a._isBigNumber===!0){m.s=a.s,!a.c||a.e>x?m.c=m.e=null:a.e<N?m.c=[m.e=0]:(m.e=a.e,m.c=a.c.slice());return}if((p=typeof a=="number")&&a*0==0){if(m.s=1/a<0?(a=-a,-1):1,a===~~a){for(d=0,C=a;C>=10;C/=10,d++);d>x?m.c=m.e=null:(m.e=d,m.c=[a]);return}P=String(a)}else{if(!Hl.test(P=String(a)))return n(m,P,p);m.s=P.charCodeAt(0)==45?(P=P.slice(1),-1):1}(d=P.indexOf("."))>-1&&(P=P.replace(".","")),(C=P.search(/e/i))>0?(d<0&&(d=C),d+=+P.slice(C+1),P=P.substring(0,C)):d<0&&(d=P.length)}else{if(Re(y,2,_.length,"Base"),y==10&&u)return m=new c(a),Y(m,o+m.e+1,l);if(P=String(a),p=typeof a=="number"){if(a*0!=0)return n(m,P,p,y);if(m.s=1/a<0?(P=P.slice(1),-1):1,c.DEBUG&&P.replace(/^0\.0*|\./,"").length>15)throw Error(jo+a)}else m.s=P.charCodeAt(0)===45?(P=P.slice(1),-1):1;for(f=_.slice(0,y),d=C=0,A=P.length;C<A;C++)if(f.indexOf(g=P.charAt(C))<0){if(g=="."){if(C>d){d=A;continue}}else if(!b&&(P==P.toUpperCase()&&(P=P.toLowerCase())||P==P.toLowerCase()&&(P=P.toUpperCase()))){b=!0,C=-1,d=0;continue}return n(m,String(a),p,y)}p=!1,P=t(P,y,10,m.s),(d=P.indexOf("."))>-1?P=P.replace(".",""):d=P.length}for(C=0;P.charCodeAt(C)===48;C++);for(A=P.length;P.charCodeAt(--A)===48;);if(P=P.slice(C,++A)){if(A-=C,p&&c.DEBUG&&A>15&&(a>Hn||a!==ze(a)))throw Error(jo+m.s*a);if((d=d-C-1)>x)m.c=m.e=null;else if(d<N)m.c=[m.e=0];else{if(m.e=d,m.c=[],C=(d+1)%pe,d<0&&(C+=pe),C<A){for(C&&m.c.push(+P.slice(0,C)),A-=pe;C<A;)m.c.push(+P.slice(C,C+=pe));C=pe-(P=P.slice(C)).length}else C-=A;for(;C--;P+="0");m.c.push(+P)}}else m.c=[m.e=0]}c.clone=bs,c.ROUND_UP=0,c.ROUND_DOWN=1,c.ROUND_CEIL=2,c.ROUND_FLOOR=3,c.ROUND_HALF_UP=4,c.ROUND_HALF_DOWN=5,c.ROUND_HALF_EVEN=6,c.ROUND_HALF_CEIL=7,c.ROUND_HALF_FLOOR=8,c.EUCLID=9,c.config=c.set=function(a){var y,f;if(a!=null)if(typeof a=="object"){if(a.hasOwnProperty(y="DECIMAL_PLACES")&&(f=a[y],Re(f,0,Ne,y),o=f),a.hasOwnProperty(y="ROUNDING_MODE")&&(f=a[y],Re(f,0,8,y),l=f),a.hasOwnProperty(y="EXPONENTIAL_AT")&&(f=a[y],f&&f.pop?(Re(f[0],-Ne,0,y),Re(f[1],0,Ne,y),h=f[0],w=f[1]):(Re(f,-Ne,Ne,y),h=-(w=f<0?-f:f))),a.hasOwnProperty(y="RANGE"))if(f=a[y],f&&f.pop)Re(f[0],-Ne,-1,y),Re(f[1],1,Ne,y),N=f[0],x=f[1];else if(Re(f,-Ne,Ne,y),f)N=-(x=f<0?-f:f);else throw Error(qe+y+" cannot be zero: "+f);if(a.hasOwnProperty(y="CRYPTO"))if(f=a[y],f===!!f)if(f)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))v=f;else throw v=!f,Error(qe+"crypto unavailable");else v=f;else throw Error(qe+y+" not true or false: "+f);if(a.hasOwnProperty(y="MODULO_MODE")&&(f=a[y],Re(f,0,9,y),k=f),a.hasOwnProperty(y="POW_PRECISION")&&(f=a[y],Re(f,0,Ne,y),U=f),a.hasOwnProperty(y="FORMAT"))if(f=a[y],typeof f=="object")I=f;else throw Error(qe+y+" not an object: "+f);if(a.hasOwnProperty(y="ALPHABET"))if(f=a[y],typeof f=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(f))u=f.slice(0,10)=="0123456789",_=f;else throw Error(qe+y+" invalid: "+f)}else throw Error(qe+"Object expected: "+a);return{DECIMAL_PLACES:o,ROUNDING_MODE:l,EXPONENTIAL_AT:[h,w],RANGE:[N,x],CRYPTO:v,MODULO_MODE:k,POW_PRECISION:U,FORMAT:I,ALPHABET:_}},c.isBigNumber=function(a){if(!a||a._isBigNumber!==!0)return!1;if(!c.DEBUG)return!0;var y,f,g=a.c,b=a.e,d=a.s;e:if({}.toString.call(g)=="[object Array]"){if((d===1||d===-1)&&b>=-Ne&&b<=Ne&&b===ze(b)){if(g[0]===0){if(b===0&&g.length===1)return!0;break e}if(y=(b+1)%pe,y<1&&(y+=pe),String(g[0]).length==y){for(y=0;y<g.length;y++)if(f=g[y],f<0||f>=Xe||f!==ze(f))break e;if(f!==0)return!0}}}else if(g===null&&b===null&&(d===null||d===1||d===-1))return!0;throw Error(qe+"Invalid BigNumber: "+a)},c.maximum=c.max=function(){return H(arguments,-1)},c.minimum=c.min=function(){return H(arguments,1)},c.random=(function(){var a=9007199254740992,y=Math.random()*a&2097151?function(){return ze(Math.random()*a)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(f){var g,b,d,C,p,A=0,P=[],m=new c(s);if(f==null?f=o:Re(f,0,Ne),C=$n(f/pe),v)if(crypto.getRandomValues){for(g=crypto.getRandomValues(new Uint32Array(C*=2));A<C;)p=g[A]*131072+(g[A+1]>>>11),p>=9e15?(b=crypto.getRandomValues(new Uint32Array(2)),g[A]=b[0],g[A+1]=b[1]):(P.push(p%1e14),A+=2);A=C/2}else if(crypto.randomBytes){for(g=crypto.randomBytes(C*=7);A<C;)p=(g[A]&31)*281474976710656+g[A+1]*1099511627776+g[A+2]*4294967296+g[A+3]*16777216+(g[A+4]<<16)+(g[A+5]<<8)+g[A+6],p>=9e15?crypto.randomBytes(7).copy(g,A):(P.push(p%1e14),A+=7);A=C/7}else throw v=!1,Error(qe+"crypto unavailable");if(!v)for(;A<C;)p=y(),p<9e15&&(P[A++]=p%1e14);for(C=P[--A],f%=pe,C&&f&&(p=zn[pe-f],P[A]=ze(C/p)*p);P[A]===0;P.pop(),A--);if(A<0)P=[d=0];else{for(d=-1;P[0]===0;P.splice(0,1),d-=pe);for(A=1,p=P[0];p>=10;p/=10,A++);A<pe&&(d-=pe-A)}return m.e=d,m.c=P,m}})(),c.sum=function(){for(var a=1,y=arguments,f=new c(y[0]);a<y.length;)f=f.plus(y[a++]);return f},t=(function(){var a="0123456789";function y(f,g,b,d){for(var C,p=[0],A,P=0,m=f.length;P<m;){for(A=p.length;A--;p[A]*=g);for(p[0]+=d.indexOf(f.charAt(P++)),C=0;C<p.length;C++)p[C]>b-1&&(p[C+1]==null&&(p[C+1]=0),p[C+1]+=p[C]/b|0,p[C]%=b)}return p.reverse()}return function(f,g,b,d,C){var p,A,P,m,M,S,j,K,W=f.indexOf("."),ee=o,Q=l;for(W>=0&&(m=U,U=0,f=f.replace(".",""),K=new c(g),S=K.pow(f.length-W),U=m,K.c=y(lt(He(S.c),S.e,"0"),10,b,a),K.e=K.c.length),j=y(f,g,b,C?(p=_,a):(p=a,_)),P=m=j.length;j[--m]==0;j.pop());if(!j[0])return p.charAt(0);if(W<0?--P:(S.c=j,S.e=P,S.s=d,S=e(S,K,ee,Q,b),j=S.c,M=S.r,P=S.e),A=P+ee+1,W=j[A],m=b/2,M=M||A<0||j[A+1]!=null,M=Q<4?(W!=null||M)&&(Q==0||Q==(S.s<0?3:2)):W>m||W==m&&(Q==4||M||Q==6&&j[A-1]&1||Q==(S.s<0?8:7)),A<1||!j[0])f=M?lt(p.charAt(1),-ee,p.charAt(0)):p.charAt(0);else{if(j.length=A,M)for(--b;++j[--A]>b;)j[A]=0,A||(++P,j=[1].concat(j));for(m=j.length;!j[--m];);for(W=0,f="";W<=m;f+=p.charAt(j[W++]));f=lt(f,P,p.charAt(0))}return f}})(),e=(function(){function a(g,b,d){var C,p,A,P,m=0,M=g.length,S=b%bt,j=b/bt|0;for(g=g.slice();M--;)A=g[M]%bt,P=g[M]/bt|0,C=j*A+P*S,p=S*A+C%bt*bt+m,m=(p/d|0)+(C/bt|0)+j*P,g[M]=p%d;return m&&(g=[m].concat(g)),g}function y(g,b,d,C){var p,A;if(d!=C)A=d>C?1:-1;else for(p=A=0;p<d;p++)if(g[p]!=b[p]){A=g[p]>b[p]?1:-1;break}return A}function f(g,b,d,C){for(var p=0;d--;)g[d]-=p,p=g[d]<b[d]?1:0,g[d]=p*C+g[d]-b[d];for(;!g[0]&&g.length>1;g.splice(0,1));}return function(g,b,d,C,p){var A,P,m,M,S,j,K,W,ee,Q,le,ue,G,V,oe,ce,fe,L=g.s==b.s?1:-1,B=g.c,$=b.c;if(!B||!B[0]||!$||!$[0])return new c(!g.s||!b.s||(B?$&&B[0]==$[0]:!$)?NaN:B&&B[0]==0||!$?L*0:L/0);for(W=new c(L),ee=W.c=[],P=g.e-b.e,L=d+P+1,p||(p=Xe,P=Ge(g.e/pe)-Ge(b.e/pe),L=L/pe|0),m=0;$[m]==(B[m]||0);m++);if($[m]>(B[m]||0)&&P--,L<0)ee.push(1),M=!0;else{for(V=B.length,ce=$.length,m=0,L+=2,S=ze(p/($[0]+1)),S>1&&($=a($,S,p),B=a(B,S,p),ce=$.length,V=B.length),G=ce,Q=B.slice(0,ce),le=Q.length;le<ce;Q[le++]=0);fe=$.slice(),fe=[0].concat(fe),oe=$[0],$[1]>=p/2&&oe++;do{if(S=0,A=y($,Q,ce,le),A<0){if(ue=Q[0],ce!=le&&(ue=ue*p+(Q[1]||0)),S=ze(ue/oe),S>1)for(S>=p&&(S=p-1),j=a($,S,p),K=j.length,le=Q.length;y(j,Q,K,le)==1;)S--,f(j,ce<K?fe:$,K,p),K=j.length,A=1;else S==0&&(A=S=1),j=$.slice(),K=j.length;if(K<le&&(j=[0].concat(j)),f(Q,j,le,p),le=Q.length,A==-1)for(;y($,Q,ce,le)<1;)S++,f(Q,ce<le?fe:$,le,p),le=Q.length}else A===0&&(S++,Q=[0]);ee[m++]=S,Q[0]?Q[le++]=B[G]||0:(Q=[B[G]],le=1)}while((G++<V||Q[0]!=null)&&L--);M=Q[0]!=null,ee[0]||ee.splice(0,1)}if(p==Xe){for(m=1,L=ee[0];L>=10;L/=10,m++);Y(W,d+(W.e=m+P*pe-1)+1,C,M)}else W.e=P,W.r=+M;return W}})();function E(a,y,f,g){var b,d,C,p,A;if(f==null?f=l:Re(f,0,8),!a.c)return a.toString();if(b=a.c[0],C=a.e,y==null)A=He(a.c),A=g==1||g==2&&(C<=h||C>=w)?xr(A,C):lt(A,C,"0");else if(a=Y(new c(a),y,f),d=a.e,A=He(a.c),p=A.length,g==1||g==2&&(y<=d||d<=h)){for(;p<y;A+="0",p++);A=xr(A,d)}else if(y-=C+(g===2&&d>C),A=lt(A,d,"0"),d+1>p){if(--y>0)for(A+=".";y--;A+="0");}else if(y+=d-p,y>0)for(d+1==p&&(A+=".");y--;A+="0");return a.s<0&&b?"-"+A:A}function H(a,y){for(var f,g,b=1,d=new c(a[0]);b<a.length;b++)g=new c(a[b]),(!g.s||(f=At(d,g))===y||f===0&&d.s===y)&&(d=g);return d}function F(a,y,f){for(var g=1,b=y.length;!y[--b];y.pop());for(b=y[0];b>=10;b/=10,g++);return(f=g+f*pe-1)>x?a.c=a.e=null:f<N?a.c=[a.e=0]:(a.e=f,a.c=y),a}n=(function(){var a=/^(-?)0([xbo])(?=\w[\w.]*$)/i,y=/^([^.]+)\.$/,f=/^\.([^.]+)$/,g=/^-?(Infinity|NaN)$/,b=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(d,C,p,A){var P,m=p?C:C.replace(b,"");if(g.test(m))d.s=isNaN(m)?null:m<0?-1:1;else{if(!p&&(m=m.replace(a,function(M,S,j){return P=(j=j.toLowerCase())=="x"?16:j=="b"?2:8,!A||A==P?S:M}),A&&(P=A,m=m.replace(y,"$1").replace(f,"0.$1")),C!=m))return new c(m,P);if(c.DEBUG)throw Error(qe+"Not a"+(A?" base "+A:"")+" number: "+C);d.s=null}d.c=d.e=null}})();function Y(a,y,f,g){var b,d,C,p,A,P,m,M=a.c,S=zn;if(M){e:{for(b=1,p=M[0];p>=10;p/=10,b++);if(d=y-b,d<0)d+=pe,C=y,A=M[P=0],m=ze(A/S[b-C-1]%10);else if(P=$n((d+1)/pe),P>=M.length)if(g){for(;M.length<=P;M.push(0));A=m=0,b=1,d%=pe,C=d-pe+1}else break e;else{for(A=p=M[P],b=1;p>=10;p/=10,b++);d%=pe,C=d-pe+b,m=C<0?0:ze(A/S[b-C-1]%10)}if(g=g||y<0||M[P+1]!=null||(C<0?A:A%S[b-C-1]),g=f<4?(m||g)&&(f==0||f==(a.s<0?3:2)):m>5||m==5&&(f==4||g||f==6&&(d>0?C>0?A/S[b-C]:0:M[P-1])%10&1||f==(a.s<0?8:7)),y<1||!M[0])return M.length=0,g?(y-=a.e+1,M[0]=S[(pe-y%pe)%pe],a.e=-y||0):M[0]=a.e=0,a;if(d==0?(M.length=P,p=1,P--):(M.length=P+1,p=S[pe-d],M[P]=C>0?ze(A/S[b-C]%S[C])*p:0),g)for(;;)if(P==0){for(d=1,C=M[0];C>=10;C/=10,d++);for(C=M[0]+=p,p=1;C>=10;C/=10,p++);d!=p&&(a.e++,M[0]==Xe&&(M[0]=1));break}else{if(M[P]+=p,M[P]!=Xe)break;M[P--]=0,p=1}for(d=M.length;M[--d]===0;M.pop());}a.e>x?a.c=a.e=null:a.e<N&&(a.c=[a.e=0])}return a}function X(a){var y,f=a.e;return f===null?a.toString():(y=He(a.c),y=f<=h||f>=w?xr(y,f):lt(y,f,"0"),a.s<0?"-"+y:y)}return i.absoluteValue=i.abs=function(){var a=new c(this);return a.s<0&&(a.s=1),a},i.comparedTo=function(a,y){return At(this,new c(a,y))},i.decimalPlaces=i.dp=function(a,y){var f,g,b,d=this;if(a!=null)return Re(a,0,Ne),y==null?y=l:Re(y,0,8),Y(new c(d),a+d.e+1,y);if(!(f=d.c))return null;if(g=((b=f.length-1)-Ge(this.e/pe))*pe,b=f[b])for(;b%10==0;b/=10,g--);return g<0&&(g=0),g},i.dividedBy=i.div=function(a,y){return e(this,new c(a,y),o,l)},i.dividedToIntegerBy=i.idiv=function(a,y){return e(this,new c(a,y),0,1)},i.exponentiatedBy=i.pow=function(a,y){var f,g,b,d,C,p,A,P,m,M=this;if(a=new c(a),a.c&&!a.isInteger())throw Error(qe+"Exponent not an integer: "+X(a));if(y!=null&&(y=new c(y)),p=a.e>14,!M.c||!M.c[0]||M.c[0]==1&&!M.e&&M.c.length==1||!a.c||!a.c[0])return m=new c(Math.pow(+X(M),p?a.s*(2-Tr(a)):+X(a))),y?m.mod(y):m;if(A=a.s<0,y){if(y.c?!y.c[0]:!y.s)return new c(NaN);g=!A&&M.isInteger()&&y.isInteger(),g&&(M=M.mod(y))}else{if(a.e>9&&(M.e>0||M.e<-1||(M.e==0?M.c[0]>1||p&&M.c[1]>=24e7:M.c[0]<8e13||p&&M.c[0]<=9999975e7)))return d=M.s<0&&Tr(a)?-0:0,M.e>-1&&(d=1/d),new c(A?1/d:d);U&&(d=$n(U/pe+2))}for(p?(f=new c(.5),A&&(a.s=1),P=Tr(a)):(b=Math.abs(+X(a)),P=b%2),m=new c(s);;){if(P){if(m=m.times(M),!m.c)break;d?m.c.length>d&&(m.c.length=d):g&&(m=m.mod(y))}if(b){if(b=ze(b/2),b===0)break;P=b%2}else if(a=a.times(f),Y(a,a.e+1,1),a.e>14)P=Tr(a);else{if(b=+X(a),b===0)break;P=b%2}M=M.times(M),d?M.c&&M.c.length>d&&(M.c.length=d):g&&(M=M.mod(y))}return g?m:(A&&(m=s.div(m)),y?m.mod(y):d?Y(m,U,l,C):m)},i.integerValue=function(a){var y=new c(this);return a==null?a=l:Re(a,0,8),Y(y,y.e+1,a)},i.isEqualTo=i.eq=function(a,y){return At(this,new c(a,y))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(a,y){return At(this,new c(a,y))>0},i.isGreaterThanOrEqualTo=i.gte=function(a,y){return(y=At(this,new c(a,y)))===1||y===0},i.isInteger=function(){return!!this.c&&Ge(this.e/pe)>this.c.length-2},i.isLessThan=i.lt=function(a,y){return At(this,new c(a,y))<0},i.isLessThanOrEqualTo=i.lte=function(a,y){return(y=At(this,new c(a,y)))===-1||y===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(a,y){var f,g,b,d,C=this,p=C.s;if(a=new c(a,y),y=a.s,!p||!y)return new c(NaN);if(p!=y)return a.s=-y,C.plus(a);var A=C.e/pe,P=a.e/pe,m=C.c,M=a.c;if(!A||!P){if(!m||!M)return m?(a.s=-y,a):new c(M?C:NaN);if(!m[0]||!M[0])return M[0]?(a.s=-y,a):new c(m[0]?C:l==3?-0:0)}if(A=Ge(A),P=Ge(P),m=m.slice(),p=A-P){for((d=p<0)?(p=-p,b=m):(P=A,b=M),b.reverse(),y=p;y--;b.push(0));b.reverse()}else for(g=(d=(p=m.length)<(y=M.length))?p:y,p=y=0;y<g;y++)if(m[y]!=M[y]){d=m[y]<M[y];break}if(d&&(b=m,m=M,M=b,a.s=-a.s),y=(g=M.length)-(f=m.length),y>0)for(;y--;m[f++]=0);for(y=Xe-1;g>p;){if(m[--g]<M[g]){for(f=g;f&&!m[--f];m[f]=y);--m[f],m[g]+=Xe}m[g]-=M[g]}for(;m[0]==0;m.splice(0,1),--P);return m[0]?F(a,m,P):(a.s=l==3?-1:1,a.c=[a.e=0],a)},i.modulo=i.mod=function(a,y){var f,g,b=this;return a=new c(a,y),!b.c||!a.s||a.c&&!a.c[0]?new c(NaN):!a.c||b.c&&!b.c[0]?new c(b):(k==9?(g=a.s,a.s=1,f=e(b,a,0,3),a.s=g,f.s*=g):f=e(b,a,0,k),a=b.minus(f.times(a)),!a.c[0]&&k==1&&(a.s=b.s),a)},i.multipliedBy=i.times=function(a,y){var f,g,b,d,C,p,A,P,m,M,S,j,K,W,ee,Q=this,le=Q.c,ue=(a=new c(a,y)).c;if(!le||!ue||!le[0]||!ue[0])return!Q.s||!a.s||le&&!le[0]&&!ue||ue&&!ue[0]&&!le?a.c=a.e=a.s=null:(a.s*=Q.s,!le||!ue?a.c=a.e=null:(a.c=[0],a.e=0)),a;for(g=Ge(Q.e/pe)+Ge(a.e/pe),a.s*=Q.s,A=le.length,M=ue.length,A<M&&(K=le,le=ue,ue=K,b=A,A=M,M=b),b=A+M,K=[];b--;K.push(0));for(W=Xe,ee=bt,b=M;--b>=0;){for(f=0,S=ue[b]%ee,j=ue[b]/ee|0,C=A,d=b+C;d>b;)P=le[--C]%ee,m=le[C]/ee|0,p=j*P+m*S,P=S*P+p%ee*ee+K[d]+f,f=(P/W|0)+(p/ee|0)+j*m,K[d--]=P%W;K[d]=f}return f?++g:K.splice(0,1),F(a,K,g)},i.negated=function(){var a=new c(this);return a.s=-a.s||null,a},i.plus=function(a,y){var f,g=this,b=g.s;if(a=new c(a,y),y=a.s,!b||!y)return new c(NaN);if(b!=y)return a.s=-y,g.minus(a);var d=g.e/pe,C=a.e/pe,p=g.c,A=a.c;if(!d||!C){if(!p||!A)return new c(b/0);if(!p[0]||!A[0])return A[0]?a:new c(p[0]?g:b*0)}if(d=Ge(d),C=Ge(C),p=p.slice(),b=d-C){for(b>0?(C=d,f=A):(b=-b,f=p),f.reverse();b--;f.push(0));f.reverse()}for(b=p.length,y=A.length,b-y<0&&(f=A,A=p,p=f,y=b),b=0;y;)b=(p[--y]=p[y]+A[y]+b)/Xe|0,p[y]=Xe===p[y]?0:p[y]%Xe;return b&&(p=[b].concat(p),++C),F(a,p,C)},i.precision=i.sd=function(a,y){var f,g,b,d=this;if(a!=null&&a!==!!a)return Re(a,1,Ne),y==null?y=l:Re(y,0,8),Y(new c(d),a,y);if(!(f=d.c))return null;if(b=f.length-1,g=b*pe+1,b=f[b]){for(;b%10==0;b/=10,g--);for(b=f[0];b>=10;b/=10,g++);}return a&&d.e+1>g&&(g=d.e+1),g},i.shiftedBy=function(a){return Re(a,-Hn,Hn),this.times("1e"+a)},i.squareRoot=i.sqrt=function(){var a,y,f,g,b,d=this,C=d.c,p=d.s,A=d.e,P=o+4,m=new c("0.5");if(p!==1||!C||!C[0])return new c(!p||p<0&&(!C||C[0])?NaN:C?d:1/0);if(p=Math.sqrt(+X(d)),p==0||p==1/0?(y=He(C),(y.length+A)%2==0&&(y+="0"),p=Math.sqrt(+y),A=Ge((A+1)/2)-(A<0||A%2),p==1/0?y="5e"+A:(y=p.toExponential(),y=y.slice(0,y.indexOf("e")+1)+A),f=new c(y)):f=new c(p+""),f.c[0]){for(A=f.e,p=A+P,p<3&&(p=0);;)if(b=f,f=m.times(b.plus(e(d,b,P,1))),He(b.c).slice(0,p)===(y=He(f.c)).slice(0,p))if(f.e<A&&--p,y=y.slice(p-3,p+1),y=="9999"||!g&&y=="4999"){if(!g&&(Y(b,b.e+o+2,0),b.times(b).eq(d))){f=b;break}P+=4,p+=4,g=1}else{(!+y||!+y.slice(1)&&y.charAt(0)=="5")&&(Y(f,f.e+o+2,1),a=!f.times(f).eq(d));break}}return Y(f,f.e+o+1,l,a)},i.toExponential=function(a,y){return a!=null&&(Re(a,0,Ne),a++),E(this,a,y,1)},i.toFixed=function(a,y){return a!=null&&(Re(a,0,Ne),a=a+this.e+1),E(this,a,y)},i.toFormat=function(a,y,f){var g,b=this;if(f==null)a!=null&&y&&typeof y=="object"?(f=y,y=null):a&&typeof a=="object"?(f=a,a=y=null):f=I;else if(typeof f!="object")throw Error(qe+"Argument not an object: "+f);if(g=b.toFixed(a,y),b.c){var d,C=g.split("."),p=+f.groupSize,A=+f.secondaryGroupSize,P=f.groupSeparator||"",m=C[0],M=C[1],S=b.s<0,j=S?m.slice(1):m,K=j.length;if(A&&(d=p,p=A,A=d,K-=d),p>0&&K>0){for(d=K%p||p,m=j.substr(0,d);d<K;d+=p)m+=P+j.substr(d,p);A>0&&(m+=P+j.slice(d)),S&&(m="-"+m)}g=M?m+(f.decimalSeparator||"")+((A=+f.fractionGroupSize)?M.replace(new RegExp("\\d{"+A+"}\\B","g"),"$&"+(f.fractionGroupSeparator||"")):M):m}return(f.prefix||"")+g+(f.suffix||"")},i.toFraction=function(a){var y,f,g,b,d,C,p,A,P,m,M,S,j=this,K=j.c;if(a!=null&&(p=new c(a),!p.isInteger()&&(p.c||p.s!==1)||p.lt(s)))throw Error(qe+"Argument "+(p.isInteger()?"out of range: ":"not an integer: ")+X(p));if(!K)return new c(j);for(y=new c(s),P=f=new c(s),g=A=new c(s),S=He(K),d=y.e=S.length-j.e-1,y.c[0]=zn[(C=d%pe)<0?pe+C:C],a=!a||p.comparedTo(y)>0?d>0?y:P:p,C=x,x=1/0,p=new c(S),A.c[0]=0;m=e(p,y,0,1),b=f.plus(m.times(g)),b.comparedTo(a)!=1;)f=g,g=b,P=A.plus(m.times(b=P)),A=b,y=p.minus(m.times(b=y)),p=b;return b=e(a.minus(f),g,0,1),A=A.plus(b.times(P)),f=f.plus(b.times(g)),A.s=P.s=j.s,d=d*2,M=e(P,g,d,l).minus(j).abs().comparedTo(e(A,f,d,l).minus(j).abs())<1?[P,g]:[A,f],x=C,M},i.toNumber=function(){return+X(this)},i.toPrecision=function(a,y){return a!=null&&Re(a,1,Ne),E(this,a,y,2)},i.toString=function(a){var y,f=this,g=f.s,b=f.e;return b===null?g?(y="Infinity",g<0&&(y="-"+y)):y="NaN":(a==null?y=b<=h||b>=w?xr(He(f.c),b):lt(He(f.c),b,"0"):a===10&&u?(f=Y(new c(f),o+b+1,l),y=lt(He(f.c),f.e,"0")):(Re(a,2,_.length,"Base"),y=t(lt(He(f.c),b,"0"),10,a,g,!0)),g<0&&f.c[0]&&(y="-"+y)),y},i.valueOf=i.toJSON=function(){return X(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,r!=null&&c.set(r),c}function Ge(r){var e=r|0;return r>0||r===e?e:e-1}function He(r){for(var e,t,n=1,i=r.length,s=r[0]+"";n<i;){for(e=r[n++]+"",t=pe-e.length;t--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function At(r,e){var t,n,i=r.c,s=e.c,o=r.s,l=e.s,h=r.e,w=e.e;if(!o||!l)return null;if(t=i&&!i[0],n=s&&!s[0],t||n)return t?n?0:-l:o;if(o!=l)return o;if(t=o<0,n=h==w,!i||!s)return n?0:!i^t?1:-1;if(!n)return h>w^t?1:-1;for(l=(h=i.length)<(w=s.length)?h:w,o=0;o<l;o++)if(i[o]!=s[o])return i[o]>s[o]^t?1:-1;return h==w?0:h>w^t?1:-1}function Re(r,e,t,n){if(r<e||r>t||r!==ze(r))throw Error(qe+(n||"Argument")+(typeof r=="number"?r<e||r>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(r))}function Tr(r){var e=r.c.length-1;return Ge(r.e/pe)==e&&r.c[e]%2!=0}function xr(r,e){return(r.length>1?r.charAt(0)+"."+r.slice(1):r)+(e<0?"e":"e+")+e}function lt(r,e,t){var n,i;if(e<0){for(i=t+".";++e;i+=t);r=i+r}else if(n=r.length,++e>n){for(i=t,e-=n;--e;i+=t);r+=i}else e<n&&(r=r.slice(0,e)+"."+r.slice(e));return r}bs();class zl extends Error{}zl.prototype.name="InvalidTokenError";const Or={IFRAME_STATUS:"iframe_status",CLOSE_WINDOW:"close_window",USER_LOGGED_IN:"user_logged_in",USER_LOGGED_OUT:"user_logged_out"},ct={LOGOUT:"logout",WALLET_INSTANCE_ID:"wallet_instance_id",USER_INFO:"user_info",SET_PROVIDER:"set_provider",TOPUP:"topup",IFRAME_STATUS:"iframe_status",CLOSED_WINDOW:"closed_window",WINDOW_BLOCKED:"window_blocked",GET_PROVIDER_STATE:"get_provider_state",LOGIN_WITH_PRIVATE_KEY:"login_with_private_key",SHOW_WALLET_CONNECT:"show_wallet_connect",SHOW_CHECKOUT:"show_checkout",SHOW_WALLET_UI:"show_wallet_ui",LOGIN_WITH_SESSION_ID:"login_with_session_id"},Gl={GET_PROVIDER_STATE:"wallet_get_provider_state"},Gn={ACCOUNTS_CHANGED:"wallet_accounts_changed",CHAIN_CHANGED:"wallet_chain_changed",UNLOCK_STATE_CHANGED:"wallet_unlock_state_changed"};function Vl(r){return function(t,n,i){i(s=>{n.error&&Mr.warn(`Error in RPC response:
`,n),!t.isTorusInternal&&(Mr.info(`RPC (${r.origin}):`,t,"->",n),s())})}}var Vn={},Rt={},Wo;function gi(){if(Wo)return Rt;Wo=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.EthereumProviderError=Rt.EthereumRpcError=void 0;const r=ts();class e extends Error{constructor(o,l,h){if(!Number.isInteger(o))throw new Error('"code" must be an integer.');if(!l||typeof l!="string")throw new Error('"message" must be a nonempty string.');super(l),this.code=o,h!==void 0&&(this.data=h)}serialize(){const o={code:this.code,message:this.message};return this.data!==void 0&&(o.data=this.data),this.stack&&(o.stack=this.stack),o}toString(){return r.default(this.serialize(),i,2)}}Rt.EthereumRpcError=e;class t extends e{constructor(o,l,h){if(!n(o))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(o,l,h)}}Rt.EthereumProviderError=t;function n(s){return Number.isInteger(s)&&s>=1e3&&s<=4999}function i(s,o){if(o!=="[Circular]")return o}return Rt}var Kn={},It={},Fo;function pi(){return Fo||(Fo=1,Object.defineProperty(It,"__esModule",{value:!0}),It.errorValues=It.errorCodes=void 0,It.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},It.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}),It}var $o;function ys(){return $o||($o=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.serializeError=r.isValidCode=r.getMessageFromCode=r.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=pi(),t=gi(),n=e.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",s={code:n,message:o(n)};r.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function o(v,k=i){if(Number.isInteger(v)){const U=v.toString();if(x(e.errorValues,U))return e.errorValues[U].message;if(w(v))return r.JSON_RPC_SERVER_ERROR_MESSAGE}return k}r.getMessageFromCode=o;function l(v){if(!Number.isInteger(v))return!1;const k=v.toString();return!!(e.errorValues[k]||w(v))}r.isValidCode=l;function h(v,{fallbackError:k=s,shouldIncludeStack:U=!1}={}){var I,_;if(!k||!Number.isInteger(k.code)||typeof k.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(v instanceof t.EthereumRpcError)return v.serialize();const u={};if(v&&typeof v=="object"&&!Array.isArray(v)&&x(v,"code")&&l(v.code)){const E=v;u.code=E.code,E.message&&typeof E.message=="string"?(u.message=E.message,x(E,"data")&&(u.data=E.data)):(u.message=o(u.code),u.data={originalError:N(v)})}else{u.code=k.code;const E=(I=v)===null||I===void 0?void 0:I.message;u.message=E&&typeof E=="string"?E:k.message,u.data={originalError:N(v)}}const c=(_=v)===null||_===void 0?void 0:_.stack;return U&&v&&c&&typeof c=="string"&&(u.stack=c),u}r.serializeError=h;function w(v){return v>=-32099&&v<=-32e3}function N(v){return v&&typeof v=="object"&&!Array.isArray(v)?Object.assign({},v):v}function x(v,k){return Object.prototype.hasOwnProperty.call(v,k)}})(Kn)),Kn}var Jt={},Ho;function Kl(){if(Ho)return Jt;Ho=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.ethErrors=void 0;const r=gi(),e=ys(),t=pi();Jt.ethErrors={rpc:{parse:o=>n(t.errorCodes.rpc.parse,o),invalidRequest:o=>n(t.errorCodes.rpc.invalidRequest,o),invalidParams:o=>n(t.errorCodes.rpc.invalidParams,o),methodNotFound:o=>n(t.errorCodes.rpc.methodNotFound,o),internal:o=>n(t.errorCodes.rpc.internal,o),server:o=>{if(!o||typeof o!="object"||Array.isArray(o))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:l}=o;if(!Number.isInteger(l)||l>-32005||l<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return n(l,o)},invalidInput:o=>n(t.errorCodes.rpc.invalidInput,o),resourceNotFound:o=>n(t.errorCodes.rpc.resourceNotFound,o),resourceUnavailable:o=>n(t.errorCodes.rpc.resourceUnavailable,o),transactionRejected:o=>n(t.errorCodes.rpc.transactionRejected,o),methodNotSupported:o=>n(t.errorCodes.rpc.methodNotSupported,o),limitExceeded:o=>n(t.errorCodes.rpc.limitExceeded,o)},provider:{userRejectedRequest:o=>i(t.errorCodes.provider.userRejectedRequest,o),unauthorized:o=>i(t.errorCodes.provider.unauthorized,o),unsupportedMethod:o=>i(t.errorCodes.provider.unsupportedMethod,o),disconnected:o=>i(t.errorCodes.provider.disconnected,o),chainDisconnected:o=>i(t.errorCodes.provider.chainDisconnected,o),custom:o=>{if(!o||typeof o!="object"||Array.isArray(o))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:l,message:h,data:w}=o;if(!h||typeof h!="string")throw new Error('"message" must be a nonempty string');return new r.EthereumProviderError(l,h,w)}}};function n(o,l){const[h,w]=s(l);return new r.EthereumRpcError(o,h||e.getMessageFromCode(o),w)}function i(o,l){const[h,w]=s(l);return new r.EthereumProviderError(o,h||e.getMessageFromCode(o),w)}function s(o){if(o){if(typeof o=="string")return[o];if(typeof o=="object"&&!Array.isArray(o)){const{message:l,data:h}=o;if(l&&typeof l!="string")throw new Error("Must specify string message.");return[l||void 0,h]}}return[]}return Jt}var zo;function Yl(){return zo||(zo=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getMessageFromCode=r.serializeError=r.EthereumProviderError=r.EthereumRpcError=r.ethErrors=r.errorCodes=void 0;const e=gi();Object.defineProperty(r,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(r,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const t=ys();Object.defineProperty(r,"serializeError",{enumerable:!0,get:function(){return t.serializeError}}),Object.defineProperty(r,"getMessageFromCode",{enumerable:!0,get:function(){return t.getMessageFromCode}});const n=Kl();Object.defineProperty(r,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const i=pi();Object.defineProperty(r,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})})(Vn)),Vn}var _t=Yl(),Yn,Go;function Jl(){return Go||(Go=1,Yn=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,i,s;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!r(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=n;i--!==0;){var o=s[i];if(!r(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}),Yn}var Zl=Jl();const Xl=qt(Zl);var Ql="2.1.0";function _s(r){return r!==null&&typeof r=="object"&&typeof r.pipe=="function"}function eu(r){return _s(r)&&r.writable!==!1&&typeof r._write=="function"&&typeof r._writableState=="object"}function tu(r){return _s(r)&&r.readable!==!1&&typeof r._read=="function"&&typeof r._readableState=="object"}function ru(r){return eu(r)&&tu(r)}var nt={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",unsupportedSync:r=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${r} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:r=>`Invalid options. Received: { maxEventListeners: ${r}}`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:r=>`'args.logger' must include required method '${r}'.`},info:{connected:r=>`Torus: Connected to chain with ID "${r}".`}};const nu={PRODUCTION:"production"},Qt={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},iu={en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies benötigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"継続する",actionRequired:"認証が必要です",pendingAction:"続行をクリックして、ポップアップでリクエストを続行します",cookiesRequired:"必要なクッキー",enableCookies:"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。",clickHere:"詳しくは"}},ko:{embed:{continue:"계속하다",actionRequired:"승인 필요",pendingAction:"팝업에서 요청을 진행하려면 계속을 클릭하십시오.",cookiesRequired:"쿠키 필요",enableCookies:"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.",clickHere:"더 많은 정보"}},zh:{embed:{continue:"继续",actionRequired:"需要授权",pendingAction:"单击继续以在弹出窗口中继续您的请求",cookiesRequired:"必填Cookie",enableCookies:"请在您的浏览器首选项中启用cookie以访问Torus。",clickHere:"更多信息"}}};var wi={translations:iu,localStorageKeyPrefix:"torus-"},Ee=Mr.getLogger("solana-embed");function ou(){return(r,e,t)=>{(typeof r.method!="string"||!r.method)&&(e.error=_t.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:r})),t(n=>{const{error:i}=e;return i&&Ee.error(`Torus - RPC Error: ${i.message}`,i),n()})}}function su(r,e,t){let n=`Torus: Lost connection to "${r}".`;e?.stack&&(n+=`
${e.stack}`),Ee.warn(n),t&&t.listenerCount("error")>0&&t.emit("error",n)}const Nr=()=>Math.random().toString(36).slice(2),ms=async r=>{let e,t;switch(r){case"testing":e="https://solana-testing.tor.us",t="debug";break;case"development":e="http://localhost:8080",t="debug";break;default:e="https://solana.tor.us",t="error";break}return{torusUrl:e,logLevel:t}},au=()=>{let r=window.navigator.language||"en-US";const e=r.split("-");return r=Object.prototype.hasOwnProperty.call(wi.translations,e[0])?e[0]:"en",r},lu={height:660,width:375},uu={height:740,width:1315},fu={height:700,width:1200},Es={height:600,width:400};function cu(r){let e;try{e=window[r];const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(t){const n=t;return n&&(n.code===22||n.code===1014||n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&e.length!==0}}function er(r){let{width:e,height:t}=r;const n=window.screenLeft!==void 0?window.screenLeft:window.screenX,i=window.screenTop!==void 0?window.screenTop:window.screenY,s=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,o=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,l=1,h=Math.abs((s-e)/2/l+n),w=Math.abs((o-t)/2/l+i);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${t/l},width=${e/l},top=${w},left=${h}`}class Ss extends Wr{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:i="provider"}=t;if(super(),ge(this,"isTorus",void 0),ge(this,"_rpcEngine",void 0),ge(this,"jsonRpcConnectionEvents",void 0),ge(this,"_state",void 0),!ru(e))throw new Error(nt.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(n),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);const s=new Ba;uo(e,s,e,this._handleStreamDisconnect.bind(this,"Torus")),s.ignoreStream("phishing");const o=Pa();uo(o.stream,s.createStream(i),o.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));const l=new ut;l.push(La()),l.push(ou()),l.push(Vl({origin:location.origin})),l.push(o.middleware),this._rpcEngine=l,this.jsonRpcConnectionEvents=o.events}async request(e){if(!e||typeof e!="object"||Array.isArray(e))throw _t.ethErrors.rpc.invalidRequest({message:nt.errors.invalidRequestArgs(),data:e});const{method:t,params:n}=e;if(typeof t!="string"||t.length===0)throw _t.ethErrors.rpc.invalidRequest({message:nt.errors.invalidRequestMethod(),data:e});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw _t.ethErrors.rpc.invalidRequest({message:nt.errors.invalidRequestParams(),data:e});return new Promise((i,s)=>{this._rpcRequest({method:t,params:n},Zn(i,s))})}send(e,t){this._rpcRequest(e,t)}sendAsync(e){return new Promise((t,n)=>{this._rpcRequest(e,Zn(t,n))})}_handleStreamDisconnect(e,t){su(e,t,this),this._handleDisconnect(!1,t?t.message:void 0)}}const Bt=r=>{const e=window.document.createElement("template"),t=r.trim();return e.innerHTML=t,e.content.firstChild};function Cr(r){return r.version===void 0}class vs extends Wr{constructor(e){let{url:t,target:n,features:i,timeout:s=3e4}=e;super(),ge(this,"url",void 0),ge(this,"target",void 0),ge(this,"features",void 0),ge(this,"window",void 0),ge(this,"windowTimer",void 0),ge(this,"iClosedWindow",void 0),ge(this,"timeout",void 0),this.url=t,this.target=n||"_blank",this.features=i||er(fu),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=s,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){return this.window=window.open(this.url.href,this.target,this.features),this.window?.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}}class zr extends Ss{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:i="provider"}=t;super(e,{maxEventListeners:n,jsonRpcStreamName:i}),ge(this,"embedTranslations",void 0),ge(this,"torusUrl",void 0),ge(this,"dappStorageKey",void 0),ge(this,"windowRefs",void 0),ge(this,"tryWindowHandle",void 0),ge(this,"torusAlertContainer",void 0),ge(this,"torusIframe",void 0),this._state=Ke({},zr._defaultState),this.torusUrl="",this.dappStorageKey="";const s=wi.translations[au()];this.embedTranslations=s.embed,this.windowRefs={},this.on("connect",()=>{this._state.isConnected=!0});const o=l=>{const{method:h,params:w}=l;if(h===Or.IFRAME_STATUS){const{isFullScreen:N,rid:x}=w;this._displayIframe({isFull:N,rid:x})}else if(h==="create_window"){const{windowId:N,url:x}=w;this._createPopupBlockAlert(N,x)}else if(h===Or.CLOSE_WINDOW)this._handleCloseWindow(w);else if(h===Or.USER_LOGGED_IN){const{currentLoginProvider:N}=w;this._state.isLoggedIn=!0,this._state.currentLoginProvider=N}else h===Or.USER_LOGGED_OUT&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())};this.jsonRpcConnectionEvents.on("notification",o)}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(e){try{const{torusUrl:t,dappStorageKey:n,torusAlertContainer:i,torusIframe:s}=e;this.torusUrl=t,this.dappStorageKey=n,this.torusAlertContainer=i,this.torusIframe=s,this.torusIframe.addEventListener("load",()=>{this._state.isIFrameFullScreen||this._displayIframe()});const{currentLoginProvider:o,isLoggedIn:l}=await this.request({method:ct.GET_PROVIDER_STATE,params:[]});this._handleConnect(o,l)}catch(t){Ee.error("Torus: Failed to get initial state. Please report this bug.",t)}finally{Ee.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(e){let{url:t,target:n,features:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=new URL(t||`${this.torusUrl}/redirect?windowId=${e}`);this.dappStorageKey&&(s.hash?s.hash+=`&dappStorageKey=${this.dappStorageKey}`:s.hash=`#dappStorageKey=${this.dappStorageKey}`);const o=new vs({url:s,target:n,features:i});if(o.open(),!o.window){this._createPopupBlockAlert(e,s.href);return}this.windowRefs[e]=o,this.request({method:"opened_window",params:{windowId:e}}),o.once("close",()=>{delete this.windowRefs[e],this.request({method:ct.CLOSED_WINDOW,params:{windowId:e}})})}_displayIframe(){let{isFull:e=!1,rid:t=""}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={};if(e)n.display="block",n.width="100%",n.height="100%",n.top="0px",n.right="0px",n.left="0px",n.bottom="0px";else switch(n.display=this._state.torusWidgetVisibility?"block":"none",n.height="70px",n.width="70px",this._state.buttonPosition){case Qt.TOP_LEFT:n.top="0px",n.left="0px",n.right="auto",n.bottom="auto";break;case Qt.TOP_RIGHT:n.top="0px",n.right="0px",n.left="auto",n.bottom="auto";break;case Qt.BOTTOM_RIGHT:n.bottom="0px",n.right="0px",n.top="auto",n.left="auto";break;case Qt.BOTTOM_LEFT:default:n.bottom="0px",n.left="0px",n.top="auto",n.right="auto";break}Object.assign(this.torusIframe.style,n),this._state.isIFrameFullScreen=e,this.request({method:ct.IFRAME_STATUS,params:{isIFrameFullScreen:e,rid:t}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(e,t){const n=t,i=e;Array.isArray(i)||i.jsonrpc||(i.jsonrpc="2.0"),this.tryWindowHandle(i,n)}_handleConnect(e,t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider:e,isLoggedIn:t}),Ee.debug(nt.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){this._state.isConnected=!1;let n;e?(n=new _t.EthereumRpcError(1013,t||nt.errors.disconnected()),Ee.debug(n)):(n=new _t.EthereumRpcError(1011,t||nt.errors.permanentlyDisconnected()),Ee.error(n),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleCloseWindow(e){const{windowId:t}=e;this.windowRefs[t]&&(this.windowRefs[t].close(),delete this.windowRefs[t])}async _createPopupBlockAlert(e,t){const n=this.getLogoUrl(),i=Bt(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${n}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),s=Bt(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),o=Bt('<div id="torusAlert__btn-container"></div>');o.appendChild(s),i.appendChild(o);const l=()=>{s.addEventListener("click",()=>{this._handleWindow(e,{url:t,target:"_blank",features:er(Es)}),i.remove(),this.torusAlertContainer.children.length===0&&(this.torusAlertContainer.style.display="none")})};(()=>{this.torusAlertContainer.appendChild(i)})(),l(),this.torusAlertContainer.style.display="block"}getLogoUrl(){return`${this.torusUrl}/images/torus_icon-blue.svg`}}ge(zr,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});class Gr extends Ss{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:i="provider"}=t;super(e,{maxEventListeners:n,jsonRpcStreamName:i}),ge(this,"chainId",void 0),ge(this,"selectedAddress",void 0),ge(this,"tryWindowHandle",void 0),this._state=Ke({},Gr._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",()=>{this._state.isConnected=!0});const s=o=>{const{method:l,params:h}=o;l===Gn.ACCOUNTS_CHANGED?this._handleAccountsChanged(h):l===Gn.UNLOCK_STATE_CHANGED?this._handleUnlockStateChanged(h):l===Gn.CHAIN_CHANGED&&this._handleChainChanged(h)};this.jsonRpcConnectionEvents.on("notification",s)}isConnected(){return this._state.isConnected}async _initializeState(){try{const{accounts:e,chainId:t,isUnlocked:n}=await this.request({method:Gl.GET_PROVIDER_STATE,params:[]});this.emit("connect",{chainId:t}),this._handleChainChanged({chainId:t}),this._handleUnlockStateChanged({accounts:e,isUnlocked:n}),this._handleAccountsChanged(e)}catch(e){Ee.error("Torus: Failed to get initial state. Please report this bug.",e)}finally{Ee.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=t;const s=e;if(!Array.isArray(s)){if(s.jsonrpc||(s.jsonrpc="2.0"),s.method==="solana_accounts"||s.method==="solana_requestAccounts")i=(o,l)=>{this._handleAccountsChanged(l.result||[],s.method==="solana_accounts",n),t(o,l)};else if(s.method==="wallet_getProviderState"){this._rpcEngine.handle(e,i);return}}this.tryWindowHandle(s,i)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),Ee.debug(nt.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){this._state.isConnected=!1;let n;e?(n=new _t.EthereumRpcError(1013,t||nt.errors.disconnected()),Ee.debug(n)):(n=new _t.EthereumRpcError(1011,t||nt.errors.permanentlyDisconnected()),Ee.error(n),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleAccountsChanged(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=e;Array.isArray(i)||(Ee.error("Torus: Received non-array accounts parameter. Please report this bug.",i),i=[]);for(const s of e)if(typeof s!="string"){Ee.error("Torus: Received non-string account. Please report this bug.",e),i=[];break}Xl(this._state.accounts,i)||(t&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!n&&Ee.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',i),this._state.accounts=i,this.emit("accountsChanged",i)),this.selectedAddress!==i[0]&&(this.selectedAddress=i[0]||null)}_handleChainChanged(){let{chainId:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!e){Ee.error("Torus: Received invalid network parameters. Please report this bug.",{chainId:e});return}e==="loading"?this._handleDisconnect(!0):(this._handleConnect(e),e!==this.chainId&&(this.chainId=e,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts:e,isUnlocked:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="boolean"){Ee.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:t});return}t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e||[]))}}ge(Gr,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});function Vo(r){return new Promise((e,t)=>{try{const n=document.createElement("img");n.onload=()=>e(!0),n.onerror=()=>e(!1),n.src=r}catch(n){t(n)}})}const du=r=>{const{document:e}=r,t=e.querySelector('head > meta[property="og:site_name"]');if(t)return t.content;const n=e.querySelector('head > meta[name="title"]');return n?n.content:e.title&&e.title.length>0?e.title:r.location.hostname};async function hu(r){try{const{document:e}=r;let t=e.querySelector('head > link[rel="shortcut icon"]');return t&&await Vo(t.href)||(t=Array.from(e.querySelectorAll('head > link[rel="icon"]')).find(n=>!!n.href),t&&await Vo(t.href))?t.href:""}catch{return""}}const gu=async()=>({name:du(window),icon:await hu(window)}),pu=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],wu=[ct.SET_PROVIDER],bu=cu("localStorage");(async function(){try{if(typeof document>"u")return;const e=document.createElement("link"),{torusUrl:t}=await ms("production");e.href=`${t}/frame`,e.crossOrigin="anonymous",e.type="text/html",e.rel="prefetch",e.relList&&e.relList.supports&&e.relList.supports("prefetch")&&document.head.appendChild(e)}catch(e){Ee.warn(e)}})();class Eu{constructor(){let{modalZIndex:e=99999}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ge(this,"isInitialized",void 0),ge(this,"torusAlert",void 0),ge(this,"modalZIndex",void 0),ge(this,"alertZIndex",void 0),ge(this,"requestedLoginProvider",void 0),ge(this,"provider",void 0),ge(this,"communicationProvider",void 0),ge(this,"dappStorageKey",void 0),ge(this,"isTopupHidden",!1),ge(this,"torusAlertContainer",void 0),ge(this,"torusUrl",void 0),ge(this,"torusIframe",void 0),ge(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=e,this.alertZIndex=e+1e3,this.dappStorageKey=""}get isLoggedIn(){return this.communicationProvider?this.communicationProvider.isLoggedIn:!1}async init(){let{buildEnv:e=nu.PRODUCTION,enableLogging:t=!1,network:n,showTorusButton:i=!1,useLocalStorage:s=!1,buttonPosition:o=Qt.BOTTOM_LEFT,apiKey:l="torus-default",extraParams:h={},whiteLabel:w}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:N,logLevel:x}=await ms(e);Ee.enableAll(),Ee.info(N,"url loaded"),Ee.info(`Solana Embed Version :${Ql}`),this.torusUrl=N,Ee.setDefaultLevel(x),t?Ee.enableAll():Ee.disableAll();const v=this.handleDappStorageKey(s),k=new URL(N);k.pathname.endsWith("/")?k.pathname+="frame":k.pathname+="/frame";const U=new URLSearchParams;return v&&U.append("dappStorageKey",v),U.append("origin",window.location.origin),k.hash=U.toString(),this.torusIframe=Bt(`<iframe
        id="torusIframe"
        class="torusIframe"
        src="${k.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}"
      ></iframe>`),this.torusAlertContainer=Bt(`<div id="torusAlertContainer" style="display:none; z-index: ${this.alertZIndex.toString()}"></div>`),this.styleLink=Bt(`<link href="${N}/css/widget.css" rel="stylesheet" type="text/css">`),new Promise((I,_)=>{try{this.torusIframe.addEventListener("load",async()=>{const u=await gu();this.torusIframe.contentWindow.postMessage({buttonPosition:o,apiKey:l,network:n,dappMetadata:u,extraParams:h,whiteLabel:w},k.origin),await this._setupWeb3({torusUrl:N}),i&&this.showTorusButton(),w?.topupHide?this.isTopupHidden=w.topupHide:this.hideTorusButton(),this.isInitialized=!0,window.torus=this,I()}),window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)}catch(u){_(u)}})}async login(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");try{this.requestedLoginProvider=e.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});const t=await new Promise((n,i)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,e.login_hint]},Zn(n,i))});if(Array.isArray(t)&&t.length>0)return t;throw new Error("Login failed")}catch(t){throw Ee.error("login failed",t),t}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async loginWithPrivateKey(e){if(!this.isInitialized)throw new Error("Call init() first");const{privateKey:t,userInfo:n}=e,{success:i}=await this.communicationProvider.request({method:"login_with_private_key",params:{privateKey:t,userInfo:n}});if(!i)throw new Error("Login Failed")}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:ct.LOGOUT,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function e(t){return t instanceof Element||t instanceof Document}e(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),e(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),e(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(e){await this.communicationProvider.request({method:ct.SET_PROVIDER,params:Ke({},e)})}async showWallet(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await this.communicationProvider.request({method:ct.WALLET_INSTANCE_ID,params:[]}),i=e?`/${e}`:"",s=new URL(`${this.torusUrl}/wallet${i}`);s.searchParams.append("instanceId",n),Object.keys(t).forEach(l=>{s.searchParams.append(l,t[l])}),this.dappStorageKey&&(s.hash=`#dappStorageKey=${this.dappStorageKey}`),new vs({url:s,features:er(uu)}).open()}async getUserInfo(){return await this.communicationProvider.request({method:ct.USER_INFO,params:[]})}async initiateTopup(e,t){if(!this.isInitialized)throw new Error("Torus is not initialized");const n=Nr();return this.communicationProvider._handleWindow(n),await this.communicationProvider.request({method:ct.TOPUP,params:{provider:e,params:t,windowId:n}})}async getAccounts(){return await this.provider.request({method:"getAccounts",params:[]})}async sendTransaction(e){const t=Cr(e),n=t?e.serialize({requireAllSignatures:!1}).toString("hex"):et.from(e.serialize()).toString("hex");return await this.provider.request({method:"send_transaction",params:{message:n,isLegacyTransaction:t}})}async signAndSendTransaction(e,t){const n=Cr(e),i=n?e.serialize({requireAllSignatures:!1}).toString("hex"):et.from(e.serialize()).toString("hex");return{signature:await this.provider.request({method:"send_transaction",params:{message:i,options:t,isLegacyTransaction:n}})}}async signTransaction(e){const t=Cr(e),n=t?e.serializeMessage().toString("hex"):et.from(e.message.serialize()).toString("hex"),i=await this.provider.request({method:"sign_transaction",params:{message:n,messageOnly:!0,isLegacyTransaction:t}}),s=JSON.parse(i),o={publicKey:new Ti(s.publicKey),signature:et.from(s.signature,"hex")};return e.addSignature(o.publicKey,o.signature),e}async signAllTransactions(e){let t;const n=e.map(o=>(t=Cr(o),t?o.serializeMessage().toString("hex"):et.from(o.message.serialize()).toString("hex"))),s=(await this.provider.request({method:"sign_all_transactions",params:{message:n,messageOnly:!0,isLegacyTransaction:t}})).map(o=>{const l=JSON.parse(o);return{publicKey:new Ti(l.publicKey),signature:et.from(l.signature,"hex")}});return e.forEach((o,l)=>(o.addSignature(s[l].publicKey,s[l].signature),o)),e}async signMessage(e){return await this.provider.request({method:"sign_message",params:{data:e}})}async getGaslessPublicKey(){return await this.provider.request({method:"get_gasless_public_key",params:[]})}handleDappStorageKey(e){const t=`${wi.localStorageKeyPrefix}${window.location.hostname}`;let n="";if(bu&&e){const i=window.localStorage.getItem(t);if(i)n=i;else{const s=`torus-app-${Nr()}`;window.localStorage.setItem(t,s),n=s}}return this.dappStorageKey=n,n}async _setupWeb3(e){Ee.info("setupWeb3 running");const t=new ho({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),n=new ho({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),i=new Gr(t,{}),s=new zr(n,{});i.tryWindowHandle=(w,N)=>{const x=w;if(!Array.isArray(x)&&pu.includes(x.method)){if(!this.communicationProvider.isLoggedIn)throw new Error("User Not Logged In");const v=Nr();s._handleWindow(v,{target:"_blank",features:er(Es)}),x.windowId=v}i._rpcEngine.handle(x,N)},s.tryWindowHandle=(w,N)=>{const x=w;if(!Array.isArray(x)&&wu.includes(x.method)){const v=Nr();s._handleWindow(v,{target:"_blank",features:er(lu)}),x.params.windowId=v}s._rpcEngine.handle(x,N)};const o=w=>{const N=i[w],x=this;i[w]=function(k,U){const{method:I,params:_=[]}=k;if(I==="solana_requestAccounts"){if(!U)return x.login({loginProvider:_[0]});x.login({loginProvider:_[0]}).then(u=>U(null,u)).catch(u=>U(u))}return N.apply(this,[k,U])}};o("request"),o("sendAsync"),o("send");const l=new Proxy(i,{deleteProperty:()=>!0}),h=new Proxy(s,{deleteProperty:()=>!0});this.provider=l,this.communicationProvider=h,await Promise.all([i._initializeState(),s._initializeState(Ke(Ke({},e),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),Ee.debug("Torus - injected provider")}}export{Qt as BUTTON_POSITION,nu as TORUS_BUILD_ENV,Gr as TorusInPageProvider,Eu as default};
